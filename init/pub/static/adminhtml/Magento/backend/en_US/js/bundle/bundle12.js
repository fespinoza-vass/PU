require.config({"config": {
        "jsbuild":{"Amasty_Xsearch/js/lib/amcharts4/plugins/polyfill.min.js":"!function e(u,c,a){function s(r,t){if(!c[r]){if(!u[r]){var n=\"function\"==typeof require&&require;if(!t&&n)return n(r,!0);if(f)return f(r,!0);var i=new Error(\"Cannot find module '\"+r+\"'\");throw i.code=\"MODULE_NOT_FOUND\",i}var o=c[r]={exports:{}};u[r][0].call(o.exports,function(t){var n=u[r][1][t];return s(n||t)},o,o.exports,e,u,c,a)}return c[r].exports}for(var f=\"function\"==typeof require&&require,t=0;t<a.length;t++)s(a[t]);return s}({1:[function(t,n,r){\"use strict\";t(2);var e=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(t(15));e.default._babelPolyfill&&\"undefined\"!=typeof console&&console.warn&&console.warn(\"@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning.\"),e.default._babelPolyfill=!0},{15:15,2:2}],2:[function(t,n,r){\"use strict\";t(3),t(5),t(4),t(11),t(10),t(13),t(12),t(14),t(7),t(8),t(6),t(9),t(306),t(307)},{10:10,11:11,12:12,13:13,14:14,3:3,306:306,307:307,4:4,5:5,6:6,7:7,8:8,9:9}],3:[function(t,n,r){t(278),t(214),t(216),t(215),t(218),t(220),t(225),t(219),t(217),t(227),t(226),t(222),t(223),t(221),t(213),t(224),t(228),t(229),t(180),t(182),t(181),t(231),t(230),t(201),t(211),t(212),t(202),t(203),t(204),t(205),t(206),t(207),t(208),t(209),t(210),t(184),t(185),t(186),t(187),t(188),t(189),t(190),t(191),t(192),t(193),t(194),t(195),t(196),t(197),t(198),t(199),t(200),t(265),t(270),t(277),t(268),t(260),t(261),t(266),t(271),t(273),t(256),t(257),t(258),t(259),t(262),t(263),t(264),t(267),t(269),t(272),t(274),t(275),t(276),t(175),t(177),t(176),t(179),t(178),t(163),t(161),t(168),t(165),t(171),t(173),t(160),t(167),t(157),t(172),t(155),t(170),t(169),t(162),t(166),t(154),t(156),t(159),t(158),t(174),t(164),t(247),t(248),t(254),t(249),t(250),t(251),t(252),t(253),t(232),t(183),t(255),t(290),t(291),t(279),t(280),t(285),t(288),t(289),t(283),t(286),t(284),t(287),t(281),t(282),t(233),t(234),t(235),t(236),t(237),t(240),t(238),t(239),t(241),t(242),t(243),t(244),t(246),t(245),n.exports=t(52)},{154:154,155:155,156:156,157:157,158:158,159:159,160:160,161:161,162:162,163:163,164:164,165:165,166:166,167:167,168:168,169:169,170:170,171:171,172:172,173:173,174:174,175:175,176:176,177:177,178:178,179:179,180:180,181:181,182:182,183:183,184:184,185:185,186:186,187:187,188:188,189:189,190:190,191:191,192:192,193:193,194:194,195:195,196:196,197:197,198:198,199:199,200:200,201:201,202:202,203:203,204:204,205:205,206:206,207:207,208:208,209:209,210:210,211:211,212:212,213:213,214:214,215:215,216:216,217:217,218:218,219:219,220:220,221:221,222:222,223:223,224:224,225:225,226:226,227:227,228:228,229:229,230:230,231:231,232:232,233:233,234:234,235:235,236:236,237:237,238:238,239:239,240:240,241:241,242:242,243:243,244:244,245:245,246:246,247:247,248:248,249:249,250:250,251:251,252:252,253:253,254:254,255:255,256:256,257:257,258:258,259:259,260:260,261:261,262:262,263:263,264:264,265:265,266:266,267:267,268:268,269:269,270:270,271:271,272:272,273:273,274:274,275:275,276:276,277:277,278:278,279:279,280:280,281:281,282:282,283:283,284:284,285:285,286:286,287:287,288:288,289:289,290:290,291:291,52:52}],4:[function(t,n,r){t(292),n.exports=t(52).Array.flatMap},{292:292,52:52}],5:[function(t,n,r){t(293),n.exports=t(52).Array.includes},{293:293,52:52}],6:[function(t,n,r){t(294),n.exports=t(52).Object.entries},{294:294,52:52}],7:[function(t,n,r){t(295),n.exports=t(52).Object.getOwnPropertyDescriptors},{295:295,52:52}],8:[function(t,n,r){t(296),n.exports=t(52).Object.values},{296:296,52:52}],9:[function(t,n,r){\"use strict\";t(232),t(297),n.exports=t(52).Promise.finally},{232:232,297:297,52:52}],10:[function(t,n,r){t(298),n.exports=t(52).String.padEnd},{298:298,52:52}],11:[function(t,n,r){t(299),n.exports=t(52).String.padStart},{299:299,52:52}],12:[function(t,n,r){t(301),n.exports=t(52).String.trimRight},{301:301,52:52}],13:[function(t,n,r){t(300),n.exports=t(52).String.trimLeft},{300:300,52:52}],14:[function(t,n,r){t(302),n.exports=t(151).f(\"asyncIterator\")},{151:151,302:302}],15:[function(t,n,r){t(32),n.exports=t(18).global},{18:18,32:32}],16:[function(t,n,r){n.exports=function(t){if(\"function\"!=typeof t)throw TypeError(t+\" is not a function!\");return t}},{}],17:[function(t,n,r){var e=t(28);n.exports=function(t){if(!e(t))throw TypeError(t+\" is not an object!\");return t}},{28:28}],18:[function(t,n,r){var e=n.exports={version:\"2.6.5\"};\"number\"==typeof __e&&(__e=e)},{}],19:[function(t,n,r){var o=t(16);n.exports=function(e,i,t){if(o(e),void 0===i)return e;switch(t){case 1:return function(t){return e.call(i,t)};case 2:return function(t,n){return e.call(i,t,n)};case 3:return function(t,n,r){return e.call(i,t,n,r)}}return function(){return e.apply(i,arguments)}}},{16:16}],20:[function(t,n,r){n.exports=!t(23)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},{23:23}],21:[function(t,n,r){var e=t(28),i=t(24).document,o=e(i)&&e(i.createElement);n.exports=function(t){return o?i.createElement(t):{}}},{24:24,28:28}],22:[function(t,n,r){var y=t(24),g=t(18),d=t(19),x=t(26),m=t(25),b=\"prototype\",S=function(t,n,r){var e,i,o,u=t&S.F,c=t&S.G,a=t&S.S,f=t&S.P,s=t&S.B,l=t&S.W,h=c?g:g[n]||(g[n]={}),p=h[b],v=c?y:a?y[n]:(y[n]||{})[b];for(e in c&&(r=n),r)(i=!u&&v&&void 0!==v[e])&&m(h,e)||(o=i?v[e]:r[e],h[e]=c&&\"function\"!=typeof v[e]?r[e]:s&&i?d(o,y):l&&v[e]==o?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[b]=e[b],t}(o):f&&\"function\"==typeof o?d(Function.call,o):o,f&&((h.virtual||(h.virtual={}))[e]=o,t&S.R&&p&&!p[e]&&x(p,e,o)))};S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128,n.exports=S},{18:18,19:19,24:24,25:25,26:26}],23:[function(t,n,r){n.exports=function(t){try{return!!t()}catch(t){return!0}}},{}],24:[function(t,n,r){var e=n.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=e)},{}],25:[function(t,n,r){var e={}.hasOwnProperty;n.exports=function(t,n){return e.call(t,n)}},{}],26:[function(t,n,r){var e=t(29),i=t(30);n.exports=t(20)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},{20:20,29:29,30:30}],27:[function(t,n,r){n.exports=!t(20)&&!t(23)(function(){return 7!=Object.defineProperty(t(21)(\"div\"),\"a\",{get:function(){return 7}}).a})},{20:20,21:21,23:23}],28:[function(t,n,r){n.exports=function(t){return\"object\"==typeof t?null!==t:\"function\"==typeof t}},{}],29:[function(t,n,r){var e=t(17),i=t(27),o=t(31),u=Object.defineProperty;r.f=t(20)?Object.defineProperty:function defineProperty(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if(\"get\"in r||\"set\"in r)throw TypeError(\"Accessors not supported!\");return\"value\"in r&&(t[n]=r.value),t}},{17:17,20:20,27:27,31:31}],30:[function(t,n,r){n.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},{}],31:[function(t,n,r){var i=t(28);n.exports=function(t,n){if(!i(t))return t;var r,e;if(n&&\"function\"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;if(\"function\"==typeof(r=t.valueOf)&&!i(e=r.call(t)))return e;if(!n&&\"function\"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;throw TypeError(\"Can't convert object to primitive value\")}},{28:28}],32:[function(t,n,r){var e=t(22);e(e.G,{global:t(24)})},{22:22,24:24}],33:[function(t,n,r){arguments[4][16][0].apply(r,arguments)},{16:16}],34:[function(t,n,r){var e=t(48);n.exports=function(t,n){if(\"number\"!=typeof t&&\"Number\"!=e(t))throw TypeError(n);return+t}},{48:48}],35:[function(t,n,r){var e=t(152)(\"unscopables\"),i=Array.prototype;null==i[e]&&t(72)(i,e,{}),n.exports=function(t){i[e][t]=!0}},{152:152,72:72}],36:[function(t,n,r){\"use strict\";var e=t(129)(!0);n.exports=function(t,n,r){return n+(r?e(t,n).length:1)}},{129:129}],37:[function(t,n,r){n.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+\": incorrect invocation!\");return t}},{}],38:[function(t,n,r){arguments[4][17][0].apply(r,arguments)},{17:17,81:81}],39:[function(t,n,r){\"use strict\";var f=t(142),s=t(137),l=t(141);n.exports=[].copyWithin||function copyWithin(t,n){var r=f(this),e=l(r.length),i=s(t,e),o=s(n,e),u=2<arguments.length?arguments[2]:void 0,c=Math.min((void 0===u?e:s(u,e))-o,e-i),a=1;for(o<i&&i<o+c&&(a=-1,o+=c-1,i+=c-1);0<c--;)o in r?r[i]=r[o]:delete r[i],i+=a,o+=a;return r}},{137:137,141:141,142:142}],40:[function(t,n,r){\"use strict\";var c=t(142),a=t(137),f=t(141);n.exports=function fill(t){for(var n=c(this),r=f(n.length),e=arguments.length,i=a(1<e?arguments[1]:void 0,r),o=2<e?arguments[2]:void 0,u=void 0===o?r:a(o,r);i<u;)n[i++]=t;return n}},{137:137,141:141,142:142}],41:[function(t,n,r){var a=t(140),f=t(141),s=t(137);n.exports=function(c){return function(t,n,r){var e,i=a(t),o=f(i.length),u=s(r,o);if(c&&n!=n){for(;u<o;)if((e=i[u++])!=e)return!0}else for(;u<o;u++)if((c||u in i)&&i[u]===n)return c||u||0;return!c&&-1}}},{137:137,140:140,141:141}],42:[function(t,n,r){var m=t(54),b=t(77),S=t(142),w=t(141),e=t(45);n.exports=function(l,t){var h=1==l,p=2==l,v=3==l,y=4==l,g=6==l,d=5==l||g,x=t||e;return function(t,n,r){for(var e,i,o=S(t),u=b(o),c=m(n,r,3),a=w(u.length),f=0,s=h?x(t,a):p?x(t,0):void 0;f<a;f++)if((d||f in u)&&(i=c(e=u[f],f,o),l))if(h)s[f]=i;else if(i)switch(l){case 3:return!0;case 5:return e;case 6:return f;case 2:s.push(e)}else if(y)return!1;return g?-1:v||y?y:s}}},{141:141,142:142,45:45,54:54,77:77}],43:[function(t,n,r){var s=t(33),l=t(142),h=t(77),p=t(141);n.exports=function(t,n,r,e,i){s(n);var o=l(t),u=h(o),c=p(o.length),a=i?c-1:0,f=i?-1:1;if(r<2)for(;;){if(a in u){e=u[a],a+=f;break}if(a+=f,i?a<0:c<=a)throw TypeError(\"Reduce of empty array with no initial value\")}for(;i?0<=a:a<c;a+=f)a in u&&(e=n(e,u[a],a,o));return e}},{141:141,142:142,33:33,77:77}],44:[function(t,n,r){var e=t(81),i=t(79),o=t(152)(\"species\");n.exports=function(t){var n;return i(t)&&(\"function\"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&null===(n=n[o])&&(n=void 0)),void 0===n?Array:n}},{152:152,79:79,81:81}],45:[function(t,n,r){var e=t(44);n.exports=function(t,n){return new(e(t))(n)}},{44:44}],46:[function(t,n,r){\"use strict\";var o=t(33),u=t(81),c=t(76),a=[].slice,f={};n.exports=Function.bind||function bind(n){var r=o(this),e=a.call(arguments,1),i=function(){var t=e.concat(a.call(arguments));return this instanceof i?function(t,n,r){if(!(n in f)){for(var e=[],i=0;i<n;i++)e[i]=\"a[\"+i+\"]\";f[n]=Function(\"F,a\",\"return new F(\"+e.join(\",\")+\")\")}return f[n](t,r)}(r,t.length,t):c(r,t,n)};return u(r.prototype)&&(i.prototype=r.prototype),i}},{33:33,76:76,81:81}],47:[function(t,n,r){var i=t(48),o=t(152)(\"toStringTag\"),u=\"Arguments\"==i(function(){return arguments}());n.exports=function(t){var n,r,e;return void 0===t?\"Undefined\":null===t?\"Null\":\"string\"==typeof(r=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),o))?r:u?i(n):\"Object\"==(e=i(n))&&\"function\"==typeof n.callee?\"Arguments\":e}},{152:152,48:48}],48:[function(t,n,r){var e={}.toString;n.exports=function(t){return e.call(t).slice(8,-1)}},{}],49:[function(t,n,r){\"use strict\";var u=t(99).f,c=t(98),a=t(117),f=t(54),s=t(37),l=t(68),e=t(85),i=t(87),o=t(123),h=t(58),p=t(94).fastKey,v=t(149),y=h?\"_s\":\"size\",g=function(t,n){var r,e=p(n);if(\"F\"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};n.exports={getConstructor:function(t,o,r,e){var i=t(function(t,n){s(t,i,o,\"_i\"),t._t=o,t._i=c(null),t._f=void 0,t._l=void 0,t[y]=0,null!=n&&l(n,r,t[e],t)});return a(i.prototype,{clear:function clear(){for(var t=v(this,o),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[y]=0},delete:function(t){var n=v(this,o),r=g(n,t);if(r){var e=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=e),e&&(e.p=i),n._f==r&&(n._f=e),n._l==r&&(n._l=i),n[y]--}return!!r},forEach:function forEach(t){v(this,o);for(var n,r=f(t,1<arguments.length?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function has(t){return!!g(v(this,o),t)}}),h&&u(i.prototype,\"size\",{get:function(){return v(this,o)[y]}}),i},def:function(t,n,r){var e,i,o=g(t,n);return o?o.v=r:(t._l=o={i:i=p(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[y]++,\"F\"!==i&&(t._i[i]=o)),t},getEntry:g,setStrong:function(t,r,n){e(t,r,function(t,n){this._t=v(t,r),this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?i(0,\"keys\"==n?r.k:\"values\"==n?r.v:[r.k,r.v]):(t._t=void 0,i(1))},n?\"entries\":\"values\",!n,!0),o(r)}}},{117:117,123:123,149:149,37:37,54:54,58:58,68:68,85:85,87:87,94:94,98:98,99:99}],50:[function(t,n,r){\"use strict\";var u=t(117),c=t(94).getWeak,i=t(38),a=t(81),f=t(37),s=t(68),e=t(42),l=t(71),h=t(149),o=e(5),p=e(6),v=0,y=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},d=function(t,n){return o(t.a,function(t){return t[0]===n})};g.prototype={get:function(t){var n=d(this,t);if(n)return n[1]},has:function(t){return!!d(this,t)},set:function(t,n){var r=d(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(n){var t=p(this.a,function(t){return t[0]===n});return~t&&this.a.splice(t,1),!!~t}},n.exports={getConstructor:function(t,r,e,i){var o=t(function(t,n){f(t,o,r,\"_i\"),t._t=r,t._i=v++,t._l=void 0,null!=n&&s(n,e,t[i],t)});return u(o.prototype,{delete:function(t){if(!a(t))return!1;var n=c(t);return!0===n?y(h(this,r)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function has(t){if(!a(t))return!1;var n=c(t);return!0===n?y(h(this,r)).has(t):n&&l(n,this._i)}}),o},def:function(t,n,r){var e=c(i(n),!0);return!0===e?y(t).set(n,r):e[t._i]=r,t},ufstore:y}},{117:117,149:149,37:37,38:38,42:42,68:68,71:71,81:81,94:94}],51:[function(t,n,r){\"use strict\";var d=t(70),x=t(62),m=t(118),b=t(117),S=t(94),w=t(68),_=t(37),E=t(81),F=t(64),I=t(86),O=t(124),P=t(75);n.exports=function(e,t,n,r,i,o){var u=d[e],c=u,a=i?\"set\":\"add\",f=c&&c.prototype,s={},l=function(t){var r=f[t];m(f,t,\"delete\"==t?function(t){return!(o&&!E(t))&&r.call(this,0===t?0:t)}:\"has\"==t?function has(t){return!(o&&!E(t))&&r.call(this,0===t?0:t)}:\"get\"==t?function get(t){return o&&!E(t)?void 0:r.call(this,0===t?0:t)}:\"add\"==t?function add(t){return r.call(this,0===t?0:t),this}:function set(t,n){return r.call(this,0===t?0:t,n),this})};if(\"function\"==typeof c&&(o||f.forEach&&!F(function(){(new c).entries().next()}))){var h=new c,p=h[a](o?{}:-0,1)!=h,v=F(function(){h.has(1)}),y=I(function(t){new c(t)}),g=!o&&F(function(){for(var t=new c,n=5;n--;)t[a](n,n);return!t.has(-0)});y||(((c=t(function(t,n){_(t,c,e);var r=P(new u,t,c);return null!=n&&w(n,i,r[a],r),r})).prototype=f).constructor=c),(v||g)&&(l(\"delete\"),l(\"has\"),i&&l(\"get\")),(g||p)&&l(a),o&&f.clear&&delete f.clear}else c=r.getConstructor(t,e,i,a),b(c.prototype,n),S.NEED=!0;return O(c,e),s[e]=c,x(x.G+x.W+x.F*(c!=u),s),o||r.setStrong(c,e,i),c}},{117:117,118:118,124:124,37:37,62:62,64:64,68:68,70:70,75:75,81:81,86:86,94:94}],52:[function(t,n,r){arguments[4][18][0].apply(r,arguments)},{18:18}],53:[function(t,n,r){\"use strict\";var e=t(99),i=t(116);n.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},{116:116,99:99}],54:[function(t,n,r){arguments[4][19][0].apply(r,arguments)},{19:19,33:33}],55:[function(t,n,r){\"use strict\";var e=t(64),i=Date.prototype.getTime,o=Date.prototype.toISOString,u=function(t){return 9<t?t:\"0\"+t};n.exports=e(function(){return\"0385-07-25T07:06:39.999Z\"!=o.call(new Date(-5e13-1))})||!e(function(){o.call(new Date(NaN))})?function toISOString(){if(!isFinite(i.call(this)))throw RangeError(\"Invalid time value\");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?\"-\":9999<n?\"+\":\"\";return e+(\"00000\"+Math.abs(n)).slice(e?-6:-4)+\"-\"+u(t.getUTCMonth()+1)+\"-\"+u(t.getUTCDate())+\"T\"+u(t.getUTCHours())+\":\"+u(t.getUTCMinutes())+\":\"+u(t.getUTCSeconds())+\".\"+(99<r?r:\"0\"+u(r))+\"Z\"}:o},{64:64}],56:[function(t,n,r){\"use strict\";var e=t(38),i=t(143);n.exports=function(t){if(\"string\"!==t&&\"number\"!==t&&\"default\"!==t)throw TypeError(\"Incorrect hint\");return i(e(this),\"number\"!=t)}},{143:143,38:38}],57:[function(t,n,r){n.exports=function(t){if(null==t)throw TypeError(\"Can't call method on  \"+t);return t}},{}],58:[function(t,n,r){arguments[4][20][0].apply(r,arguments)},{20:20,64:64}],59:[function(t,n,r){arguments[4][21][0].apply(r,arguments)},{21:21,70:70,81:81}],60:[function(t,n,r){n.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},{}],61:[function(t,n,r){var c=t(107),a=t(104),f=t(108);n.exports=function(t){var n=c(t),r=a.f;if(r)for(var e,i=r(t),o=f.f,u=0;i.length>u;)o.call(t,e=i[u++])&&n.push(e);return n}},{104:104,107:107,108:108}],62:[function(t,n,r){var y=t(70),g=t(52),d=t(72),x=t(118),m=t(54),b=\"prototype\",S=function(t,n,r){var e,i,o,u,c=t&S.F,a=t&S.G,f=t&S.S,s=t&S.P,l=t&S.B,h=a?y:f?y[n]||(y[n]={}):(y[n]||{})[b],p=a?g:g[n]||(g[n]={}),v=p[b]||(p[b]={});for(e in a&&(r=n),r)o=((i=!c&&h&&void 0!==h[e])?h:r)[e],u=l&&i?m(o,y):s&&\"function\"==typeof o?m(Function.call,o):o,h&&x(h,e,o,t&S.U),p[e]!=o&&d(p,e,u),s&&v[e]!=o&&(v[e]=o)};y.core=g,S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128,n.exports=S},{118:118,52:52,54:54,70:70,72:72}],63:[function(t,n,r){var e=t(152)(\"match\");n.exports=function(n){var r=/./;try{\"/./\"[n](r)}catch(t){try{return r[e]=!1,!\"/./\"[n](r)}catch(t){}}return!0}},{152:152}],64:[function(t,n,r){arguments[4][23][0].apply(r,arguments)},{23:23}],65:[function(t,n,r){\"use strict\";t(248);var s=t(118),l=t(72),h=t(64),p=t(57),v=t(152),y=t(120),g=v(\"species\"),d=!h(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:\"7\"},t},\"7\"!==\"\".replace(t,\"$<a>\")}),x=function(){var t=/(?:)/,n=t.exec;t.exec=function(){return n.apply(this,arguments)};var r=\"ab\".split(t);return 2===r.length&&\"a\"===r[0]&&\"b\"===r[1]}();n.exports=function(r,t,n){var e=v(r),o=!h(function(){var t={};return t[e]=function(){return 7},7!=\"\"[r](t)}),i=o?!h(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},\"split\"===r&&(n.constructor={},n.constructor[g]=function(){return n}),n[e](\"\"),!t}):void 0;if(!o||!i||\"replace\"===r&&!d||\"split\"===r&&!x){var u=/./[e],c=n(p,e,\"\"[r],function maybeCallNative(t,n,r,e,i){return n.exec===y?o&&!i?{done:!0,value:u.call(n,r,e)}:{done:!0,value:t.call(r,n,e)}:{done:!1}}),a=c[0],f=c[1];s(String.prototype,r,a),l(RegExp.prototype,e,2==t?function(t,n){return f.call(t,this,n)}:function(t){return f.call(t,this)})}}},{118:118,120:120,152:152,248:248,57:57,64:64,72:72}],66:[function(t,n,r){\"use strict\";var e=t(38);n.exports=function(){var t=e(this),n=\"\";return t.global&&(n+=\"g\"),t.ignoreCase&&(n+=\"i\"),t.multiline&&(n+=\"m\"),t.unicode&&(n+=\"u\"),t.sticky&&(n+=\"y\"),n}},{38:38}],67:[function(t,n,r){\"use strict\";var p=t(79),v=t(81),y=t(141),g=t(54),d=t(152)(\"isConcatSpreadable\");n.exports=function flattenIntoArray(t,n,r,e,i,o,u,c){for(var a,f,s=i,l=0,h=!!u&&g(u,c,3);l<e;){if(l in r){if(a=h?h(r[l],l,n):r[l],f=!1,v(a)&&(f=void 0!==(f=a[d])?!!f:p(a)),f&&0<o)s=flattenIntoArray(t,n,a,y(a.length),s,o-1)-1;else{if(9007199254740991<=s)throw TypeError();t[s]=a}s++}l++}return s}},{141:141,152:152,54:54,79:79,81:81}],68:[function(t,n,r){var h=t(54),p=t(83),v=t(78),y=t(38),g=t(141),d=t(153),x={},m={};(r=n.exports=function(t,n,r,e,i){var o,u,c,a,f=i?function(){return t}:d(t),s=h(r,e,n?2:1),l=0;if(\"function\"!=typeof f)throw TypeError(t+\" is not iterable!\");if(v(f)){for(o=g(t.length);l<o;l++)if((a=n?s(y(u=t[l])[0],u[1]):s(t[l]))===x||a===m)return a}else for(c=f.call(t);!(u=c.next()).done;)if((a=p(c,s,u.value,n))===x||a===m)return a}).BREAK=x,r.RETURN=m},{141:141,153:153,38:38,54:54,78:78,83:83}],69:[function(t,n,r){n.exports=t(126)(\"native-function-to-string\",Function.toString)},{126:126}],70:[function(t,n,r){arguments[4][24][0].apply(r,arguments)},{24:24}],71:[function(t,n,r){arguments[4][25][0].apply(r,arguments)},{25:25}],72:[function(t,n,r){arguments[4][26][0].apply(r,arguments)},{116:116,26:26,58:58,99:99}],73:[function(t,n,r){var e=t(70).document;n.exports=e&&e.documentElement},{70:70}],74:[function(t,n,r){arguments[4][27][0].apply(r,arguments)},{27:27,58:58,59:59,64:64}],75:[function(t,n,r){var o=t(81),u=t(122).set;n.exports=function(t,n,r){var e,i=n.constructor;return i!==r&&\"function\"==typeof i&&(e=i.prototype)!==r.prototype&&o(e)&&u&&u(t,e),t}},{122:122,81:81}],76:[function(t,n,r){n.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},{}],77:[function(t,n,r){var e=t(48);n.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(t){return\"String\"==e(t)?t.split(\"\"):Object(t)}},{48:48}],78:[function(t,n,r){var e=t(88),i=t(152)(\"iterator\"),o=Array.prototype;n.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},{152:152,88:88}],79:[function(t,n,r){var e=t(48);n.exports=Array.isArray||function isArray(t){return\"Array\"==e(t)}},{48:48}],80:[function(t,n,r){var e=t(81),i=Math.floor;n.exports=function isInteger(t){return!e(t)&&isFinite(t)&&i(t)===t}},{81:81}],81:[function(t,n,r){arguments[4][28][0].apply(r,arguments)},{28:28}],82:[function(t,n,r){var e=t(81),i=t(48),o=t(152)(\"match\");n.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:\"RegExp\"==i(t))}},{152:152,48:48,81:81}],83:[function(t,n,r){var o=t(38);n.exports=function(n,t,r,e){try{return e?t(o(r)[0],r[1]):t(r)}catch(t){var i=n.return;throw void 0!==i&&o(i.call(n)),t}}},{38:38}],84:[function(t,n,r){\"use strict\";var e=t(98),i=t(116),o=t(124),u={};t(72)(u,t(152)(\"iterator\"),function(){return this}),n.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+\" Iterator\")}},{116:116,124:124,152:152,72:72,98:98}],85:[function(t,n,r){\"use strict\";var m=t(89),b=t(62),S=t(118),w=t(72),_=t(88),E=t(84),F=t(124),I=t(105),O=t(152)(\"iterator\"),P=!([].keys&&\"next\"in[].keys()),A=\"values\",M=function(){return this};n.exports=function(t,n,r,e,i,o,u){E(r,n,e);var c,a,f,s=function(t){if(!P&&t in v)return v[t];switch(t){case\"keys\":return function keys(){return new r(this,t)};case A:return function values(){return new r(this,t)}}return function entries(){return new r(this,t)}},l=n+\" Iterator\",h=i==A,p=!1,v=t.prototype,y=v[O]||v[\"@@iterator\"]||i&&v[i],g=y||s(i),d=i?h?s(\"entries\"):g:void 0,x=\"Array\"==n&&v.entries||y;if(x&&(f=I(x.call(new t)))!==Object.prototype&&f.next&&(F(f,l,!0),m||\"function\"==typeof f[O]||w(f,O,M)),h&&y&&y.name!==A&&(p=!0,g=function values(){return y.call(this)}),m&&!u||!P&&!p&&v[O]||w(v,O,g),_[n]=g,_[l]=M,i)if(c={values:h?g:s(A),keys:o?g:s(\"keys\"),entries:d},u)for(a in c)a in v||S(v,a,c[a]);else b(b.P+b.F*(P||p),n,c);return c}},{105:105,118:118,124:124,152:152,62:62,72:72,84:84,88:88,89:89}],86:[function(t,n,r){var o=t(152)(\"iterator\"),u=!1;try{var e=[7][o]();e.return=function(){u=!0},Array.from(e,function(){throw 2})}catch(t){}n.exports=function(t,n){if(!n&&!u)return!1;var r=!1;try{var e=[7],i=e[o]();i.next=function(){return{done:r=!0}},e[o]=function(){return i},t(e)}catch(t){}return r}},{152:152}],87:[function(t,n,r){n.exports=function(t,n){return{value:n,done:!!t}}},{}],88:[function(t,n,r){n.exports={}},{}],89:[function(t,n,r){n.exports=!1},{}],90:[function(t,n,r){var e=Math.expm1;n.exports=!e||22025.465794806718<e(10)||e(10)<22025.465794806718||-2e-17!=e(-2e-17)?function expm1(t){return 0==(t=+t)?t:-1e-6<t&&t<1e-6?t+t*t/2:Math.exp(t)-1}:e},{}],91:[function(t,n,r){var o=t(93),e=Math.pow,u=e(2,-52),c=e(2,-23),a=e(2,127)*(2-c),f=e(2,-126);n.exports=Math.fround||function fround(t){var n,r,e=Math.abs(t),i=o(t);return e<f?i*(e/f/c+1/u-1/u)*f*c:a<(r=(n=(1+c/u)*e)-(n-e))||r!=r?i*(1/0):i*r}},{93:93}],92:[function(t,n,r){n.exports=Math.log1p||function log1p(t){return-1e-8<(t=+t)&&t<1e-8?t-t*t/2:Math.log(1+t)}},{}],93:[function(t,n,r){n.exports=Math.sign||function sign(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},{}],94:[function(t,n,r){var e=t(147)(\"meta\"),i=t(81),o=t(71),u=t(99).f,c=0,a=Object.isExtensible||function(){return!0},f=!t(64)(function(){return a(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:\"O\"+ ++c,w:{}}})},l=n.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!i(t))return\"symbol\"==typeof t?t:(\"string\"==typeof t?\"S\":\"P\")+t;if(!o(t,e)){if(!a(t))return\"F\";if(!n)return\"E\";s(t)}return t[e].i},getWeak:function(t,n){if(!o(t,e)){if(!a(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return f&&l.NEED&&a(t)&&!o(t,e)&&s(t),t}}},{147:147,64:64,71:71,81:81,99:99}],95:[function(t,n,r){var c=t(70),a=t(136).set,f=c.MutationObserver||c.WebKitMutationObserver,s=c.process,l=c.Promise,h=\"process\"==t(48)(s);n.exports=function(){var r,e,i,t=function(){var t,n;for(h&&(t=s.domain)&&t.exit();r;){n=r.fn,r=r.next;try{n()}catch(t){throw r?i():e=void 0,t}}e=void 0,t&&t.enter()};if(h)i=function(){s.nextTick(t)};else if(!f||c.navigator&&c.navigator.standalone)if(l&&l.resolve){var n=l.resolve(void 0);i=function(){n.then(t)}}else i=function(){a.call(c,t)};else{var o=!0,u=document.createTextNode(\"\");new f(t).observe(u,{characterData:!0}),i=function(){u.data=o=!o}}return function(t){var n={fn:t,next:void 0};e&&(e.next=n),r||(r=n,i()),e=n}}},{136:136,48:48,70:70}],96:[function(t,n,r){\"use strict\";var i=t(33);function PromiseCapability(t){var r,e;this.promise=new t(function(t,n){if(void 0!==r||void 0!==e)throw TypeError(\"Bad Promise constructor\");r=t,e=n}),this.resolve=i(r),this.reject=i(e)}n.exports.f=function(t){return new PromiseCapability(t)}},{33:33}],97:[function(t,n,r){\"use strict\";var h=t(107),p=t(104),v=t(108),y=t(142),g=t(77),i=Object.assign;n.exports=!i||t(64)(function(){var t={},n={},r=Symbol(),e=\"abcdefghijklmnopqrst\";return t[r]=7,e.split(\"\").forEach(function(t){n[t]=t}),7!=i({},t)[r]||Object.keys(i({},n)).join(\"\")!=e})?function assign(t,n){for(var r=y(t),e=arguments.length,i=1,o=p.f,u=v.f;i<e;)for(var c,a=g(arguments[i++]),f=o?h(a).concat(o(a)):h(a),s=f.length,l=0;l<s;)u.call(a,c=f[l++])&&(r[c]=a[c]);return r}:i},{104:104,107:107,108:108,142:142,64:64,77:77}],98:[function(e,t,n){var i=e(38),o=e(100),u=e(60),c=e(125)(\"IE_PROTO\"),a=function(){},f=\"prototype\",s=function(){var t,n=e(59)(\"iframe\"),r=u.length;for(n.style.display=\"none\",e(73).appendChild(n),n.src=\"javascript:\",(t=n.contentWindow.document).open(),t.write(\"<script>document.F=Object<\\/script>\"),t.close(),s=t.F;r--;)delete s[f][u[r]];return s()};t.exports=Object.create||function create(t,n){var r;return null!==t?(a[f]=i(t),r=new a,a[f]=null,r[c]=t):r=s(),void 0===n?r:o(r,n)}},{100:100,125:125,38:38,59:59,60:60,73:73}],99:[function(t,n,r){arguments[4][29][0].apply(r,arguments)},{143:143,29:29,38:38,58:58,74:74}],100:[function(t,n,r){var u=t(99),c=t(38),a=t(107);n.exports=t(58)?Object.defineProperties:function defineProperties(t,n){c(t);for(var r,e=a(n),i=e.length,o=0;o<i;)u.f(t,r=e[o++],n[r]);return t}},{107:107,38:38,58:58,99:99}],101:[function(t,n,r){var e=t(108),i=t(116),o=t(140),u=t(143),c=t(71),a=t(74),f=Object.getOwnPropertyDescriptor;r.f=t(58)?f:function getOwnPropertyDescriptor(t,n){if(t=o(t),n=u(n,!0),a)try{return f(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},{108:108,116:116,140:140,143:143,58:58,71:71,74:74}],102:[function(t,n,r){var e=t(140),i=t(103).f,o={}.toString,u=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function getOwnPropertyNames(t){return u&&\"[object Window]\"==o.call(t)?function(t){try{return i(t)}catch(t){return u.slice()}}(t):i(e(t))}},{103:103,140:140}],103:[function(t,n,r){var e=t(106),i=t(60).concat(\"length\",\"prototype\");r.f=Object.getOwnPropertyNames||function getOwnPropertyNames(t){return e(t,i)}},{106:106,60:60}],104:[function(t,n,r){r.f=Object.getOwnPropertySymbols},{}],105:[function(t,n,r){var e=t(71),i=t(142),o=t(125)(\"IE_PROTO\"),u=Object.prototype;n.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:\"function\"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},{125:125,142:142,71:71}],106:[function(t,n,r){var u=t(71),c=t(140),a=t(41)(!1),f=t(125)(\"IE_PROTO\");n.exports=function(t,n){var r,e=c(t),i=0,o=[];for(r in e)r!=f&&u(e,r)&&o.push(r);for(;n.length>i;)u(e,r=n[i++])&&(~a(o,r)||o.push(r));return o}},{125:125,140:140,41:41,71:71}],107:[function(t,n,r){var e=t(106),i=t(60);n.exports=Object.keys||function keys(t){return e(t,i)}},{106:106,60:60}],108:[function(t,n,r){r.f={}.propertyIsEnumerable},{}],109:[function(t,n,r){var i=t(62),o=t(52),u=t(64);n.exports=function(t,n){var r=(o.Object||{})[t]||Object[t],e={};e[t]=n(r),i(i.S+i.F*u(function(){r(1)}),\"Object\",e)}},{52:52,62:62,64:64}],110:[function(t,n,r){var a=t(107),f=t(140),s=t(108).f;n.exports=function(c){return function(t){for(var n,r=f(t),e=a(r),i=e.length,o=0,u=[];o<i;)s.call(r,n=e[o++])&&u.push(c?[n,r[n]]:r[n]);return u}}},{107:107,108:108,140:140}],111:[function(t,n,r){var e=t(103),i=t(104),o=t(38),u=t(70).Reflect;n.exports=u&&u.ownKeys||function ownKeys(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},{103:103,104:104,38:38,70:70}],112:[function(t,n,r){var e=t(70).parseFloat,i=t(134).trim;n.exports=1/e(t(135)+\"-0\")!=-1/0?function parseFloat(t){var n=i(String(t),3),r=e(n);return 0===r&&\"-\"==n.charAt(0)?-0:r}:e},{134:134,135:135,70:70}],113:[function(t,n,r){var e=t(70).parseInt,i=t(134).trim,o=t(135),u=/^[-+]?0[xX]/;n.exports=8!==e(o+\"08\")||22!==e(o+\"0x16\")?function parseInt(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},{134:134,135:135,70:70}],114:[function(t,n,r){n.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},{}],115:[function(t,n,r){var e=t(38),i=t(81),o=t(96);n.exports=function(t,n){if(e(t),i(n)&&n.constructor===t)return n;var r=o.f(t);return(0,r.resolve)(n),r.promise}},{38:38,81:81,96:96}],116:[function(t,n,r){arguments[4][30][0].apply(r,arguments)},{30:30}],117:[function(t,n,r){var i=t(118);n.exports=function(t,n,r){for(var e in n)i(t,e,n[e],r);return t}},{118:118}],118:[function(t,n,r){var o=t(70),u=t(72),c=t(71),a=t(147)(\"src\"),e=t(69),i=\"toString\",f=(\"\"+e).split(i);t(52).inspectSource=function(t){return e.call(t)},(n.exports=function(t,n,r,e){var i=\"function\"==typeof r;i&&(c(r,\"name\")||u(r,\"name\",n)),t[n]!==r&&(i&&(c(r,a)||u(r,a,t[n]?\"\"+t[n]:f.join(String(n)))),t===o?t[n]=r:e?t[n]?t[n]=r:u(t,n,r):(delete t[n],u(t,n,r)))})(Function.prototype,i,function toString(){return\"function\"==typeof this&&this[a]||e.call(this)})},{147:147,52:52,69:69,70:70,71:71,72:72}],119:[function(t,n,r){\"use strict\";var i=t(47),o=RegExp.prototype.exec;n.exports=function(t,n){var r=t.exec;if(\"function\"==typeof r){var e=r.call(t,n);if(\"object\"!=typeof e)throw new TypeError(\"RegExp exec method returned something other than an Object or null\");return e}if(\"RegExp\"!==i(t))throw new TypeError(\"RegExp#exec called on incompatible receiver\");return o.call(t,n)}},{47:47}],120:[function(t,n,r){\"use strict\";var e,i,u=t(66),c=RegExp.prototype.exec,a=String.prototype.replace,o=c,f=\"lastIndex\",s=(e=/a/,i=/b*/g,c.call(e,\"a\"),c.call(i,\"a\"),0!==e[f]||0!==i[f]),l=void 0!==/()??/.exec(\"\")[1];(s||l)&&(o=function exec(t){var n,r,e,i,o=this;return l&&(r=new RegExp(\"^\"+o.source+\"$(?!\\\\s)\",u.call(o))),s&&(n=o[f]),e=c.call(o,t),s&&e&&(o[f]=o.global?e.index+e[0].length:n),l&&e&&1<e.length&&a.call(e[0],r,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(e[i]=void 0)}),e}),n.exports=o},{66:66}],121:[function(t,n,r){n.exports=Object.is||function is(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},{}],122:[function(n,t,r){var e=n(81),i=n(38),o=function(t,n){if(i(t),!e(n)&&null!==n)throw TypeError(n+\": can't set as prototype!\")};t.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?function(t,r,e){try{(e=n(54)(Function.call,n(101).f(Object.prototype,\"__proto__\").set,2))(t,[]),r=!(t instanceof Array)}catch(t){r=!0}return function setPrototypeOf(t,n){return o(t,n),r?t.__proto__=n:e(t,n),t}}({},!1):void 0),check:o}},{101:101,38:38,54:54,81:81}],123:[function(t,n,r){\"use strict\";var e=t(70),i=t(99),o=t(58),u=t(152)(\"species\");n.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},{152:152,58:58,70:70,99:99}],124:[function(t,n,r){var e=t(99).f,i=t(71),o=t(152)(\"toStringTag\");n.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},{152:152,71:71,99:99}],125:[function(t,n,r){var e=t(126)(\"keys\"),i=t(147);n.exports=function(t){return e[t]||(e[t]=i(t))}},{126:126,147:147}],126:[function(t,n,r){var e=t(52),i=t(70),o=\"__core-js_shared__\",u=i[o]||(i[o]={});(n.exports=function(t,n){return u[t]||(u[t]=void 0!==n?n:{})})(\"versions\",[]).push({version:e.version,mode:t(89)?\"pure\":\"global\",copyright:\"\u00a9 2019 Denis Pushkarev (zloirock.ru)\"})},{52:52,70:70,89:89}],127:[function(t,n,r){var i=t(38),o=t(33),u=t(152)(\"species\");n.exports=function(t,n){var r,e=i(t).constructor;return void 0===e||null==(r=i(e)[u])?n:o(r)}},{152:152,33:33,38:38}],128:[function(t,n,r){\"use strict\";var e=t(64);n.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},{64:64}],129:[function(t,n,r){var a=t(139),f=t(57);n.exports=function(c){return function(t,n){var r,e,i=String(f(t)),o=a(n),u=i.length;return o<0||u<=o?c?\"\":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===u||(e=i.charCodeAt(o+1))<56320||57343<e?c?i.charAt(o):r:c?i.slice(o,o+2):e-56320+(r-55296<<10)+65536}}},{139:139,57:57}],130:[function(t,n,r){var e=t(82),i=t(57);n.exports=function(t,n,r){if(e(n))throw TypeError(\"String#\"+r+\" doesn't accept regex!\");return String(i(t))}},{57:57,82:82}],131:[function(t,n,r){var e=t(62),i=t(64),u=t(57),c=/\"/g,o=function(t,n,r,e){var i=String(u(t)),o=\"<\"+n;return\"\"!==r&&(o+=\" \"+r+'=\"'+String(e).replace(c,\"&quot;\")+'\"'),o+\">\"+i+\"</\"+n+\">\"};n.exports=function(n,t){var r={};r[n]=t(o),e(e.P+e.F*i(function(){var t=\"\"[n]('\"');return t!==t.toLowerCase()||3<t.split('\"').length}),\"String\",r)}},{57:57,62:62,64:64}],132:[function(t,n,r){var s=t(141),l=t(133),h=t(57);n.exports=function(t,n,r,e){var i=String(h(t)),o=i.length,u=void 0===r?\" \":String(r),c=s(n);if(c<=o||\"\"==u)return i;var a=c-o,f=l.call(u,Math.ceil(a/u.length));return f.length>a&&(f=f.slice(0,a)),e?f+i:i+f}},{133:133,141:141,57:57}],133:[function(t,n,r){\"use strict\";var i=t(139),o=t(57);n.exports=function repeat(t){var n=String(o(this)),r=\"\",e=i(t);if(e<0||e==1/0)throw RangeError(\"Count can't be negative\");for(;0<e;(e>>>=1)&&(n+=n))1&e&&(r+=n);return r}},{139:139,57:57}],134:[function(t,n,r){var u=t(62),e=t(57),c=t(64),a=t(135),i=\"[\"+a+\"]\",o=RegExp(\"^\"+i+i+\"*\"),f=RegExp(i+i+\"*$\"),s=function(t,n,r){var e={},i=c(function(){return!!a[t]()||\"\u200b\u0085\"!=\"\u200b\u0085\"[t]()}),o=e[t]=i?n(l):a[t];r&&(e[r]=o),u(u.P+u.F*i,\"String\",e)},l=s.trim=function(t,n){return t=String(e(t)),1&n&&(t=t.replace(o,\"\")),2&n&&(t=t.replace(f,\"\")),t};n.exports=s},{135:135,57:57,62:62,64:64}],135:[function(t,n,r){n.exports=\"\\t\\n\\v\\f\\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\\u2028\\u2029\\ufeff\"},{}],136:[function(t,n,r){var e,i,o,u=t(54),c=t(76),a=t(73),f=t(59),s=t(70),l=s.process,h=s.setImmediate,p=s.clearImmediate,v=s.MessageChannel,y=s.Dispatch,g=0,d={},x=\"onreadystatechange\",m=function(){var t=+this;if(d.hasOwnProperty(t)){var n=d[t];delete d[t],n()}},b=function(t){m.call(t.data)};h&&p||(h=function setImmediate(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return d[++g]=function(){c(\"function\"==typeof t?t:Function(t),n)},e(g),g},p=function clearImmediate(t){delete d[t]},\"process\"==t(48)(l)?e=function(t){l.nextTick(u(m,t,1))}:y&&y.now?e=function(t){y.now(u(m,t,1))}:v?(o=(i=new v).port2,i.port1.onmessage=b,e=u(o.postMessage,o,1)):s.addEventListener&&\"function\"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+\"\",\"*\")},s.addEventListener(\"message\",b,!1)):e=x in f(\"script\")?function(t){a.appendChild(f(\"script\"))[x]=function(){a.removeChild(this),m.call(t)}}:function(t){setTimeout(u(m,t,1),0)}),n.exports={set:h,clear:p}},{48:48,54:54,59:59,70:70,73:73,76:76}],137:[function(t,n,r){var e=t(139),i=Math.max,o=Math.min;n.exports=function(t,n){return(t=e(t))<0?i(t+n,0):o(t,n)}},{139:139}],138:[function(t,n,r){var e=t(139),i=t(141);n.exports=function(t){if(void 0===t)return 0;var n=e(t),r=i(n);if(n!==r)throw RangeError(\"Wrong length!\");return r}},{139:139,141:141}],139:[function(t,n,r){var e=Math.ceil,i=Math.floor;n.exports=function(t){return isNaN(t=+t)?0:(0<t?i:e)(t)}},{}],140:[function(t,n,r){var e=t(77),i=t(57);n.exports=function(t){return e(i(t))}},{57:57,77:77}],141:[function(t,n,r){var e=t(139),i=Math.min;n.exports=function(t){return 0<t?i(e(t),9007199254740991):0}},{139:139}],142:[function(t,n,r){var e=t(57);n.exports=function(t){return Object(e(t))}},{57:57}],143:[function(t,n,r){arguments[4][31][0].apply(r,arguments)},{31:31,81:81}],144:[function(t,n,r){\"use strict\";if(t(58)){var d=t(89),x=t(70),m=t(64),b=t(62),S=t(146),e=t(145),h=t(54),w=t(37),i=t(116),_=t(72),o=t(117),u=t(139),E=t(141),F=t(138),c=t(137),a=t(143),f=t(71),I=t(47),O=t(81),p=t(142),v=t(78),P=t(98),A=t(105),M=t(103).f,y=t(153),s=t(147),l=t(152),g=t(42),k=t(41),N=t(127),j=t(164),T=t(88),R=t(86),L=t(123),C=t(40),G=t(39),D=t(99),U=t(101),W=D.f,V=U.f,B=x.RangeError,z=x.TypeError,q=x.Uint8Array,Y=\"ArrayBuffer\",K=\"Shared\"+Y,$=\"BYTES_PER_ELEMENT\",J=\"prototype\",X=Array[J],H=e.ArrayBuffer,Z=e.DataView,Q=g(0),tt=g(2),nt=g(3),rt=g(4),et=g(5),it=g(6),ot=k(!0),ut=k(!1),ct=j.values,at=j.keys,ft=j.entries,st=X.lastIndexOf,lt=X.reduce,ht=X.reduceRight,pt=X.join,vt=X.sort,yt=X.slice,gt=X.toString,dt=X.toLocaleString,xt=l(\"iterator\"),mt=l(\"toStringTag\"),bt=s(\"typed_constructor\"),St=s(\"def_constructor\"),wt=S.CONSTR,_t=S.TYPED,Et=S.VIEW,Ft=\"Wrong length!\",It=g(1,function(t,n){return kt(N(t,t[St]),n)}),Ot=m(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),Pt=!!q&&!!q[J].set&&m(function(){new q(1).set({})}),At=function(t,n){var r=u(t);if(r<0||r%n)throw B(\"Wrong offset!\");return r},Mt=function(t){if(O(t)&&_t in t)return t;throw z(t+\" is not a typed array!\")},kt=function(t,n){if(!(O(t)&&bt in t))throw z(\"It is not a typed array constructor!\");return new t(n)},Nt=function(t,n){return jt(N(t,t[St]),n)},jt=function(t,n){for(var r=0,e=n.length,i=kt(t,e);r<e;)i[r]=n[r++];return i},Tt=function(t,n,r){W(t,n,{get:function(){return this._d[r]}})},Rt=function from(t){var n,r,e,i,o,u,c=p(t),a=arguments.length,f=1<a?arguments[1]:void 0,s=void 0!==f,l=y(c);if(null!=l&&!v(l)){for(u=l.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(s&&2<a&&(f=h(f,arguments[2],2)),n=0,r=E(c.length),i=kt(this,r);n<r;n++)i[n]=s?f(c[n],n):c[n];return i},Lt=function of(){for(var t=0,n=arguments.length,r=kt(this,n);t<n;)r[t]=arguments[t++];return r},Ct=!!q&&m(function(){dt.call(new q(1))}),Gt=function toLocaleString(){return dt.apply(Ct?yt.call(Mt(this)):Mt(this),arguments)},Dt={copyWithin:function copyWithin(t,n){return G.call(Mt(this),t,n,2<arguments.length?arguments[2]:void 0)},every:function every(t){return rt(Mt(this),t,1<arguments.length?arguments[1]:void 0)},fill:function fill(t){return C.apply(Mt(this),arguments)},filter:function filter(t){return Nt(this,tt(Mt(this),t,1<arguments.length?arguments[1]:void 0))},find:function find(t){return et(Mt(this),t,1<arguments.length?arguments[1]:void 0)},findIndex:function findIndex(t){return it(Mt(this),t,1<arguments.length?arguments[1]:void 0)},forEach:function forEach(t){Q(Mt(this),t,1<arguments.length?arguments[1]:void 0)},indexOf:function indexOf(t){return ut(Mt(this),t,1<arguments.length?arguments[1]:void 0)},includes:function includes(t){return ot(Mt(this),t,1<arguments.length?arguments[1]:void 0)},join:function join(t){return pt.apply(Mt(this),arguments)},lastIndexOf:function lastIndexOf(t){return st.apply(Mt(this),arguments)},map:function map(t){return It(Mt(this),t,1<arguments.length?arguments[1]:void 0)},reduce:function reduce(t){return lt.apply(Mt(this),arguments)},reduceRight:function reduceRight(t){return ht.apply(Mt(this),arguments)},reverse:function reverse(){for(var t,n=this,r=Mt(n).length,e=Math.floor(r/2),i=0;i<e;)t=n[i],n[i++]=n[--r],n[r]=t;return n},some:function some(t){return nt(Mt(this),t,1<arguments.length?arguments[1]:void 0)},sort:function sort(t){return vt.call(Mt(this),t)},subarray:function subarray(t,n){var r=Mt(this),e=r.length,i=c(t,e);return new(N(r,r[St]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,E((void 0===n?e:c(n,e))-i))}},Ut=function slice(t,n){return Nt(this,yt.call(Mt(this),t,n))},Wt=function set(t){Mt(this);var n=At(arguments[1],1),r=this.length,e=p(t),i=E(e.length),o=0;if(r<i+n)throw B(Ft);for(;o<i;)this[n+o]=e[o++]},Vt={entries:function entries(){return ft.call(Mt(this))},keys:function keys(){return at.call(Mt(this))},values:function values(){return ct.call(Mt(this))}},Bt=function(t,n){return O(t)&&t[_t]&&\"symbol\"!=typeof n&&n in t&&String(+n)==String(n)},zt=function getOwnPropertyDescriptor(t,n){return Bt(t,n=a(n,!0))?i(2,t[n]):V(t,n)},qt=function defineProperty(t,n,r){return!(Bt(t,n=a(n,!0))&&O(r)&&f(r,\"value\"))||f(r,\"get\")||f(r,\"set\")||r.configurable||f(r,\"writable\")&&!r.writable||f(r,\"enumerable\")&&!r.enumerable?W(t,n,r):(t[n]=r.value,t)};wt||(U.f=zt,D.f=qt),b(b.S+b.F*!wt,\"Object\",{getOwnPropertyDescriptor:zt,defineProperty:qt}),m(function(){gt.call({})})&&(gt=dt=function toString(){return pt.call(this)});var Yt=o({},Dt);o(Yt,Vt),_(Yt,xt,Vt.values),o(Yt,{slice:Ut,set:Wt,constructor:function(){},toString:gt,toLocaleString:Gt}),Tt(Yt,\"buffer\",\"b\"),Tt(Yt,\"byteOffset\",\"o\"),Tt(Yt,\"byteLength\",\"l\"),Tt(Yt,\"length\",\"e\"),W(Yt,mt,{get:function(){return this[_t]}}),n.exports=function(t,l,n,o){var h=t+((o=!!o)?\"Clamped\":\"\")+\"Array\",r=\"get\"+t,u=\"set\"+t,p=x[h],c=p||{},e=p&&A(p),i=!p||!S.ABV,a={},f=p&&p[J],v=function(t,i){W(t,i,{get:function(){return t=i,(n=this._d).v[r](t*l+n.o,Ot);var t,n},set:function(t){return n=i,r=t,e=this._d,o&&(r=(r=Math.round(r))<0?0:255<r?255:255&r),void e.v[u](n*l+e.o,r,Ot);var n,r,e},enumerable:!0})};i?(p=n(function(t,n,r,e){w(t,p,h,\"_d\");var i,o,u,c,a=0,f=0;if(O(n)){if(!(n instanceof H||(c=I(n))==Y||c==K))return _t in n?jt(p,n):Rt.call(p,n);i=n,f=At(r,l);var s=n.byteLength;if(void 0===e){if(s%l)throw B(Ft);if((o=s-f)<0)throw B(Ft)}else if(s<(o=E(e)*l)+f)throw B(Ft);u=o/l}else u=F(n),i=new H(o=u*l);for(_(t,\"_d\",{b:i,o:f,l:o,e:u,v:new Z(i)});a<u;)v(t,a++)}),f=p[J]=P(Yt),_(f,\"constructor\",p)):m(function(){p(1)})&&m(function(){new p(-1)})&&R(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=n(function(t,n,r,e){var i;return w(t,p,h),O(n)?n instanceof H||(i=I(n))==Y||i==K?void 0!==e?new c(n,At(r,l),e):void 0!==r?new c(n,At(r,l)):new c(n):_t in n?jt(p,n):Rt.call(p,n):new c(F(n))}),Q(e!==Function.prototype?M(c).concat(M(e)):M(c),function(t){t in p||_(p,t,c[t])}),p[J]=f,d||(f.constructor=p));var s=f[xt],y=!!s&&(\"values\"==s.name||null==s.name),g=Vt.values;_(p,bt,!0),_(f,_t,h),_(f,Et,!0),_(f,St,p),(o?new p(1)[mt]==h:mt in f)||W(f,mt,{get:function(){return h}}),a[h]=p,b(b.G+b.W+b.F*(p!=c),a),b(b.S,h,{BYTES_PER_ELEMENT:l}),b(b.S+b.F*m(function(){c.of.call(p,1)}),h,{from:Rt,of:Lt}),$ in f||_(f,$,l),b(b.P,h,Dt),L(h),b(b.P+b.F*Pt,h,{set:Wt}),b(b.P+b.F*!y,h,Vt),d||f.toString==gt||(f.toString=gt),b(b.P+b.F*m(function(){new p(1).slice()}),h,{slice:Ut}),b(b.P+b.F*(m(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!m(function(){f.toLocaleString.call([1,2])})),h,{toLocaleString:Gt}),T[h]=y?s:g,d||y||_(f,xt,g)}}else n.exports=function(){}},{101:101,103:103,105:105,116:116,117:117,123:123,127:127,137:137,138:138,139:139,141:141,142:142,143:143,145:145,146:146,147:147,152:152,153:153,164:164,37:37,39:39,40:40,41:41,42:42,47:47,54:54,58:58,62:62,64:64,70:70,71:71,72:72,78:78,81:81,86:86,88:88,89:89,98:98,99:99}],145:[function(t,n,r){\"use strict\";var e=t(70),i=t(58),o=t(89),u=t(146),c=t(72),a=t(117),f=t(64),s=t(37),l=t(139),h=t(141),p=t(138),v=t(103).f,y=t(99).f,g=t(40),d=t(124),x=\"ArrayBuffer\",m=\"DataView\",b=\"prototype\",S=\"Wrong index!\",w=e[x],_=e[m],E=e.Math,F=e.RangeError,I=e.Infinity,O=w,P=E.abs,A=E.pow,M=E.floor,k=E.log,N=E.LN2,j=\"byteLength\",T=\"byteOffset\",R=i?\"_b\":\"buffer\",L=i?\"_l\":j,C=i?\"_o\":T;function packIEEE754(t,n,r){var e,i,o,u=new Array(r),c=8*r-n-1,a=(1<<c)-1,f=a>>1,s=23===n?A(2,-24)-A(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for((t=P(t))!=t||t===I?(i=t!=t?1:0,e=a):(e=M(k(t)/N),t*(o=A(2,-e))<1&&(e--,o*=2),2<=(t+=1<=e+f?s/o:s*A(2,1-f))*o&&(e++,o/=2),a<=e+f?(i=0,e=a):1<=e+f?(i=(t*o-1)*A(2,n),e+=f):(i=t*A(2,f-1)*A(2,n),e=0));8<=n;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;0<c;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u}function unpackIEEE754(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,a=r-1,f=t[a--],s=127&f;for(f>>=7;0<c;s=256*s+t[a],a--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;0<c;e=256*e+t[a],a--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:f?-I:I;e+=A(2,n),s-=u}return(f?-1:1)*e*A(2,s-n)}function unpackI32(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function packI8(t){return[255&t]}function packI16(t){return[255&t,t>>8&255]}function packI32(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function packF64(t){return packIEEE754(t,52,8)}function packF32(t){return packIEEE754(t,23,4)}function addGetter(t,n,r){y(t[b],n,{get:function(){return this[r]}})}function get(t,n,r,e){var i=p(+r);if(i+n>t[L])throw F(S);var o=t[R]._b,u=i+t[C],c=o.slice(u,u+n);return e?c:c.reverse()}function set(t,n,r,e,i,o){var u=p(+r);if(u+n>t[L])throw F(S);for(var c=t[R]._b,a=u+t[C],f=e(+i),s=0;s<n;s++)c[a+s]=f[o?s:n-s-1]}if(u.ABV){if(!f(function(){w(1)})||!f(function(){new w(-1)})||f(function(){return new w,new w(1.5),new w(NaN),w.name!=x})){for(var G,D=(w=function ArrayBuffer(t){return s(this,w),new O(p(t))})[b]=O[b],U=v(O),W=0;U.length>W;)(G=U[W++])in w||c(w,G,O[G]);o||(D.constructor=w)}var V=new _(new w(2)),B=_[b].setInt8;V.setInt8(0,2147483648),V.setInt8(1,2147483649),!V.getInt8(0)&&V.getInt8(1)||a(_[b],{setInt8:function setInt8(t,n){B.call(this,t,n<<24>>24)},setUint8:function setUint8(t,n){B.call(this,t,n<<24>>24)}},!0)}else w=function ArrayBuffer(t){s(this,w,x);var n=p(t);this._b=g.call(new Array(n),0),this[L]=n},_=function DataView(t,n,r){s(this,_,m),s(t,w,m);var e=t[L],i=l(n);if(i<0||e<i)throw F(\"Wrong offset!\");if(e<i+(r=void 0===r?e-i:h(r)))throw F(\"Wrong length!\");this[R]=t,this[C]=i,this[L]=r},i&&(addGetter(w,j,\"_l\"),addGetter(_,\"buffer\",\"_b\"),addGetter(_,j,\"_l\"),addGetter(_,T,\"_o\")),a(_[b],{getInt8:function getInt8(t){return get(this,1,t)[0]<<24>>24},getUint8:function getUint8(t){return get(this,1,t)[0]},getInt16:function getInt16(t){var n=get(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function getUint16(t){var n=get(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function getInt32(t){return unpackI32(get(this,4,t,arguments[1]))},getUint32:function getUint32(t){return unpackI32(get(this,4,t,arguments[1]))>>>0},getFloat32:function getFloat32(t){return unpackIEEE754(get(this,4,t,arguments[1]),23,4)},getFloat64:function getFloat64(t){return unpackIEEE754(get(this,8,t,arguments[1]),52,8)},setInt8:function setInt8(t,n){set(this,1,t,packI8,n)},setUint8:function setUint8(t,n){set(this,1,t,packI8,n)},setInt16:function setInt16(t,n){set(this,2,t,packI16,n,arguments[2])},setUint16:function setUint16(t,n){set(this,2,t,packI16,n,arguments[2])},setInt32:function setInt32(t,n){set(this,4,t,packI32,n,arguments[2])},setUint32:function setUint32(t,n){set(this,4,t,packI32,n,arguments[2])},setFloat32:function setFloat32(t,n){set(this,4,t,packF32,n,arguments[2])},setFloat64:function setFloat64(t,n){set(this,8,t,packF64,n,arguments[2])}});d(w,x),d(_,m),c(_[b],u.VIEW,!0),r[x]=w,r[m]=_},{103:103,117:117,124:124,138:138,139:139,141:141,146:146,37:37,40:40,58:58,64:64,70:70,72:72,89:89,99:99}],146:[function(t,n,r){for(var e,i=t(70),o=t(72),u=t(147),c=u(\"typed_array\"),a=u(\"view\"),f=!(!i.ArrayBuffer||!i.DataView),s=f,l=0,h=\"Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array\".split(\",\");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,a,!0)):s=!1;n.exports={ABV:f,CONSTR:s,TYPED:c,VIEW:a}},{147:147,70:70,72:72}],147:[function(t,n,r){var e=0,i=Math.random();n.exports=function(t){return\"Symbol(\".concat(void 0===t?\"\":t,\")_\",(++e+i).toString(36))}},{}],148:[function(t,n,r){var e=t(70).navigator;n.exports=e&&e.userAgent||\"\"},{70:70}],149:[function(t,n,r){var e=t(81);n.exports=function(t,n){if(!e(t)||t._t!==n)throw TypeError(\"Incompatible receiver, \"+n+\" required!\");return t}},{81:81}],150:[function(t,n,r){var e=t(70),i=t(52),o=t(89),u=t(151),c=t(99).f;n.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});\"_\"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},{151:151,52:52,70:70,89:89,99:99}],151:[function(t,n,r){r.f=t(152)},{152:152}],152:[function(t,n,r){var e=t(126)(\"wks\"),i=t(147),o=t(70).Symbol,u=\"function\"==typeof o;(n.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)(\"Symbol.\"+t))}).store=e},{126:126,147:147,70:70}],153:[function(t,n,r){var e=t(47),i=t(152)(\"iterator\"),o=t(88);n.exports=t(52).getIteratorMethod=function(t){if(null!=t)return t[i]||t[\"@@iterator\"]||o[e(t)]}},{152:152,47:47,52:52,88:88}],154:[function(t,n,r){var e=t(62);e(e.P,\"Array\",{copyWithin:t(39)}),t(35)(\"copyWithin\")},{35:35,39:39,62:62}],155:[function(t,n,r){\"use strict\";var e=t(62),i=t(42)(4);e(e.P+e.F*!t(128)([].every,!0),\"Array\",{every:function every(t){return i(this,t,arguments[1])}})},{128:128,42:42,62:62}],156:[function(t,n,r){var e=t(62);e(e.P,\"Array\",{fill:t(40)}),t(35)(\"fill\")},{35:35,40:40,62:62}],157:[function(t,n,r){\"use strict\";var e=t(62),i=t(42)(2);e(e.P+e.F*!t(128)([].filter,!0),\"Array\",{filter:function filter(t){return i(this,t,arguments[1])}})},{128:128,42:42,62:62}],158:[function(t,n,r){\"use strict\";var e=t(62),i=t(42)(6),o=\"findIndex\",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,\"Array\",{findIndex:function findIndex(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),t(35)(o)},{35:35,42:42,62:62}],159:[function(t,n,r){\"use strict\";var e=t(62),i=t(42)(5),o=\"find\",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,\"Array\",{find:function find(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),t(35)(o)},{35:35,42:42,62:62}],160:[function(t,n,r){\"use strict\";var e=t(62),i=t(42)(0),o=t(128)([].forEach,!0);e(e.P+e.F*!o,\"Array\",{forEach:function forEach(t){return i(this,t,arguments[1])}})},{128:128,42:42,62:62}],161:[function(t,n,r){\"use strict\";var h=t(54),e=t(62),p=t(142),v=t(83),y=t(78),g=t(141),d=t(53),x=t(153);e(e.S+e.F*!t(86)(function(t){Array.from(t)}),\"Array\",{from:function from(t){var n,r,e,i,o=p(t),u=\"function\"==typeof this?this:Array,c=arguments.length,a=1<c?arguments[1]:void 0,f=void 0!==a,s=0,l=x(o);if(f&&(a=h(a,2<c?arguments[2]:void 0,2)),null==l||u==Array&&y(l))for(r=new u(n=g(o.length));s<n;s++)d(r,s,f?a(o[s],s):o[s]);else for(i=l.call(o),r=new u;!(e=i.next()).done;s++)d(r,s,f?v(i,a,[e.value,s],!0):e.value);return r.length=s,r}})},{141:141,142:142,153:153,53:53,54:54,62:62,78:78,83:83,86:86}],162:[function(t,n,r){\"use strict\";var e=t(62),i=t(41)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!t(128)(o)),\"Array\",{indexOf:function indexOf(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},{128:128,41:41,62:62}],163:[function(t,n,r){var e=t(62);e(e.S,\"Array\",{isArray:t(79)})},{62:62,79:79}],164:[function(t,n,r){\"use strict\";var e=t(35),i=t(87),o=t(88),u=t(140);n.exports=t(85)(Array,\"Array\",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,\"keys\"==n?r:\"values\"==n?t[r]:[r,t[r]])},\"values\"),o.Arguments=o.Array,e(\"keys\"),e(\"values\"),e(\"entries\")},{140:140,35:35,85:85,87:87,88:88}],165:[function(t,n,r){\"use strict\";var e=t(62),i=t(140),o=[].join;e(e.P+e.F*(t(77)!=Object||!t(128)(o)),\"Array\",{join:function join(t){return o.call(i(this),void 0===t?\",\":t)}})},{128:128,140:140,62:62,77:77}],166:[function(t,n,r){\"use strict\";var e=t(62),i=t(140),o=t(139),u=t(141),c=[].lastIndexOf,a=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(a||!t(128)(c)),\"Array\",{lastIndexOf:function lastIndexOf(t){if(a)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(1<arguments.length&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);0<=e;e--)if(e in n&&n[e]===t)return e||0;return-1}})},{128:128,139:139,140:140,141:141,62:62}],167:[function(t,n,r){\"use strict\";var e=t(62),i=t(42)(1);e(e.P+e.F*!t(128)([].map,!0),\"Array\",{map:function map(t){return i(this,t,arguments[1])}})},{128:128,42:42,62:62}],168:[function(t,n,r){\"use strict\";var e=t(62),i=t(53);e(e.S+e.F*t(64)(function(){function F(){}return!(Array.of.call(F)instanceof F)}),\"Array\",{of:function of(){for(var t=0,n=arguments.length,r=new(\"function\"==typeof this?this:Array)(n);t<n;)i(r,t,arguments[t++]);return r.length=n,r}})},{53:53,62:62,64:64}],169:[function(t,n,r){\"use strict\";var e=t(62),i=t(43);e(e.P+e.F*!t(128)([].reduceRight,!0),\"Array\",{reduceRight:function reduceRight(t){return i(this,t,arguments.length,arguments[1],!0)}})},{128:128,43:43,62:62}],170:[function(t,n,r){\"use strict\";var e=t(62),i=t(43);e(e.P+e.F*!t(128)([].reduce,!0),\"Array\",{reduce:function reduce(t){return i(this,t,arguments.length,arguments[1],!1)}})},{128:128,43:43,62:62}],171:[function(t,n,r){\"use strict\";var e=t(62),i=t(73),f=t(48),s=t(137),l=t(141),h=[].slice;e(e.P+e.F*t(64)(function(){i&&h.call(i)}),\"Array\",{slice:function slice(t,n){var r=l(this.length),e=f(this);if(n=void 0===n?r:n,\"Array\"==e)return h.call(this,t,n);for(var i=s(t,r),o=s(n,r),u=l(o-i),c=new Array(u),a=0;a<u;a++)c[a]=\"String\"==e?this.charAt(i+a):this[i+a];return c}})},{137:137,141:141,48:48,62:62,64:64,73:73}],172:[function(t,n,r){\"use strict\";var e=t(62),i=t(42)(3);e(e.P+e.F*!t(128)([].some,!0),\"Array\",{some:function some(t){return i(this,t,arguments[1])}})},{128:128,42:42,62:62}],173:[function(t,n,r){\"use strict\";var e=t(62),i=t(33),o=t(142),u=t(64),c=[].sort,a=[1,2,3];e(e.P+e.F*(u(function(){a.sort(void 0)})||!u(function(){a.sort(null)})||!t(128)(c)),\"Array\",{sort:function sort(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},{128:128,142:142,33:33,62:62,64:64}],174:[function(t,n,r){t(123)(\"Array\")},{123:123}],175:[function(t,n,r){var e=t(62);e(e.S,\"Date\",{now:function(){return(new Date).getTime()}})},{62:62}],176:[function(t,n,r){var e=t(62),i=t(55);e(e.P+e.F*(Date.prototype.toISOString!==i),\"Date\",{toISOString:i})},{55:55,62:62}],177:[function(t,n,r){\"use strict\";var e=t(62),i=t(142),o=t(143);e(e.P+e.F*t(64)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),\"Date\",{toJSON:function toJSON(t){var n=i(this),r=o(n);return\"number\"!=typeof r||isFinite(r)?n.toISOString():null}})},{142:142,143:143,62:62,64:64}],178:[function(t,n,r){var e=t(152)(\"toPrimitive\"),i=Date.prototype;e in i||t(72)(i,e,t(56))},{152:152,56:56,72:72}],179:[function(t,n,r){var e=Date.prototype,i=\"Invalid Date\",o=\"toString\",u=e[o],c=e.getTime;new Date(NaN)+\"\"!=i&&t(118)(e,o,function toString(){var t=c.call(this);return t==t?u.call(this):i})},{118:118}],180:[function(t,n,r){var e=t(62);e(e.P,\"Function\",{bind:t(46)})},{46:46,62:62}],181:[function(t,n,r){\"use strict\";var e=t(81),i=t(105),o=t(152)(\"hasInstance\"),u=Function.prototype;o in u||t(99).f(u,o,{value:function(t){if(\"function\"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},{105:105,152:152,81:81,99:99}],182:[function(t,n,r){var e=t(99).f,i=Function.prototype,o=/^\\s*function ([^ (]*)/;\"name\"in i||t(58)&&e(i,\"name\",{configurable:!0,get:function(){try{return(\"\"+this).match(o)[1]}catch(t){return\"\"}}})},{58:58,99:99}],183:[function(t,n,r){\"use strict\";var e=t(49),i=t(149);n.exports=t(51)(\"Map\",function(t){return function Map(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function get(t){var n=e.getEntry(i(this,\"Map\"),t);return n&&n.v},set:function set(t,n){return e.def(i(this,\"Map\"),0===t?0:t,n)}},e,!0)},{149:149,49:49,51:51}],184:[function(t,n,r){var e=t(62),i=t(92),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),\"Math\",{acosh:function acosh(t){return(t=+t)<1?NaN:94906265.62425156<t?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},{62:62,92:92}],185:[function(t,n,r){var e=t(62),i=Math.asinh;e(e.S+e.F*!(i&&0<1/i(0)),\"Math\",{asinh:function asinh(t){return isFinite(t=+t)&&0!=t?t<0?-asinh(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},{62:62}],186:[function(t,n,r){var e=t(62),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),\"Math\",{atanh:function atanh(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},{62:62}],187:[function(t,n,r){var e=t(62),i=t(93);e(e.S,\"Math\",{cbrt:function cbrt(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},{62:62,93:93}],188:[function(t,n,r){var e=t(62);e(e.S,\"Math\",{clz32:function clz32(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},{62:62}],189:[function(t,n,r){var e=t(62),i=Math.exp;e(e.S,\"Math\",{cosh:function cosh(t){return(i(t=+t)+i(-t))/2}})},{62:62}],190:[function(t,n,r){var e=t(62),i=t(90);e(e.S+e.F*(i!=Math.expm1),\"Math\",{expm1:i})},{62:62,90:90}],191:[function(t,n,r){var e=t(62);e(e.S,\"Math\",{fround:t(91)})},{62:62,91:91}],192:[function(t,n,r){var e=t(62),a=Math.abs;e(e.S,\"Math\",{hypot:function hypot(t,n){for(var r,e,i=0,o=0,u=arguments.length,c=0;o<u;)c<(r=a(arguments[o++]))?(i=i*(e=c/r)*e+1,c=r):i+=0<r?(e=r/c)*e:r;return c===1/0?1/0:c*Math.sqrt(i)}})},{62:62}],193:[function(t,n,r){var e=t(62),i=Math.imul;e(e.S+e.F*t(64)(function(){return-5!=i(4294967295,5)||2!=i.length}),\"Math\",{imul:function imul(t,n){var r=65535,e=+t,i=+n,o=r&e,u=r&i;return 0|o*u+((r&e>>>16)*u+o*(r&i>>>16)<<16>>>0)}})},{62:62,64:64}],194:[function(t,n,r){var e=t(62);e(e.S,\"Math\",{log10:function log10(t){return Math.log(t)*Math.LOG10E}})},{62:62}],195:[function(t,n,r){var e=t(62);e(e.S,\"Math\",{log1p:t(92)})},{62:62,92:92}],196:[function(t,n,r){var e=t(62);e(e.S,\"Math\",{log2:function log2(t){return Math.log(t)/Math.LN2}})},{62:62}],197:[function(t,n,r){var e=t(62);e(e.S,\"Math\",{sign:t(93)})},{62:62,93:93}],198:[function(t,n,r){var e=t(62),i=t(90),o=Math.exp;e(e.S+e.F*t(64)(function(){return-2e-17!=!Math.sinh(-2e-17)}),\"Math\",{sinh:function sinh(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},{62:62,64:64,90:90}],199:[function(t,n,r){var e=t(62),i=t(90),o=Math.exp;e(e.S,\"Math\",{tanh:function tanh(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},{62:62,90:90}],200:[function(t,n,r){var e=t(62);e(e.S,\"Math\",{trunc:function trunc(t){return(0<t?Math.floor:Math.ceil)(t)}})},{62:62}],201:[function(t,n,r){\"use strict\";var e=t(70),i=t(71),o=t(48),u=t(75),s=t(143),c=t(64),a=t(103).f,f=t(101).f,l=t(99).f,h=t(134).trim,p=\"Number\",v=e[p],y=v,g=v.prototype,d=o(t(98)(g))==p,x=\"trim\"in String.prototype,m=function(t){var n=s(t,!1);if(\"string\"==typeof n&&2<n.length){var r,e,i,o=(n=x?n.trim():h(n,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,c=n.slice(2),a=0,f=c.length;a<f;a++)if((u=c.charCodeAt(a))<48||i<u)return NaN;return parseInt(c,e)}}return+n};if(!v(\" 0o1\")||!v(\"0b1\")||v(\"+0x1\")){v=function Number(t){var n=arguments.length<1?0:t,r=this;return r instanceof v&&(d?c(function(){g.valueOf.call(r)}):o(r)!=p)?u(new y(m(n)),r,v):m(n)};for(var b,S=t(58)?a(y):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger\".split(\",\"),w=0;S.length>w;w++)i(y,b=S[w])&&!i(v,b)&&l(v,b,f(y,b));(v.prototype=g).constructor=v,t(118)(e,p,v)}},{101:101,103:103,118:118,134:134,143:143,48:48,58:58,64:64,70:70,71:71,75:75,98:98,99:99}],202:[function(t,n,r){var e=t(62);e(e.S,\"Number\",{EPSILON:Math.pow(2,-52)})},{62:62}],203:[function(t,n,r){var e=t(62),i=t(70).isFinite;e(e.S,\"Number\",{isFinite:function isFinite(t){return\"number\"==typeof t&&i(t)}})},{62:62,70:70}],204:[function(t,n,r){var e=t(62);e(e.S,\"Number\",{isInteger:t(80)})},{62:62,80:80}],205:[function(t,n,r){var e=t(62);e(e.S,\"Number\",{isNaN:function isNaN(t){return t!=t}})},{62:62}],206:[function(t,n,r){var e=t(62),i=t(80),o=Math.abs;e(e.S,\"Number\",{isSafeInteger:function isSafeInteger(t){return i(t)&&o(t)<=9007199254740991}})},{62:62,80:80}],207:[function(t,n,r){var e=t(62);e(e.S,\"Number\",{MAX_SAFE_INTEGER:9007199254740991})},{62:62}],208:[function(t,n,r){var e=t(62);e(e.S,\"Number\",{MIN_SAFE_INTEGER:-9007199254740991})},{62:62}],209:[function(t,n,r){var e=t(62),i=t(112);e(e.S+e.F*(Number.parseFloat!=i),\"Number\",{parseFloat:i})},{112:112,62:62}],210:[function(t,n,r){var e=t(62),i=t(113);e(e.S+e.F*(Number.parseInt!=i),\"Number\",{parseInt:i})},{113:113,62:62}],211:[function(t,n,r){\"use strict\";var e=t(62),f=t(139),s=t(34),l=t(133),i=1..toFixed,o=Math.floor,u=[0,0,0,0,0,0],h=\"Number.toFixed: incorrect invocation!\",p=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*u[r],u[r]=e%1e7,e=o(e/1e7)},v=function(t){for(var n=6,r=0;0<=--n;)r+=u[n],u[n]=o(r/t),r=r%t*1e7},y=function(){for(var t=6,n=\"\";0<=--t;)if(\"\"!==n||0===t||0!==u[t]){var r=String(u[t]);n=\"\"===n?r:n+l.call(\"0\",7-r.length)+r}return n},g=function(t,n,r){return 0===n?r:n%2==1?g(t,n-1,r*t):g(t*t,n/2,r)};e(e.P+e.F*(!!i&&(\"0.000\"!==8e-5.toFixed(3)||\"1\"!==.9.toFixed(0)||\"1.25\"!==1.255.toFixed(2)||\"1000000000000000128\"!==(0xde0b6b3a7640080).toFixed(0))||!t(64)(function(){i.call({})})),\"Number\",{toFixed:function toFixed(t){var n,r,e,i,o=s(this,h),u=f(t),c=\"\",a=\"0\";if(u<0||20<u)throw RangeError(h);if(o!=o)return\"NaN\";if(o<=-1e21||1e21<=o)return String(o);if(o<0&&(c=\"-\",o=-o),1e-21<o)if(r=(n=function(t){for(var n=0,r=t;4096<=r;)n+=12,r/=4096;for(;2<=r;)n+=1,r/=2;return n}(o*g(2,69,1))-69)<0?o*g(2,-n,1):o/g(2,n,1),r*=4503599627370496,0<(n=52-n)){for(p(0,r),e=u;7<=e;)p(1e7,0),e-=7;for(p(g(10,e,1),0),e=n-1;23<=e;)v(1<<23),e-=23;v(1<<e),p(1,1),v(2),a=y()}else p(0,r),p(1<<-n,0),a=y()+l.call(\"0\",u);return a=0<u?c+((i=a.length)<=u?\"0.\"+l.call(\"0\",u-i)+a:a.slice(0,i-u)+\".\"+a.slice(i-u)):c+a}})},{133:133,139:139,34:34,62:62,64:64}],212:[function(t,n,r){\"use strict\";var e=t(62),i=t(64),o=t(34),u=1..toPrecision;e(e.P+e.F*(i(function(){return\"1\"!==u.call(1,void 0)})||!i(function(){u.call({})})),\"Number\",{toPrecision:function toPrecision(t){var n=o(this,\"Number#toPrecision: incorrect invocation!\");return void 0===t?u.call(n):u.call(n,t)}})},{34:34,62:62,64:64}],213:[function(t,n,r){var e=t(62);e(e.S+e.F,\"Object\",{assign:t(97)})},{62:62,97:97}],214:[function(t,n,r){var e=t(62);e(e.S,\"Object\",{create:t(98)})},{62:62,98:98}],215:[function(t,n,r){var e=t(62);e(e.S+e.F*!t(58),\"Object\",{defineProperties:t(100)})},{100:100,58:58,62:62}],216:[function(t,n,r){var e=t(62);e(e.S+e.F*!t(58),\"Object\",{defineProperty:t(99).f})},{58:58,62:62,99:99}],217:[function(t,n,r){var e=t(81),i=t(94).onFreeze;t(109)(\"freeze\",function(n){return function freeze(t){return n&&e(t)?n(i(t)):t}})},{109:109,81:81,94:94}],218:[function(t,n,r){var e=t(140),i=t(101).f;t(109)(\"getOwnPropertyDescriptor\",function(){return function getOwnPropertyDescriptor(t,n){return i(e(t),n)}})},{101:101,109:109,140:140}],219:[function(t,n,r){t(109)(\"getOwnPropertyNames\",function(){return t(102).f})},{102:102,109:109}],220:[function(t,n,r){var e=t(142),i=t(105);t(109)(\"getPrototypeOf\",function(){return function getPrototypeOf(t){return i(e(t))}})},{105:105,109:109,142:142}],221:[function(t,n,r){var e=t(81);t(109)(\"isExtensible\",function(n){return function isExtensible(t){return!!e(t)&&(!n||n(t))}})},{109:109,81:81}],222:[function(t,n,r){var e=t(81);t(109)(\"isFrozen\",function(n){return function isFrozen(t){return!e(t)||!!n&&n(t)}})},{109:109,81:81}],223:[function(t,n,r){var e=t(81);t(109)(\"isSealed\",function(n){return function isSealed(t){return!e(t)||!!n&&n(t)}})},{109:109,81:81}],224:[function(t,n,r){var e=t(62);e(e.S,\"Object\",{is:t(121)})},{121:121,62:62}],225:[function(t,n,r){var e=t(142),i=t(107);t(109)(\"keys\",function(){return function keys(t){return i(e(t))}})},{107:107,109:109,142:142}],226:[function(t,n,r){var e=t(81),i=t(94).onFreeze;t(109)(\"preventExtensions\",function(n){return function preventExtensions(t){return n&&e(t)?n(i(t)):t}})},{109:109,81:81,94:94}],227:[function(t,n,r){var e=t(81),i=t(94).onFreeze;t(109)(\"seal\",function(n){return function seal(t){return n&&e(t)?n(i(t)):t}})},{109:109,81:81,94:94}],228:[function(t,n,r){var e=t(62);e(e.S,\"Object\",{setPrototypeOf:t(122).set})},{122:122,62:62}],229:[function(t,n,r){\"use strict\";var e=t(47),i={};i[t(152)(\"toStringTag\")]=\"z\",i+\"\"!=\"[object z]\"&&t(118)(Object.prototype,\"toString\",function toString(){return\"[object \"+e(this)+\"]\"},!0)},{118:118,152:152,47:47}],230:[function(t,n,r){var e=t(62),i=t(112);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},{112:112,62:62}],231:[function(t,n,r){var e=t(62),i=t(113);e(e.G+e.F*(parseInt!=i),{parseInt:i})},{113:113,62:62}],232:[function(r,t,n){\"use strict\";var e,i,o,u,c=r(89),a=r(70),f=r(54),s=r(47),l=r(62),h=r(81),p=r(33),v=r(37),y=r(68),g=r(127),d=r(136).set,x=r(95)(),m=r(96),b=r(114),S=r(148),w=r(115),_=\"Promise\",E=a.TypeError,F=a.process,I=F&&F.versions,O=I&&I.v8||\"\",P=a[_],A=\"process\"==s(F),M=function(){},k=i=m.f,N=!!function(){try{var t=P.resolve(1),n=(t.constructor={})[r(152)(\"species\")]=function(t){t(M,M)};return(A||\"function\"==typeof PromiseRejectionEvent)&&t.then(M)instanceof n&&0!==O.indexOf(\"6.6\")&&-1===S.indexOf(\"Chrome/66\")}catch(t){}}(),j=function(t){var n;return!(!h(t)||\"function\"!=typeof(n=t.then))&&n},T=function(s,r){if(!s._n){s._n=!0;var e=s._c;x(function(){for(var a=s._v,f=1==s._s,t=0,n=function(t){var n,r,e,i=f?t.ok:t.fail,o=t.resolve,u=t.reject,c=t.domain;try{i?(f||(2==s._h&&C(s),s._h=1),!0===i?n=a:(c&&c.enter(),n=i(a),c&&(c.exit(),e=!0)),n===t.promise?u(E(\"Promise-chain cycle\")):(r=j(n))?r.call(n,o,u):o(n)):u(a)}catch(t){c&&!e&&c.exit(),u(t)}};e.length>t;)n(e[t++]);s._c=[],s._n=!1,r&&!s._h&&R(s)})}},R=function(o){d.call(a,function(){var t,n,r,e=o._v,i=L(o);if(i&&(t=b(function(){A?F.emit(\"unhandledRejection\",e,o):(n=a.onunhandledrejection)?n({promise:o,reason:e}):(r=a.console)&&r.error&&r.error(\"Unhandled promise rejection\",e)}),o._h=A||L(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},L=function(t){return 1!==t._h&&0===(t._a||t._c).length},C=function(n){d.call(a,function(){var t;A?F.emit(\"rejectionHandled\",n):(t=a.onrejectionhandled)&&t({promise:n,reason:n._v})})},G=function(t){var n=this;n._d||(n._d=!0,(n=n._w||n)._v=t,n._s=2,n._a||(n._a=n._c.slice()),T(n,!0))},D=function(t){var r,e=this;if(!e._d){e._d=!0,e=e._w||e;try{if(e===t)throw E(\"Promise can't be resolved itself\");(r=j(t))?x(function(){var n={_w:e,_d:!1};try{r.call(t,f(D,n,1),f(G,n,1))}catch(t){G.call(n,t)}}):(e._v=t,e._s=1,T(e,!1))}catch(t){G.call({_w:e,_d:!1},t)}}};N||(P=function Promise(t){v(this,P,_,\"_h\"),p(t),e.call(this);try{t(f(D,this,1),f(G,this,1))}catch(t){G.call(this,t)}},(e=function Promise(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(117)(P.prototype,{then:function then(t,n){var r=k(g(this,P));return r.ok=\"function\"!=typeof t||t,r.fail=\"function\"==typeof n&&n,r.domain=A?F.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&T(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new e;this.promise=t,this.resolve=f(D,t,1),this.reject=f(G,t,1)},m.f=k=function(t){return t===P||t===u?new o(t):i(t)}),l(l.G+l.W+l.F*!N,{Promise:P}),r(124)(P,_),r(123)(_),u=r(52)[_],l(l.S+l.F*!N,_,{reject:function reject(t){var n=k(this);return(0,n.reject)(t),n.promise}}),l(l.S+l.F*(c||!N),_,{resolve:function resolve(t){return w(c&&this===u?P:this,t)}}),l(l.S+l.F*!(N&&r(86)(function(t){P.all(t).catch(M)})),_,{all:function all(t){var u=this,n=k(u),c=n.resolve,a=n.reject,r=b(function(){var e=[],i=0,o=1;y(t,!1,function(t){var n=i++,r=!1;e.push(void 0),o++,u.resolve(t).then(function(t){r||(r=!0,e[n]=t,--o||c(e))},a)}),--o||c(e)});return r.e&&a(r.v),n.promise},race:function race(t){var n=this,r=k(n),e=r.reject,i=b(function(){y(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i.e&&e(i.v),r.promise}})},{114:114,115:115,117:117,123:123,124:124,127:127,136:136,148:148,152:152,33:33,37:37,47:47,52:52,54:54,62:62,68:68,70:70,81:81,86:86,89:89,95:95,96:96}],233:[function(t,n,r){var e=t(62),o=t(33),u=t(38),c=(t(70).Reflect||{}).apply,a=Function.apply;e(e.S+e.F*!t(64)(function(){c(function(){})}),\"Reflect\",{apply:function apply(t,n,r){var e=o(t),i=u(r);return c?c(e,n,i):a.call(e,n,i)}})},{33:33,38:38,62:62,64:64,70:70}],234:[function(t,n,r){var e=t(62),c=t(98),a=t(33),f=t(38),s=t(81),i=t(64),l=t(46),h=(t(70).Reflect||{}).construct,p=i(function(){function F(){}return!(h(function(){},[],F)instanceof F)}),v=!i(function(){h(function(){})});e(e.S+e.F*(p||v),\"Reflect\",{construct:function construct(t,n){a(t),f(n);var r=arguments.length<3?t:a(arguments[2]);if(v&&!p)return h(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(l.apply(t,e))}var i=r.prototype,o=c(s(i)?i:Object.prototype),u=Function.apply.call(t,o,n);return s(u)?u:o}})},{33:33,38:38,46:46,62:62,64:64,70:70,81:81,98:98}],235:[function(t,n,r){var e=t(99),i=t(62),o=t(38),u=t(143);i(i.S+i.F*t(64)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),\"Reflect\",{defineProperty:function defineProperty(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},{143:143,38:38,62:62,64:64,99:99}],236:[function(t,n,r){var e=t(62),i=t(101).f,o=t(38);e(e.S,\"Reflect\",{deleteProperty:function deleteProperty(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},{101:101,38:38,62:62}],237:[function(t,n,r){\"use strict\";var e=t(62),i=t(38),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};t(84)(o,\"Object\",function(){var t,n=this._k;do{if(this._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[this._i++])in this._t));return{value:t,done:!1}}),e(e.S,\"Reflect\",{enumerate:function enumerate(t){return new o(t)}})},{38:38,62:62,84:84}],238:[function(t,n,r){var e=t(101),i=t(62),o=t(38);i(i.S,\"Reflect\",{getOwnPropertyDescriptor:function getOwnPropertyDescriptor(t,n){return e.f(o(t),n)}})},{101:101,38:38,62:62}],239:[function(t,n,r){var e=t(62),i=t(105),o=t(38);e(e.S,\"Reflect\",{getPrototypeOf:function getPrototypeOf(t){return i(o(t))}})},{105:105,38:38,62:62}],240:[function(t,n,r){var o=t(101),u=t(105),c=t(71),e=t(62),a=t(81),f=t(38);e(e.S,\"Reflect\",{get:function get(t,n){var r,e,i=arguments.length<3?t:arguments[2];return f(t)===i?t[n]:(r=o.f(t,n))?c(r,\"value\")?r.value:void 0!==r.get?r.get.call(i):void 0:a(e=u(t))?get(e,n,i):void 0}})},{101:101,105:105,38:38,62:62,71:71,81:81}],241:[function(t,n,r){var e=t(62);e(e.S,\"Reflect\",{has:function has(t,n){return n in t}})},{62:62}],242:[function(t,n,r){var e=t(62),i=t(38),o=Object.isExtensible;e(e.S,\"Reflect\",{isExtensible:function isExtensible(t){return i(t),!o||o(t)}})},{38:38,62:62}],243:[function(t,n,r){var e=t(62);e(e.S,\"Reflect\",{ownKeys:t(111)})},{111:111,62:62}],244:[function(t,n,r){var e=t(62),i=t(38),o=Object.preventExtensions;e(e.S,\"Reflect\",{preventExtensions:function preventExtensions(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},{38:38,62:62}],245:[function(t,n,r){var e=t(62),i=t(122);i&&e(e.S,\"Reflect\",{setPrototypeOf:function setPrototypeOf(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},{122:122,62:62}],246:[function(t,n,r){var c=t(99),a=t(101),f=t(105),s=t(71),e=t(62),l=t(116),h=t(38),p=t(81);e(e.S,\"Reflect\",{set:function set(t,n,r){var e,i,o=arguments.length<4?t:arguments[3],u=a.f(h(t),n);if(!u){if(p(i=f(t)))return set(i,n,r,o);u=l(0)}if(s(u,\"value\")){if(!1===u.writable||!p(o))return!1;if(e=a.f(o,n)){if(e.get||e.set||!1===e.writable)return!1;e.value=r,c.f(o,n,e)}else c.f(o,n,l(0,r));return!0}return void 0!==u.set&&(u.set.call(o,r),!0)}})},{101:101,105:105,116:116,38:38,62:62,71:71,81:81,99:99}],247:[function(t,n,r){var e=t(70),o=t(75),i=t(99).f,u=t(103).f,c=t(82),a=t(66),f=e.RegExp,s=f,l=f.prototype,h=/a/g,p=/a/g,v=new f(h)!==h;if(t(58)&&(!v||t(64)(function(){return p[t(152)(\"match\")]=!1,f(h)!=h||f(p)==p||\"/a/i\"!=f(h,\"i\")}))){f=function RegExp(t,n){var r=this instanceof f,e=c(t),i=void 0===n;return!r&&e&&t.constructor===f&&i?t:o(v?new s(e&&!i?t.source:t,n):s((e=t instanceof f)?t.source:t,e&&i?a.call(t):n),r?this:l,f)};for(var y=function(n){n in f||i(f,n,{configurable:!0,get:function(){return s[n]},set:function(t){s[n]=t}})},g=u(s),d=0;g.length>d;)y(g[d++]);(l.constructor=f).prototype=l,t(118)(e,\"RegExp\",f)}t(123)(\"RegExp\")},{103:103,118:118,123:123,152:152,58:58,64:64,66:66,70:70,75:75,82:82,99:99}],248:[function(t,n,r){\"use strict\";var e=t(120);t(62)({target:\"RegExp\",proto:!0,forced:e!==/./.exec},{exec:e})},{120:120,62:62}],249:[function(t,n,r){t(58)&&\"g\"!=/./g.flags&&t(99).f(RegExp.prototype,\"flags\",{configurable:!0,get:t(66)})},{58:58,66:66,99:99}],250:[function(t,n,r){\"use strict\";var l=t(38),h=t(141),p=t(36),v=t(119);t(65)(\"match\",1,function(e,i,f,s){return[function match(t){var n=e(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n):new RegExp(t)[i](String(n))},function(t){var n=s(f,t,this);if(n.done)return n.value;var r=l(t),e=String(this);if(!r.global)return v(r,e);for(var i,o=r.unicode,u=[],c=r.lastIndex=0;null!==(i=v(r,e));){var a=String(i[0]);\"\"===(u[c]=a)&&(r.lastIndex=p(e,h(r.lastIndex),o)),c++}return 0===c?null:u}]})},{119:119,141:141,36:36,38:38,65:65}],251:[function(t,n,r){\"use strict\";var _=t(38),e=t(142),E=t(141),F=t(139),I=t(36),O=t(119),P=Math.max,A=Math.min,h=Math.floor,p=/\\$([$&`']|\\d\\d?|<[^>]*>)/g,v=/\\$([$&`']|\\d\\d?)/g;t(65)(\"replace\",2,function(i,o,S,w){return[function replace(t,n){var r=i(this),e=null==t?void 0:t[o];return void 0!==e?e.call(t,r,n):S.call(String(r),t,n)},function(t,n){var r=w(S,t,this,n);if(r.done)return r.value;var e=_(t),i=String(this),o=\"function\"==typeof n;o||(n=String(n));var u=e.global;if(u){var c=e.unicode;e.lastIndex=0}for(var a=[];;){var f=O(e,i);if(null===f)break;if(a.push(f),!u)break;\"\"===String(f[0])&&(e.lastIndex=I(i,E(e.lastIndex),c))}for(var s,l=\"\",h=0,p=0;p<a.length;p++){f=a[p];for(var v=String(f[0]),y=P(A(F(f.index),i.length),0),g=[],d=1;d<f.length;d++)g.push(void 0===(s=f[d])?s:String(s));var x=f.groups;if(o){var m=[v].concat(g,y,i);void 0!==x&&m.push(x);var b=String(n.apply(void 0,m))}else b=getSubstitution(v,i,y,g,x,n);h<=y&&(l+=i.slice(h,y)+b,h=y+v.length)}return l+i.slice(h)}];function getSubstitution(o,u,c,a,f,t){var s=c+o.length,l=a.length,n=v;return void 0!==f&&(f=e(f),n=p),S.call(t,n,function(t,n){var r;switch(n.charAt(0)){case\"$\":return\"$\";case\"&\":return o;case\"`\":return u.slice(0,c);case\"'\":return u.slice(s);case\"<\":r=f[n.slice(1,-1)];break;default:var e=+n;if(0===e)return t;if(l<e){var i=h(e/10);return 0===i?t:i<=l?void 0===a[i-1]?n.charAt(1):a[i-1]+n.charAt(1):t}r=a[e-1]}return void 0===r?\"\":r})}})},{119:119,139:139,141:141,142:142,36:36,38:38,65:65}],252:[function(t,n,r){\"use strict\";var a=t(38),f=t(121),s=t(119);t(65)(\"search\",1,function(e,i,u,c){return[function search(t){var n=e(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n):new RegExp(t)[i](String(n))},function(t){var n=c(u,t,this);if(n.done)return n.value;var r=a(t),e=String(this),i=r.lastIndex;f(i,0)||(r.lastIndex=0);var o=s(r,e);return f(r.lastIndex,i)||(r.lastIndex=i),null===o?-1:o.index}]})},{119:119,121:121,38:38,65:65}],253:[function(t,n,r){\"use strict\";var l=t(82),m=t(38),b=t(127),S=t(36),w=t(141),_=t(119),h=t(120),e=t(64),E=Math.min,p=[].push,u=\"split\",v=\"length\",y=\"lastIndex\",F=4294967295,I=!e(function(){RegExp(F,\"y\")});t(65)(\"split\",2,function(i,o,g,d){var x;return x=\"c\"==\"abbc\"[u](/(b)*/)[1]||4!=\"test\"[u](/(?:)/,-1)[v]||2!=\"ab\"[u](/(?:ab)*/)[v]||4!=\".\"[u](/(.?)(.?)/)[v]||1<\".\"[u](/()()/)[v]||\"\"[u](/.?/)[v]?function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!l(t))return g.call(r,t,n);for(var e,i,o,u=[],c=(t.ignoreCase?\"i\":\"\")+(t.multiline?\"m\":\"\")+(t.unicode?\"u\":\"\")+(t.sticky?\"y\":\"\"),a=0,f=void 0===n?F:n>>>0,s=new RegExp(t.source,c+\"g\");(e=h.call(s,r))&&!(a<(i=s[y])&&(u.push(r.slice(a,e.index)),1<e[v]&&e.index<r[v]&&p.apply(u,e.slice(1)),o=e[0][v],a=i,u[v]>=f));)s[y]===e.index&&s[y]++;return a===r[v]?!o&&s.test(\"\")||u.push(\"\"):u.push(r.slice(a)),u[v]>f?u.slice(0,f):u}:\"0\"[u](void 0,0)[v]?function(t,n){return void 0===t&&0===n?[]:g.call(this,t,n)}:g,[function split(t,n){var r=i(this),e=null==t?void 0:t[o];return void 0!==e?e.call(t,r,n):x.call(String(r),t,n)},function(t,n){var r=d(x,t,this,n,x!==g);if(r.done)return r.value;var e=m(t),i=String(this),o=b(e,RegExp),u=e.unicode,c=(e.ignoreCase?\"i\":\"\")+(e.multiline?\"m\":\"\")+(e.unicode?\"u\":\"\")+(I?\"y\":\"g\"),a=new o(I?e:\"^(?:\"+e.source+\")\",c),f=void 0===n?F:n>>>0;if(0===f)return[];if(0===i.length)return null===_(a,i)?[i]:[];for(var s=0,l=0,h=[];l<i.length;){a.lastIndex=I?l:0;var p,v=_(a,I?i:i.slice(l));if(null===v||(p=E(w(a.lastIndex+(I?0:l)),i.length))===s)l=S(i,l,u);else{if(h.push(i.slice(s,l)),h.length===f)return h;for(var y=1;y<=v.length-1;y++)if(h.push(v[y]),h.length===f)return h;l=s=p}}return h.push(i.slice(s)),h}]})},{119:119,120:120,127:127,141:141,36:36,38:38,64:64,65:65,82:82}],254:[function(n,t,r){\"use strict\";n(249);var e=n(38),i=n(66),o=n(58),u=\"toString\",c=/./[u],a=function(t){n(118)(RegExp.prototype,u,t,!0)};n(64)(function(){return\"/a/b\"!=c.call({source:\"a\",flags:\"b\"})})?a(function toString(){var t=e(this);return\"/\".concat(t.source,\"/\",\"flags\"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):c.name!=u&&a(function toString(){return c.call(this)})},{118:118,249:249,38:38,58:58,64:64,66:66}],255:[function(t,n,r){\"use strict\";var e=t(49),i=t(149);n.exports=t(51)(\"Set\",function(t){return function Set(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function add(t){return e.def(i(this,\"Set\"),t=0===t?0:t,t)}},e)},{149:149,49:49,51:51}],256:[function(t,n,r){\"use strict\";t(131)(\"anchor\",function(n){return function anchor(t){return n(this,\"a\",\"name\",t)}})},{131:131}],257:[function(t,n,r){\"use strict\";t(131)(\"big\",function(t){return function big(){return t(this,\"big\",\"\",\"\")}})},{131:131}],258:[function(t,n,r){\"use strict\";t(131)(\"blink\",function(t){return function blink(){return t(this,\"blink\",\"\",\"\")}})},{131:131}],259:[function(t,n,r){\"use strict\";t(131)(\"bold\",function(t){return function bold(){return t(this,\"b\",\"\",\"\")}})},{131:131}],260:[function(t,n,r){\"use strict\";var e=t(62),i=t(129)(!1);e(e.P,\"String\",{codePointAt:function codePointAt(t){return i(this,t)}})},{129:129,62:62}],261:[function(t,n,r){\"use strict\";var e=t(62),u=t(141),c=t(130),a=\"endsWith\",f=\"\"[a];e(e.P+e.F*t(63)(a),\"String\",{endsWith:function endsWith(t){var n=c(this,t,a),r=1<arguments.length?arguments[1]:void 0,e=u(n.length),i=void 0===r?e:Math.min(u(r),e),o=String(t);return f?f.call(n,o,i):n.slice(i-o.length,i)===o}})},{130:130,141:141,62:62,63:63}],262:[function(t,n,r){\"use strict\";t(131)(\"fixed\",function(t){return function fixed(){return t(this,\"tt\",\"\",\"\")}})},{131:131}],263:[function(t,n,r){\"use strict\";t(131)(\"fontcolor\",function(n){return function fontcolor(t){return n(this,\"font\",\"color\",t)}})},{131:131}],264:[function(t,n,r){\"use strict\";t(131)(\"fontsize\",function(n){return function fontsize(t){return n(this,\"font\",\"size\",t)}})},{131:131}],265:[function(t,n,r){var e=t(62),o=t(137),u=String.fromCharCode,i=String.fromCodePoint;e(e.S+e.F*(!!i&&1!=i.length),\"String\",{fromCodePoint:function fromCodePoint(t){for(var n,r=[],e=arguments.length,i=0;i<e;){if(n=+arguments[i++],o(n,1114111)!==n)throw RangeError(n+\" is not a valid code point\");r.push(n<65536?u(n):u(55296+((n-=65536)>>10),n%1024+56320))}return r.join(\"\")}})},{137:137,62:62}],266:[function(t,n,r){\"use strict\";var e=t(62),i=t(130),o=\"includes\";e(e.P+e.F*t(63)(o),\"String\",{includes:function includes(t){return!!~i(this,t,o).indexOf(t,1<arguments.length?arguments[1]:void 0)}})},{130:130,62:62,63:63}],267:[function(t,n,r){\"use strict\";t(131)(\"italics\",function(t){return function italics(){return t(this,\"i\",\"\",\"\")}})},{131:131}],268:[function(t,n,r){\"use strict\";var e=t(129)(!0);t(85)(String,\"String\",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},{129:129,85:85}],269:[function(t,n,r){\"use strict\";t(131)(\"link\",function(n){return function link(t){return n(this,\"a\",\"href\",t)}})},{131:131}],270:[function(t,n,r){var e=t(62),u=t(140),c=t(141);e(e.S,\"String\",{raw:function raw(t){for(var n=u(t.raw),r=c(n.length),e=arguments.length,i=[],o=0;o<r;)i.push(String(n[o++])),o<e&&i.push(String(arguments[o]));return i.join(\"\")}})},{140:140,141:141,62:62}],271:[function(t,n,r){var e=t(62);e(e.P,\"String\",{repeat:t(133)})},{133:133,62:62}],272:[function(t,n,r){\"use strict\";t(131)(\"small\",function(t){return function small(){return t(this,\"small\",\"\",\"\")}})},{131:131}],273:[function(t,n,r){\"use strict\";var e=t(62),i=t(141),o=t(130),u=\"startsWith\",c=\"\"[u];e(e.P+e.F*t(63)(u),\"String\",{startsWith:function startsWith(t){var n=o(this,t,u),r=i(Math.min(1<arguments.length?arguments[1]:void 0,n.length)),e=String(t);return c?c.call(n,e,r):n.slice(r,r+e.length)===e}})},{130:130,141:141,62:62,63:63}],274:[function(t,n,r){\"use strict\";t(131)(\"strike\",function(t){return function strike(){return t(this,\"strike\",\"\",\"\")}})},{131:131}],275:[function(t,n,r){\"use strict\";t(131)(\"sub\",function(t){return function sub(){return t(this,\"sub\",\"\",\"\")}})},{131:131}],276:[function(t,n,r){\"use strict\";t(131)(\"sup\",function(t){return function sup(){return t(this,\"sup\",\"\",\"\")}})},{131:131}],277:[function(t,n,r){\"use strict\";t(134)(\"trim\",function(t){return function trim(){return t(this,3)}})},{134:134}],278:[function(t,n,r){\"use strict\";var e=t(70),u=t(71),i=t(58),o=t(62),c=t(118),a=t(94).KEY,f=t(64),s=t(126),l=t(124),h=t(147),p=t(152),v=t(151),y=t(150),g=t(61),d=t(79),x=t(38),m=t(81),b=t(140),S=t(143),w=t(116),_=t(98),E=t(102),F=t(101),I=t(99),O=t(107),P=F.f,A=I.f,M=E.f,k=e.Symbol,N=e.JSON,j=N&&N.stringify,T=\"prototype\",R=p(\"_hidden\"),L=p(\"toPrimitive\"),C={}.propertyIsEnumerable,G=s(\"symbol-registry\"),D=s(\"symbols\"),U=s(\"op-symbols\"),W=Object[T],V=\"function\"==typeof k,B=e.QObject,z=!B||!B[T]||!B[T].findChild,q=i&&f(function(){return 7!=_(A({},\"a\",{get:function(){return A(this,\"a\",{value:7}).a}})).a})?function(t,n,r){var e=P(W,n);e&&delete W[n],A(t,n,r),e&&t!==W&&A(W,n,e)}:A,Y=function(t){var n=D[t]=_(k[T]);return n._k=t,n},K=V&&\"symbol\"==typeof k.iterator?function(t){return\"symbol\"==typeof t}:function(t){return t instanceof k},$=function defineProperty(t,n,r){return t===W&&$(U,n,r),x(t),n=S(n,!0),x(r),u(D,n)?(r.enumerable?(u(t,R)&&t[R][n]&&(t[R][n]=!1),r=_(r,{enumerable:w(0,!1)})):(u(t,R)||A(t,R,w(1,{})),t[R][n]=!0),q(t,n,r)):A(t,n,r)},J=function defineProperties(t,n){x(t);for(var r,e=g(n=b(n)),i=0,o=e.length;i<o;)$(t,r=e[i++],n[r]);return t},X=function propertyIsEnumerable(t){var n=C.call(this,t=S(t,!0));return!(this===W&&u(D,t)&&!u(U,t))&&(!(n||!u(this,t)||!u(D,t)||u(this,R)&&this[R][t])||n)},H=function getOwnPropertyDescriptor(t,n){if(t=b(t),n=S(n,!0),t!==W||!u(D,n)||u(U,n)){var r=P(t,n);return!r||!u(D,n)||u(t,R)&&t[R][n]||(r.enumerable=!0),r}},Z=function getOwnPropertyNames(t){for(var n,r=M(b(t)),e=[],i=0;r.length>i;)u(D,n=r[i++])||n==R||n==a||e.push(n);return e},Q=function getOwnPropertySymbols(t){for(var n,r=t===W,e=M(r?U:b(t)),i=[],o=0;e.length>o;)!u(D,n=e[o++])||r&&!u(W,n)||i.push(D[n]);return i};V||(c((k=function Symbol(){if(this instanceof k)throw TypeError(\"Symbol is not a constructor!\");var n=h(0<arguments.length?arguments[0]:void 0),r=function(t){this===W&&r.call(U,t),u(this,R)&&u(this[R],n)&&(this[R][n]=!1),q(this,n,w(1,t))};return i&&z&&q(W,n,{configurable:!0,set:r}),Y(n)})[T],\"toString\",function toString(){return this._k}),F.f=H,I.f=$,t(103).f=E.f=Z,t(108).f=X,t(104).f=Q,i&&!t(89)&&c(W,\"propertyIsEnumerable\",X,!0),v.f=function(t){return Y(p(t))}),o(o.G+o.W+o.F*!V,{Symbol:k});for(var tt=\"hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables\".split(\",\"),nt=0;tt.length>nt;)p(tt[nt++]);for(var rt=O(p.store),et=0;rt.length>et;)y(rt[et++]);o(o.S+o.F*!V,\"Symbol\",{for:function(t){return u(G,t+=\"\")?G[t]:G[t]=k(t)},keyFor:function keyFor(t){if(!K(t))throw TypeError(t+\" is not a symbol!\");for(var n in G)if(G[n]===t)return n},useSetter:function(){z=!0},useSimple:function(){z=!1}}),o(o.S+o.F*!V,\"Object\",{create:function create(t,n){return void 0===n?_(t):J(_(t),n)},defineProperty:$,defineProperties:J,getOwnPropertyDescriptor:H,getOwnPropertyNames:Z,getOwnPropertySymbols:Q}),N&&o(o.S+o.F*(!V||f(function(){var t=k();return\"[null]\"!=j([t])||\"{}\"!=j({a:t})||\"{}\"!=j(Object(t))})),\"JSON\",{stringify:function stringify(t){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);if(r=n=e[1],(m(n)||void 0!==t)&&!K(t))return d(n)||(n=function(t,n){if(\"function\"==typeof r&&(n=r.call(this,t,n)),!K(n))return n}),e[1]=n,j.apply(N,e)}}),k[T][L]||t(72)(k[T],L,k[T].valueOf),l(k,\"Symbol\"),l(Math,\"Math\",!0),l(e.JSON,\"JSON\",!0)},{101:101,102:102,103:103,104:104,107:107,108:108,116:116,118:118,124:124,126:126,140:140,143:143,147:147,150:150,151:151,152:152,38:38,58:58,61:61,62:62,64:64,70:70,71:71,72:72,79:79,81:81,89:89,94:94,98:98,99:99}],279:[function(t,n,r){\"use strict\";var e=t(62),i=t(146),o=t(145),f=t(38),s=t(137),l=t(141),u=t(81),c=t(70).ArrayBuffer,h=t(127),p=o.ArrayBuffer,v=o.DataView,a=i.ABV&&c.isView,y=p.prototype.slice,g=i.VIEW,d=\"ArrayBuffer\";e(e.G+e.W+e.F*(c!==p),{ArrayBuffer:p}),e(e.S+e.F*!i.CONSTR,d,{isView:function isView(t){return a&&a(t)||u(t)&&g in t}}),e(e.P+e.U+e.F*t(64)(function(){return!new p(2).slice(1,void 0).byteLength}),d,{slice:function slice(t,n){if(void 0!==y&&void 0===n)return y.call(f(this),t);for(var r=f(this).byteLength,e=s(t,r),i=s(void 0===n?r:n,r),o=new(h(this,p))(l(i-e)),u=new v(this),c=new v(o),a=0;e<i;)c.setUint8(a++,u.getUint8(e++));return o}}),t(123)(d)},{123:123,127:127,137:137,141:141,145:145,146:146,38:38,62:62,64:64,70:70,81:81}],280:[function(t,n,r){var e=t(62);e(e.G+e.W+e.F*!t(146).ABV,{DataView:t(145).DataView})},{145:145,146:146,62:62}],281:[function(t,n,r){t(144)(\"Float32\",4,function(e){return function Float32Array(t,n,r){return e(this,t,n,r)}})},{144:144}],282:[function(t,n,r){t(144)(\"Float64\",8,function(e){return function Float64Array(t,n,r){return e(this,t,n,r)}})},{144:144}],283:[function(t,n,r){t(144)(\"Int16\",2,function(e){return function Int16Array(t,n,r){return e(this,t,n,r)}})},{144:144}],284:[function(t,n,r){t(144)(\"Int32\",4,function(e){return function Int32Array(t,n,r){return e(this,t,n,r)}})},{144:144}],285:[function(t,n,r){t(144)(\"Int8\",1,function(e){return function Int8Array(t,n,r){return e(this,t,n,r)}})},{144:144}],286:[function(t,n,r){t(144)(\"Uint16\",2,function(e){return function Uint16Array(t,n,r){return e(this,t,n,r)}})},{144:144}],287:[function(t,n,r){t(144)(\"Uint32\",4,function(e){return function Uint32Array(t,n,r){return e(this,t,n,r)}})},{144:144}],288:[function(t,n,r){t(144)(\"Uint8\",1,function(e){return function Uint8Array(t,n,r){return e(this,t,n,r)}})},{144:144}],289:[function(t,n,r){t(144)(\"Uint8\",1,function(e){return function Uint8ClampedArray(t,n,r){return e(this,t,n,r)}},!0)},{144:144}],290:[function(t,n,r){\"use strict\";var o,e=t(70),i=t(42)(0),u=t(118),c=t(94),a=t(97),f=t(50),s=t(81),l=t(149),h=t(149),p=!e.ActiveXObject&&\"ActiveXObject\"in e,v=\"WeakMap\",y=c.getWeak,g=Object.isExtensible,d=f.ufstore,x=function(t){return function WeakMap(){return t(this,0<arguments.length?arguments[0]:void 0)}},m={get:function get(t){if(s(t)){var n=y(t);return!0===n?d(l(this,v)).get(t):n?n[this._i]:void 0}},set:function set(t,n){return f.def(l(this,v),t,n)}},b=n.exports=t(51)(v,x,m,f,!0,!0);h&&p&&(a((o=f.getConstructor(x,v)).prototype,m),c.NEED=!0,i([\"delete\",\"has\",\"get\",\"set\"],function(e){var t=b.prototype,i=t[e];u(t,e,function(t,n){if(!s(t)||g(t))return i.call(this,t,n);this._f||(this._f=new o);var r=this._f[e](t,n);return\"set\"==e?this:r})}))},{118:118,149:149,42:42,50:50,51:51,70:70,81:81,94:94,97:97}],291:[function(t,n,r){\"use strict\";var e=t(50),i=t(149),o=\"WeakSet\";t(51)(o,function(t){return function WeakSet(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function add(t){return e.def(i(this,o),t,!0)}},e,!1,!0)},{149:149,50:50,51:51}],292:[function(t,n,r){\"use strict\";var e=t(62),i=t(67),o=t(142),u=t(141),c=t(33),a=t(45);e(e.P,\"Array\",{flatMap:function flatMap(t){var n,r,e=o(this);return c(t),n=u(e.length),r=a(e,0),i(r,e,e,n,0,1,t,arguments[1]),r}}),t(35)(\"flatMap\")},{141:141,142:142,33:33,35:35,45:45,62:62,67:67}],293:[function(t,n,r){\"use strict\";var e=t(62),i=t(41)(!0);e(e.P,\"Array\",{includes:function includes(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),t(35)(\"includes\")},{35:35,41:41,62:62}],294:[function(t,n,r){var e=t(62),i=t(110)(!0);e(e.S,\"Object\",{entries:function entries(t){return i(t)}})},{110:110,62:62}],295:[function(t,n,r){var e=t(62),a=t(111),f=t(140),s=t(101),l=t(53);e(e.S,\"Object\",{getOwnPropertyDescriptors:function getOwnPropertyDescriptors(t){for(var n,r,e=f(t),i=s.f,o=a(e),u={},c=0;o.length>c;)void 0!==(r=i(e,n=o[c++]))&&l(u,n,r);return u}})},{101:101,111:111,140:140,53:53,62:62}],296:[function(t,n,r){var e=t(62),i=t(110)(!1);e(e.S,\"Object\",{values:function values(t){return i(t)}})},{110:110,62:62}],297:[function(t,n,r){\"use strict\";var e=t(62),i=t(52),o=t(70),u=t(127),c=t(115);e(e.P+e.R,\"Promise\",{finally:function(n){var r=u(this,i.Promise||o.Promise),t=\"function\"==typeof n;return this.then(t?function(t){return c(r,n()).then(function(){return t})}:n,t?function(t){return c(r,n()).then(function(){throw t})}:n)}})},{115:115,127:127,52:52,62:62,70:70}],298:[function(t,n,r){\"use strict\";var e=t(62),i=t(132),o=t(148),u=/Version\\/10\\.\\d+(\\.\\d+)?( Mobile\\/\\w+)? Safari\\//.test(o);e(e.P+e.F*u,\"String\",{padEnd:function padEnd(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!1)}})},{132:132,148:148,62:62}],299:[function(t,n,r){\"use strict\";var e=t(62),i=t(132),o=t(148),u=/Version\\/10\\.\\d+(\\.\\d+)?( Mobile\\/\\w+)? Safari\\//.test(o);e(e.P+e.F*u,\"String\",{padStart:function padStart(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!0)}})},{132:132,148:148,62:62}],300:[function(t,n,r){\"use strict\";t(134)(\"trimLeft\",function(t){return function trimLeft(){return t(this,1)}},\"trimStart\")},{134:134}],301:[function(t,n,r){\"use strict\";t(134)(\"trimRight\",function(t){return function trimRight(){return t(this,2)}},\"trimEnd\")},{134:134}],302:[function(t,n,r){t(150)(\"asyncIterator\")},{150:150}],303:[function(t,n,r){for(var e=t(164),i=t(107),o=t(118),u=t(70),c=t(72),a=t(88),f=t(152),s=f(\"iterator\"),l=f(\"toStringTag\"),h=a.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},v=i(p),y=0;y<v.length;y++){var g,d=v[y],x=p[d],m=u[d],b=m&&m.prototype;if(b&&(b[s]||c(b,s,h),b[l]||c(b,l,d),a[d]=h,x))for(g in e)b[g]||o(b,g,e[g],!0)}},{107:107,118:118,152:152,164:164,70:70,72:72,88:88}],304:[function(t,n,r){var e=t(62),i=t(136);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},{136:136,62:62}],305:[function(t,n,r){var e=t(70),i=t(62),o=t(148),u=[].slice,c=/MSIE .\\./.test(o),a=function(i){return function(t,n){var r=2<arguments.length,e=!!r&&u.call(arguments,2);return i(r?function(){(\"function\"==typeof t?t:Function(t)).apply(this,e)}:t,n)}};i(i.G+i.B+i.F*c,{setTimeout:a(e.setTimeout),setInterval:a(e.setInterval)})},{148:148,62:62,70:70}],306:[function(t,n,r){t(305),t(304),t(303),n.exports=t(52)},{303:303,304:304,305:305,52:52}],307:[function(t,n,r){var e=function(o){\"use strict\";var c,t=Object.prototype,a=t.hasOwnProperty,n=\"function\"==typeof Symbol?Symbol:{},i=n.iterator||\"@@iterator\",r=n.asyncIterator||\"@@asyncIterator\",e=n.toStringTag||\"@@toStringTag\";function wrap(t,n,r,e){var i=n&&n.prototype instanceof Generator?n:Generator,o=Object.create(i.prototype),u=new Context(e||[]);return o._invoke=function makeInvokeMethod(o,u,c){var a=f;return function invoke(t,n){if(a===l)throw new Error(\"Generator is already running\");if(a===h){if(\"throw\"===t)throw n;return doneResult()}for(c.method=t,c.arg=n;;){var r=c.delegate;if(r){var e=maybeInvokeDelegate(r,c);if(e){if(e===p)continue;return e}}if(\"next\"===c.method)c.sent=c._sent=c.arg;else if(\"throw\"===c.method){if(a===f)throw a=h,c.arg;c.dispatchException(c.arg)}else\"return\"===c.method&&c.abrupt(\"return\",c.arg);a=l;var i=tryCatch(o,u,c);if(\"normal\"===i.type){if(a=c.done?h:s,i.arg===p)continue;return{value:i.arg,done:c.done}}\"throw\"===i.type&&(a=h,c.method=\"throw\",c.arg=i.arg)}}}(t,r,u),o}function tryCatch(t,n,r){try{return{type:\"normal\",arg:t.call(n,r)}}catch(t){return{type:\"throw\",arg:t}}}o.wrap=wrap;var f=\"suspendedStart\",s=\"suspendedYield\",l=\"executing\",h=\"completed\",p={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var u={};u[i]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(values([])));y&&y!==t&&a.call(y,i)&&(u=y);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(u);function defineIteratorMethods(t){[\"next\",\"throw\",\"return\"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function AsyncIterator(c){var t;this._invoke=function enqueue(r,e){function callInvokeWithMethodAndArg(){return new Promise(function(t,n){!function invoke(t,n,r,e){var i=tryCatch(c[t],c,n);if(\"throw\"!==i.type){var o=i.arg,u=o.value;return u&&\"object\"==typeof u&&a.call(u,\"__await\")?Promise.resolve(u.__await).then(function(t){invoke(\"next\",t,r,e)},function(t){invoke(\"throw\",t,r,e)}):Promise.resolve(u).then(function(t){o.value=t,r(o)},function(t){return invoke(\"throw\",t,r,e)})}e(i.arg)}(r,e,t,n)})}return t=t?t.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,n){var r=t.iterator[n.method];if(r===c){if(n.delegate=null,\"throw\"===n.method){if(t.iterator.return&&(n.method=\"return\",n.arg=c,maybeInvokeDelegate(t,n),\"throw\"===n.method))return p;n.method=\"throw\",n.arg=new TypeError(\"The iterator does not provide a 'throw' method\")}return p}var e=tryCatch(r,t.iterator,n.arg);if(\"throw\"===e.type)return n.method=\"throw\",n.arg=e.arg,n.delegate=null,p;var i=e.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,\"return\"!==n.method&&(n.method=\"next\",n.arg=c),n.delegate=null,p):i:(n.method=\"throw\",n.arg=new TypeError(\"iterator result is not an object\"),n.delegate=null,p)}function pushTryEntry(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function resetTryEntry(t){var n=t.completion||{};n.type=\"normal\",delete n.arg,t.completion=n}function Context(t){this.tryEntries=[{tryLoc:\"root\"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var n=t[i];if(n)return n.call(t);if(\"function\"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,e=function next(){for(;++r<t.length;)if(a.call(t,r))return next.value=t[r],next.done=!1,next;return next.value=c,next.done=!0,next};return e.next=e}}return{next:doneResult}}function doneResult(){return{value:c,done:!0}}return GeneratorFunction.prototype=g.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[e]=GeneratorFunction.displayName=\"GeneratorFunction\",o.isGeneratorFunction=function(t){var n=\"function\"==typeof t&&t.constructor;return!!n&&(n===GeneratorFunction||\"GeneratorFunction\"===(n.displayName||n.name))},o.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,e in t||(t[e]=\"GeneratorFunction\")),t.prototype=Object.create(g),t},o.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[r]=function(){return this},o.AsyncIterator=AsyncIterator,o.async=function(t,n,r,e){var i=new AsyncIterator(wrap(t,n,r,e));return o.isGeneratorFunction(n)?i:i.next().then(function(t){return t.done?t.value:i.next()})},defineIteratorMethods(g),g[e]=\"Generator\",g[i]=function(){return this},g.toString=function(){return\"[object Generator]\"},o.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in n)return next.value=t,next.done=!1,next}return next.done=!0,next}},o.values=values,Context.prototype={constructor:Context,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=c,this.tryEntries.forEach(resetTryEntry),!t)for(var n in this)\"t\"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(\"throw\"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function handle(t,n){return i.type=\"throw\",i.arg=r,e.next=t,n&&(e.method=\"next\",e.arg=c),!!n}for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t],i=n.completion;if(\"root\"===n.tryLoc)return handle(\"end\");if(n.tryLoc<=this.prev){var o=a.call(n,\"catchLoc\"),u=a.call(n,\"finallyLoc\");if(o&&u){if(this.prev<n.catchLoc)return handle(n.catchLoc,!0);if(this.prev<n.finallyLoc)return handle(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return handle(n.catchLoc,!0)}else{if(!u)throw new Error(\"try statement without catch or finally\");if(this.prev<n.finallyLoc)return handle(n.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;0<=r;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&a.call(e,\"finallyLoc\")&&this.prev<e.finallyLoc){var i=e;break}}i&&(\"break\"===t||\"continue\"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method=\"next\",this.next=i.finallyLoc,p):this.complete(o)},complete:function(t,n){if(\"throw\"===t.type)throw t.arg;return\"break\"===t.type||\"continue\"===t.type?this.next=t.arg:\"return\"===t.type?(this.rval=this.arg=t.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===t.type&&n&&(this.next=n),p},finish:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),p}},catch:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if(\"throw\"===e.type){var i=e.arg;resetTryEntry(r)}return i}}throw new Error(\"illegal catch attempt\")},delegateYield:function(t,n,r){return this.delegate={iterator:values(t),resultName:n,nextLoc:r},\"next\"===this.method&&(this.arg=c),p}},o}(\"object\"==typeof n?n.exports:{});try{regeneratorRuntime=e}catch(t){Function(\"r\",\"regeneratorRuntime = r\")(e)}},{}]},{},[1]);\n","Amasty_Xsearch/js/search/term/assign-related.js":"/* global $, $H */\n\ndefine([\n    'mage/adminhtml/grid'\n], function () {\n    'use strict';\n\n    return function (config) {\n        var selectedTerms = config.selectedTerms,\n            terms = $H(selectedTerms),\n            gridJsObject = window[config.gridJsObjectName],\n            tabIndex = 1000;\n\n        $('related_terms').value = Object.toJSON(terms);\n\n\n        function registerTerms(grid, element, checked) {\n            if (checked) {\n                if (element.positionElement) {\n                    element.positionElement.disabled = false;\n                    terms.set(element.value, element.positionElement.value);\n                }\n            } else {\n                if (element.positionElement) {\n                    element.positionElement.disabled = true;\n                }\n                terms.unset(element.value);\n            }\n            $('related_terms').value = Object.toJSON(terms);\n            grid.reloadParams = {\n                'related[]': terms.keys()\n            };\n        }\n\n        function termRowClick(grid, event) {\n            var trElement = Event.findElement(event, 'tr'),\n                isInput = Event.element(event).tagName === 'INPUT',\n                checked = false,\n                checkbox = null;\n\n            if (trElement) {\n                checkbox = Element.getElementsBySelector(trElement, 'input');\n\n                if (checkbox[0]) {\n                    checked = isInput ? checkbox[0].checked : !checkbox[0].checked;\n                    gridJsObject.setCheckboxChecked(checkbox[0], checked);\n                }\n            }\n        }\n\n        function positionChange(event) {\n            var element = Event.element(event);\n\n            if (element && element.checkboxElement && element.checkboxElement.checked) {\n                terms.set(element.checkboxElement.value, element.value);\n                $('related_terms').value = Object.toJSON(terms);\n            }\n        }\n\n        function termRowInit(grid, row) {\n            var checkbox = $(row).getElementsByClassName('checkbox')[0],\n                position = $(row).getElementsByClassName('input-text')[0];\n\n            if (checkbox && position) {\n                checkbox.positionElement = position;\n                position.checkboxElement = checkbox;\n                position.disabled = !checkbox.checked;\n                position.tabIndex = tabIndex++;\n                Event.observe(position, 'keyup', positionChange);\n            }\n        }\n\n        gridJsObject.rowClickCallback = termRowClick;\n        gridJsObject.initRowCallback = termRowInit;\n        gridJsObject.checkboxCheckCallback = registerTerms;\n\n        if (gridJsObject.rows) {\n            gridJsObject.rows.each(function (row) {\n                termRowInit(gridJsObject, row);\n            });\n        }\n    };\n});\n","Amasty_Xsearch/js/components/search-analytics.js":"define([\n    'jquery',\n    'amSearchCharts'\n], function ($, amSearchCharts) {\n    'use strict';\n\n    $.widget('mage.amSearchAnalytics', {\n        options: {\n            colors: [\n                '#ffa942',\n                '#5b81cc',\n                '#2dca9b',\n                '#79c5ca'\n            ],\n            dataMap: [\n                'popularity',\n                'product_click',\n                'unique_query',\n                'unique_user'\n            ]\n        },\n\n        /**\n         * @inheritdocs\n         */\n        _create: function () {\n            this.chart = am4core.create(this.element[0], amSearchCharts.XYChart);\n            this.chart.scrollbarX = new am4core.Scrollbar();\n            this.chart.data = this.options.data;\n            this.chart.cursor = new am4charts.XYCursor();\n            this.chart.title = false;\n\n            this._initCategory();\n            this._initAxis();\n            this._initStyles();\n\n            this.options.dataMap.forEach(function (key) {\n                this._addSeries(key);\n            }.bind(this));\n        },\n\n        /**\n         * Init Axis Category\n         *\n         * @primary\n         * @return {void}\n         */\n        _initCategory: function () {\n            var categoryAxis = this.chart.xAxes.push(new am4charts.CategoryAxis());\n\n            categoryAxis.dataFields.category = 'created_at';\n            categoryAxis.renderer.grid.template.location = 0;\n            categoryAxis.renderer.minGridDistance = 30;\n            categoryAxis.renderer.labels.template.horizontalCenter = 'right';\n            categoryAxis.renderer.labels.template.verticalCenter = 'middle';\n            categoryAxis.renderer.labels.template.rotation = this.options.data.length > 10 ? -45 : 0;\n            categoryAxis.renderer.minHeight = 110;\n        },\n\n        /**\n         * Init Axis\n         *\n         * @primary\n         * @return {void}\n         */\n        _initAxis: function () {\n            var valueAxis = this.chart.yAxes.push(new am4charts.ValueAxis());\n\n            valueAxis.renderer.minWidth = 50;\n        },\n\n        /**\n         * Init Series by current name\n         *\n         * @primary\n         * @param {String} name\n         * @return {void}\n         */\n        _addSeries: function (name) {\n            var series = this.chart.series.push(new am4charts.ColumnSeries()),\n                title = name.replace(/_|-|\\./g, ' ');\n\n            title = title.charAt(0).toUpperCase() + title.slice(1);\n\n            series.dataFields.valueY = name;\n\n            series.cursorTooltipEnabled = false;\n            series.dataFields.categoryX = 'created_at';\n            series.columns.template.tooltipText = '[bold]' + title + ': {valueY}[/]';\n            series.columns.template.strokeWidth = 0;\n        },\n\n        /**\n         * Init Styles\n         *\n         * @primary\n         * @return {void}\n         */\n        _initStyles: function () {\n            var self = this;\n\n            self.options.colors.forEach(function (color) {\n                self.chart.colors.list.push(am4core.color(color));\n            });\n\n            self.chart.fontSize = 14;\n            self.chart.startDuration = 0.5;\n\n            am4core.useTheme(am4themes_animated);\n        }\n    });\n\n    return $.mage.amSearchAnalytics;\n});\n","Amasty_Label/js/label.js":"define([\n    'jquery',\n    'underscore',\n    'Magento_Ui/js/modal/modal'\n], function ($, _) {\n    'use strict';\n\n    $.widget('mage.amShowLabel', {\n        options: {},\n        textElement: null,\n        image: null,\n        imageWidth: null,\n        imageHeight: null,\n        parent: null,\n        imageLabel: ['.amasty-label-container', '.amasty-label-image', '.amlabel-text'],\n        fotoramaStage: '[data-fotorama-stage=\"fotorama__stage\"]',\n        galleryPlaceholder: '[data-gallery-role=\"gallery-placeholder\"]',\n        positionWrapper: 'amlabel-position-wrapper',\n        mainContainer: '[data-gallery-role=\"amasty-main-container\"]',\n        slickSlider: {\n            selectors: {\n                slider: '.slick-slider',\n                slide: '.slick-slide'\n            },\n            classes: {\n                cloned: 'slick-cloned',\n                initialized: 'slick-initialized'\n            }\n        },\n\n        /**\n         * @inheritDoc\n         * @private\n         */\n        _create: function () {\n            var items,\n                priceContainer,\n                newParent,\n                me;\n\n            this.parentResizeListener = new ResizeObserver(function () {\n                this.setLabelStyle();\n                this._refreshSLickSlider();\n            }.bind(this));\n\n            this.element = $(this.element);\n\n            if (this.element.attr('amlabel-js-observed')) {\n                return;\n            }\n\n            this.element.attr('amlabel-js-observed', 1);\n\n            /* code for moving product label */\n            if (this.options.move === 1) {\n                items = this.element.closest('.page-wrapper').find(this.getPriceSelector());\n\n                if (items.length) { // find any element with product 'id'\n                    items = this._filterItems(items);\n\n                    priceContainer = items.first();\n                    newParent = this.getNewParent(priceContainer);\n\n                    // eslint-disable-next-line max-depth\n                    if (newParent && newParent.length) {\n                        priceContainer.attr('label-observered-' + this.options.label, '1');\n                        newParent.append(this.element);\n                    } else {\n                        this.element.hide();\n\n                        return;\n                    }\n                } else {\n                    this.element.hide();\n\n                    return;\n                }\n            }\n\n            this.image = this.element.find('.amasty-label-image');\n            this.textElement = this.element.find('.amlabel-text');\n            this.parent = this.element.parent();\n\n            if (!this.image.length) {\n                this.setStyleIfNotExist(\n                    this.element,\n                    {\n                        'width': '100px',\n                        'height': '50px'\n                    }\n                );\n            }\n\n            if (!this.image.length && this.options.position.includes('center')) {\n                this.textElement.addClass('-am-centered');\n            }\n\n            /* move label to container from settings*/\n            if (this.options.path && this.options.path !== '') {\n                newParent = this.parent.find(this.options.path);\n\n                if (newParent.length) {\n                    this.parent = newParent;\n                    newParent.append(this.element);\n                }\n            }\n\n            /* required for child position absolute */\n            if (!(this.parent.css('position') === 'absolute' || this.parent.css('position') === 'relative')) {\n                this.parent.css('position', 'relative');\n            }\n\n            if (this.parent.prop('tagName') === 'A' && !this.parent.closest('.block.widget').hasClass('list')) {\n                this.parent.css('display', 'block');\n            }\n\n            /* fix issue with hover on product grid */\n            if (!this.element.closest('.sidebar').length) {\n                this.element.closest('.product-item-info').css('zIndex', '996');\n            }\n\n            /* get default image size */\n            if (!this.imageLoaded(this.image)) {\n                me = this;\n\n                this.image.on('load', function () {\n                    me.element.fadeIn();\n                    me.imageWidth = this.naturalWidth;\n                    me.imageHeight = this.naturalHeight;\n                    me.setLabelStyle();\n                });\n            } else {\n                this.element.fadeIn();\n\n                if (this.image[0]) {\n                    this.imageWidth = this.image[0].naturalWidth;\n                    this.imageHeight = this.image[0].naturalHeight;\n                }\n            }\n\n            this.setLabelPosition();\n            this.updateStyles();\n\n            /* observe zoom load event for moving label*/\n            this.productPageZoomEvent();\n            this.createResizeEvent();\n            this.createFotoramaEvent();\n            this.createRedirectEvent();\n            this._refreshSLickSlider();\n        },\n\n        /**\n         * @returns {void}\n         */\n        _refreshSLickSlider: function () {\n            var slider = this.element.closest(this.slickSlider.selectors.slider);\n\n            if (slider.length && slider.hasClass(this.slickSlider.classes.initialized)) {\n                slider.slick('refresh');\n            }\n        },\n\n        /**\n         * Skip labels from slick slider cloned nodes,\n         * Skip labels that already exist in the product container,\n         * Skip labels from bundle packs\n         *\n         * @param {Array} items\n         * @return {Array}\n         */\n        _filterItems: function (items) {\n            return items.filter(function (index, element) {\n                return !$(element).closest(this.slickSlider.selectors.slide).hasClass(this.slickSlider.classes.cloned)\n                    && !$(element).closest('.amrelated-pack-item').length\n                    && !$(element).closest('.product-item-info')\n                        .find('.amasty-label-container-' + this.options.label + '-' + this.options.product + '-cat')\n                        .length;\n            }.bind(this));\n        },\n\n        /**\n         * @return {void}\n         */\n        createRedirectEvent: function () {\n            this.element.on('click', function (e) {\n                this.openLink(e);\n            }.bind(this));\n        },\n\n        /**\n         * @param {event} event\n         * @return {void}\n         */\n        openLink: function (event) {\n            var redirectUrl = this.options['redirect_url'];\n\n            if (redirectUrl && !this.isEmpty(redirectUrl)) {\n                event.preventDefault();\n                window.open(redirectUrl, '_blank');\n            }\n        },\n\n        /**\n         * @return {void}\n         */\n        createResizeEvent: function () {\n            $(window).on('resize', _.debounce(function () {\n                this.reloadParentSize();\n            }.bind(this), 300));\n\n            $(window).on('orientationchange', function () {\n                this.reloadParentSize();\n            }.bind(this));\n        },\n\n        /**\n         * @return {void}\n         */\n        createFotoramaEvent: function () {\n            $(this.galleryPlaceholder).on('fotorama:load', this.updatePositionInFotorama.bind(this));\n        },\n\n        /**\n         * @return {void}\n         */\n        updatePositionInFotorama: function () {\n            var self = this,\n                newParent = this.parent.find(this.options.path),\n                elementToMove = null;\n\n            if (this\n                && this.options.path\n                && this.options.mode === 'prod'\n            ) {\n                if (newParent.length && newParent !== this.parent) {\n                    this.parent.css('position', '');\n                    this.parent = newParent;\n\n                    elementToMove = this.element.parent().hasClass(this.positionWrapper)\n                        ? this.element.parent()\n                        : this.element;\n                    newParent.append(elementToMove);\n                    newParent.css({ 'position': 'relative' });\n\n                    self.setLabelsEventOnFotorama();\n                }\n            }\n        },\n\n        setLabelsEventOnFotorama: function () {\n            var self = this,\n                fotoramaStage = $(this.fotoramaStage),\n                mousedownOnFotoramaStage = $._data(fotoramaStage[0], 'events').mousedown,\n                pointerdownOnFotoramaStage = $._data(fotoramaStage[0], 'events').pointerdown;\n\n            if (!fotoramaStage[0].eventsUpdated) {\n                fotoramaStage.on('mousedown pointerdown', function (e) {\n                    if (e.which === 1 && $(e.target).is(self.imageLabel.join(','))) {\n                        $(this).trigger('focusout');\n                        self.openLink(e);\n                        e.stopImmediatePropagation();\n                    }\n                });\n\n                // eslint-disable-next-line max-depth\n                if (fotoramaStage.length && mousedownOnFotoramaStage) {\n                    mousedownOnFotoramaStage.unshift(mousedownOnFotoramaStage.pop());\n                }\n\n                if (fotoramaStage.length && pointerdownOnFotoramaStage) {\n                    pointerdownOnFotoramaStage.unshift(pointerdownOnFotoramaStage.pop());\n                }\n\n                fotoramaStage[0].eventsUpdated = true;\n            }\n        },\n\n        /**\n         * @param {Object} img\n         * @return {boolean}\n         */\n        imageLoaded: function (img) {\n            return !(!img.complete\n                || typeof img.naturalWidth !== 'undefined' && img.naturalWidth === 0);\n        },\n\n        /**\n         * @return {void}\n         */\n        productPageZoomEvent: function () {\n            var amastyGallery = $(this.mainContainerSelector);\n\n            if (this.options.mode === 'prod') {\n                if (amastyGallery.length) {\n                    this.parent = amastyGallery;\n                    amastyGallery.append(this.element.parent());\n                    amastyGallery.css('position', 'relative');\n                }\n            }\n        },\n\n        /**\n         * @return {void}\n         */\n        updateStyles: function () {\n            this.setLabelStyle();\n            this.setLabelPosition();\n        },\n\n        /**\n         * @param {Object} element\n         * @param {Object} styles\n         * @return {void}\n         */\n        setStyleIfNotExist: function (element, styles) {\n            // eslint-disable-next-line guard-for-in, vars-on-top\n            for (var style in styles) {\n                // eslint-disable-next-line\n                var current = element.attr('style');\n\n                if (!current ||\n                    current.indexOf('; ' + style) === -1 && current.indexOf(';' + style) === -1\n                ) {\n                    // eslint-disable-next-line no-undef\n                    element.css(style, styles[style]);\n                }\n            }\n        },\n\n        /**\n         * @return {void}\n         */\n        setLabelStyle: function () {\n            var parentWidth,\n                tmpWidth,\n                tmpHeight,\n                lineCount,\n                redirectUrl = this.options['redirect_url'],\n                display = this.options.alignment === 1 ? 'inline-block' : 'block';\n\n            /* for text element */\n            this.setStyleIfNotExist(\n                this.textElement,\n                {\n                    'padding': '0 3px',\n                    'position': 'absolute',\n                    'box-sizing': 'border-box',\n                    'white-space': 'nowrap',\n                    'width': '100%'\n                }\n            );\n\n            if (this.image.length) {\n                /* for image */\n                this.image.css({ 'width': '100%' });\n\n                /* get block size depend settings */\n                if (this.options.size > 0) {\n                    parentWidth = Math.round(this.parent.css('width').replace(/[^\\d.]/g, ''));\n\n                    if (!parentWidth) {\n                        this.parentResizeListener.observe(this.parent[0]);\n\n                        return;\n                    }\n\n                    // eslint-disable-next-line max-depth\n                    if (parentWidth) {\n                        this.parentResizeListener.disconnect();\n                        // eslint-disable-next-line no-mixed-operators\n                        this.imageWidth = Math.round(parentWidth * this.options.size / 100);\n                    }\n                } else {\n                    this.imageWidth += 'px';\n                }\n\n                this.setStyleIfNotExist(this.element, { 'width': this.imageWidth });\n                this.imageHeight = this.image.height();\n\n                /* if container doesn't load(height = 0 ) set proportional height */\n                if (!this.imageHeight && this.image[0] && this.image[0].naturalWidth !== 0) {\n                    tmpWidth = this.image[0].naturalWidth;\n                    tmpHeight = this.image[0].naturalHeight;\n\n                    this.imageHeight = Math.round(this.imageWidth * (tmpHeight / tmpWidth));\n                }\n\n                lineCount = this.textElement.html().split('<br>').length;\n                lineCount = lineCount >= 1 ? lineCount : 1;\n                this.textElement.css('lineHeight', Math.round(this.imageHeight / lineCount) + 'px');\n\n                /* for whole block */\n                if (this.imageHeight) {\n                    this.setStyleIfNotExist(this.element, {\n                        'height': this.imageHeight + 'px'\n                    });\n                }\n\n                this._fitLabelText();\n            }\n\n            this.image\n                .attr('width', this.image.width() + 'px')\n                .attr('height', this.image.height() + 'px');\n\n            this.element.parent().css({\n                'line-height': 'normal',\n                'position': 'absolute'\n            });\n\n            // dont reload display for configurable child label. visibility child label processed in reload.js\n            if (!this.element.hasClass('amlabel-swatch')) {\n                this.setStyleIfNotExist(\n                    this.element,\n                    {\n                        'position': 'relative',\n                        'display': display\n                    }\n                );\n            }\n\n            if (redirectUrl && !this.isEmpty(redirectUrl)) {\n                this.element.addClass('-link');\n            }\n\n            this.reloadParentSize();\n        },\n\n        /**\n         * @return {void}\n         */\n        _fitLabelText: function () {\n            if (this.options.size) {\n                var flag = 1;\n\n                this.textElement.css({ 'width': 'auto' });\n                this.textElement.parent().css('display', 'block');\n\n                while (this.textElement.width() > 0.9 * this.textElement.parent().width() && flag++ < 15) {\n                    this.textElement.css({ 'fontSize': 100 - flag * 5 + '%' });\n                }\n\n                this.textElement.parent().css('display', 'none');\n                this.textElement.css({ 'width': '100%' });\n            }\n        },\n\n        /**\n         * @param {*} html\n         * @return {Boolean}\n         */\n        isEmpty: function (html) {\n            return html === null || html.match(/^ *$/) !== null;\n        },\n\n        setPosition: function (position) {\n            this.options.position = position;\n            this.setLabelPosition();\n            this.reloadParentSize();\n        },\n\n        /**\n         * @return {void}\n         */\n        setStyle: function () {\n            this.setLabelStyle();\n        },\n\n        /**\n         * @return {void}\n         */\n        reloadParentSize: function () {\n            var parent = this.element.parent(),\n                height = null,\n                width = 5;\n\n            parent.css({\n                'position': 'relative',\n                'display': 'inline-block',\n                'width': 'auto',\n                'height': 'auto'\n            });\n\n            height = parent.height();\n\n            if (this.options.alignment === 1) {\n                parent.children().each(function (index, element) {\n                    width += $(element).width() + parseInt($(element).css('margin-left'), 10)\n                        + parseInt($(element).css('margin-right'), 10);\n                });\n            } else {\n                width = parent.width();\n            }\n\n            parent.css({\n                'position': 'absolute',\n                'display': 'block',\n                'height': height ? height + 'px' : '',\n                'width': width ? width + 'px' : ''\n            });\n        },\n\n        /**\n         * @return {string}\n         */\n        getWidgetLabelCode: function () {\n            var label = '';\n\n            if (this.element.parents('.widget-product-grid, .widget').length) {\n                label = 'widget';\n            }\n\n            return label;\n        },\n\n        /**\n         * @return {*|void}\n         */\n        setLabelPosition: function () {\n            var parent,\n                labelOrderMatch,\n                className = 'amlabel-position-' + this.options.position\n                    + '-' + this.options.product + '-' + this.options.mode + this.getWidgetLabelCode(),\n                wrapper = this.parent.find('.' + className);\n\n            if (wrapper.length) {\n                labelOrderMatch = false;\n\n                $.each(wrapper.find('.amasty-label-container'), function (index, prevLabel) {\n                    var nextLabel = $(prevLabel).next(),\n                        currentOrder = parseInt(this.options.order, 10),\n                        prevOrder = null,\n                        nextOrder = null;\n\n                    if ($(prevLabel).length && $(prevLabel).data('mageAmShowLabel')) {\n                        prevOrder = parseInt($(prevLabel).data('mageAmShowLabel').options.order, 10);\n                    }\n\n                    if (nextLabel.length && $(nextLabel).data('mageAmShowLabel')) {\n                        nextOrder = parseInt(nextLabel.data('mageAmShowLabel').options.order, 10);\n                    }\n\n                    if (currentOrder >= prevOrder && (!nextOrder || currentOrder <= nextOrder)) {\n                        labelOrderMatch = true;\n\n                        $(prevLabel).after(this.element);\n\n                        return false;\n                    }\n                }.bind(this));\n\n                if (!labelOrderMatch) {\n                    wrapper.prepend(this.element);\n                }\n            } else {\n                parent = this.element.parent();\n                if (parent.hasClass(this.positionWrapper)) {\n                    parent.parent().html(this.element);\n                }\n\n                this.element.wrap('<div class=\"' + className + ' ' + this.positionWrapper + '\"></div>');\n                wrapper = this.element.parent();\n            }\n\n            if (this.options.alignment === 1) {\n                wrapper.children(':not(:first-child)').each(function (index, element) {\n                    this.setStyleIfNotExist(\n                        $(element),\n                        {\n                            'marginLeft': this.options.margin + 'px'\n                        }\n                    );\n                }.bind(this));\n            } else {\n                wrapper.children(':not(:first-child)').each(function (index, element) {\n                    this.setStyleIfNotExist(\n                        $(element),\n                        {\n                            'marginTop': this.options.margin + 'px'\n                        }\n                    );\n                }.bind(this));\n            }\n\n            // clear styles before changing\n            wrapper.css({\n                'top': '',\n                'left': '',\n                'right': '',\n                'bottom': '',\n                'margin-top': '',\n                'margin-bottom': '',\n                'margin-left': '',\n                'margin-right': ''\n            });\n\n            switch (this.options.position) {\n                case 'top-left':\n                    wrapper.css({\n                        'top': 0,\n                        'left': 0\n                    });\n                    break;\n                case 'top-center':\n                    wrapper.css({\n                        'top': 0,\n                        'left': 0,\n                        'right': 0,\n                        'margin-left': 'auto',\n                        'margin-right': 'auto'\n                    });\n                    break;\n                case 'top-right':\n                    wrapper.css({\n                        'top': 0,\n                        'right': 0,\n                        'text-align': 'right'\n                    });\n                    break;\n\n                case 'middle-left':\n                    wrapper.css({\n                        'left': 0,\n                        'top': 0,\n                        'bottom': 0,\n                        'margin-top': 'auto',\n                        'margin-bottom': 'auto'\n                    });\n                    break;\n                case 'middle-center':\n                    wrapper.css({\n                        'top': 0,\n                        'bottom': 0,\n                        'margin-top': 'auto',\n                        'margin-bottom': 'auto',\n                        'left': 0,\n                        'right': 0,\n                        'margin-left': 'auto',\n                        'margin-right': 'auto'\n                    });\n                    break;\n                case 'middle-right':\n                    wrapper.css({\n                        'top': 0,\n                        'bottom': 0,\n                        'margin-top': 'auto',\n                        'margin-bottom': 'auto',\n                        'right': 0,\n                        'text-align': 'right'\n                    });\n                    break;\n\n                case 'bottom-left':\n                    wrapper.css({\n                        'bottom': 0,\n                        'left': 0\n                    });\n                    break;\n                case 'bottom-center':\n                    wrapper.css({\n                        'bottom': 0,\n                        'left': 0,\n                        'right': 0,\n                        'margin-left': 'auto',\n                        'margin-right': 'auto'\n                    });\n                    break;\n                case 'bottom-right':\n                    wrapper.css({\n                        'bottom': 0,\n                        'right': 0,\n                        'text-align': 'right'\n                    });\n                    break;\n            }\n        },\n\n        /**\n         * @param {jQuery} item\n         * @return {jQuery | null}\n         */\n        getNewParent: function (item) {\n            var imageContainer = null,\n                productContainer = item.closest('.item.product');\n\n            if (!productContainer.length) {\n                productContainer = item.closest('.product-item');\n            }\n\n            if (productContainer && productContainer.length) {\n                imageContainer = productContainer.find(this.options.path).first();\n            }\n\n            return imageContainer;\n        },\n\n        /**\n         * @return {string}\n         */\n        getPriceSelector: function () {\n            var notLabelObservered = ':not([label-observered-' + this.options.label + '])';\n\n            return '[data-product-id=\"' + this.options.product + '\"]' + notLabelObservered + ', ' +\n                '[id=\"product-price-' + this.options.product + '\"]' + notLabelObservered + ', ' +\n                '[name=\"product\"][value=\"' + this.options.product + '\"]' + notLabelObservered;\n        }\n    });\n\n    return $.mage.amShowLabel;\n});\n","Amasty_Label/js/initLabel.js":"/**\n * Initialize Module depends on the area\n * @return widget\n */\n\ndefine([\n    'jquery',\n    'Amasty_Label/vendor/tooltipster/js/tooltipster.min',\n    'Amasty_Label/js/label',\n    'matchMedia',\n    'domReady!'\n// eslint-disable-next-line no-unused-vars\n], function ($, tooltipster) {\n    'use strict';\n\n    $.widget('mage.amInitLabel', {\n        options: {\n            mode: null,\n            isAdminArea: null,\n            config: null,\n            productId: null,\n            selector: null\n        },\n        classes: {\n            amSearchSection: 'amsearch-products-section'\n        },\n        tooltipVendorClass: 'tooltip',\n        mediaBreakpoint: 'all and (max-width: 768px)',\n\n        /**\n         * @inheritDoc\n         */\n        _create: function () {\n            var self = this,\n                element = self.element.closest('.product-item, .item');\n\n            // remove label duplication\n            if (this.element.parent().hasClass(this.classes.amSearchSection)\n                && this.element.parent().find(this.options.selector).length > 1) {\n                return;\n            }\n\n            this.renderTooltip();\n\n            // observe only on category pages and without swatches\n            if (self.options.mode === 'prod'\n                || self.options.isAdminArea\n                || self.element.hasClass('amlabel-swatch')\n                || self.isIE()\n            ) {\n                self.execLabel();\n            } else if (self.options.mode === 'cat' && element.length && !self.element.hasClass('amlabel-swatch')) {\n                self._handleIntersect(element);\n            } else {\n                self.execLabel();\n            }\n        },\n\n        /**\n         * Exec Amasty Label widget\n         * @public\n         * @returns {void}\n         */\n        execLabel: function () {\n            this.element.amShowLabel(this.options.config);\n        },\n\n        /**\n         * @public\n         * @returns {Boolean}\n         */\n        isIE: function () {\n            var ua = window.navigator.userAgent;\n\n            return ua.indexOf('MSIE ') > -1 || ua.indexOf('Trident/') > -1;\n        },\n\n        /**\n         * @public\n         * @returns {void}\n         */\n        renderTooltip: function () {\n            var tooltipOptions = this.options.config.tooltip,\n                tooltipContent = decodeURIComponent(tooltipOptions.content);\n\n            if (this._isHiddenOnMobile()) {\n                return;\n            }\n\n            if (+tooltipOptions.status > 1 && tooltipContent && !this._isEmpty(tooltipContent)) {\n                this.element.addClass(this.tooltipVendorClass).tooltipster({\n                    theme: 'tooltipster-shadow',\n                    interactive: true,\n                    content: $('<span>', {\n                        html: tooltipContent\n                    }),\n                    styles: {\n                        backgroundColor: tooltipOptions.backgroundColor,\n                        textColor: tooltipOptions.color\n                    }\n                });\n            }\n        },\n\n        /**\n         * @param {String} html\n         * @private\n         * @returns {Boolean}\n         */\n        _isEmpty: function (html) {\n            return html === null || html.match(/^ *$/) !== null;\n        },\n\n        /**\n         * @private\n         * @returns {Boolean}\n         */\n        _isHiddenOnMobile: function () {\n            return matchMedia(this.mediaBreakpoint).matches && +this.options.config.tooltip.status === 3;\n        },\n\n        /**\n         * Use IntersectionObserver to lazy loading Amasty Label widget\n         *\n         * @param {Object} element\n         * @protected\n         * @returns {function}\n         */\n        _handleIntersect: function (element) {\n            var self = this,\n                observer;\n\n            observer = new IntersectionObserver(function (entries) {\n                if (entries[0].isIntersecting) {\n                    self.execLabel();\n                    observer.disconnect();\n                }\n            });\n\n            observer.observe(element[0]);\n        }\n    });\n\n    return $.mage.amInitLabel;\n});\n","Amasty_Label/js/form/custom-validations-appender.js":"define([\n    'jquery',\n    'mage/translate',\n    'jquery/validate'\n], function ($) {\n    'use strict';\n\n    return function (config) {\n        $.validator.addMethod(\n            'amlabel-validate-percent-or-number',\n            function (value) {\n                return /^(?:100|[0-9]{1,2})[%]?$/.test(value);\n            },\n            $.mage.__('Value can be only integer number or percent.')\n        );\n\n        $.validator.addMethod(\n            'validate-hex-color',\n            function (value) {\n                return /^([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i.test(value);\n            },\n            $.mage.__('Field must have valid hex color code.')\n        );\n\n        $.validator.addMethod(\n            'validate-css-text-size-directive',\n            function (value) {\n                return /^([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i.test(value);\n            },\n            $.mage.__('Field must have valid hex color code.')\n        );\n\n        return config;\n    };\n});\n\n","Amasty_Label/js/form/element/shape-chooser.js":"define([\n    'Magento_Ui/js/form/element/abstract',\n    'Amasty_Label/js/utils/svg-to-data-url-converter',\n    'ko'\n], function (Abstract, convertToDataUrl) {\n    'use strict';\n\n    return Abstract.extend({\n        defaults: {\n            elementTmpl: 'Amasty_Label/form/element/shape-chooser',\n\n            /**\n             * List of shape data.\n             *\n             * @example {\n             *     'shape_name': {\n             *         shapeType: 'rquarter',\n             *         shapeContent: '<svg height=\"100\" width=\"100\"><circle fill=\"blue\"></circle></svg>',\n             *         shapeDescription: 'Description'\n             *     }\n             * }\n             */\n            shapeList: {},\n            shapeIdPostfix: '',\n            shapeIdPrefix: 'amlabel_shape_type_',\n            currentShapeContent: ''\n        },\n\n        /**\n         * @inheritDoc\n         */\n        initObservable: function () {\n            this._super()\n                .observe('currentShapeContent');\n\n            return this;\n        },\n\n        /**\n         * @param {string} type\n         */\n        generateShapeId: function (type) {\n            return this.shapeIdPrefix + type + this.shapeIdPostfix;\n        },\n\n        /**\n         * @param {string} svgContent,\n         * @returns {string}\n         */\n        generateDataUrl: function (svgContent) {\n            return convertToDataUrl(svgContent);\n        },\n\n        /**\n         * @param {object} data\n         * @return {boolean}\n         */\n        isShapeSelected: function (data) {\n            return this.value() === data.shapeType;\n        },\n\n        /**\n         *\n         * @param {object} data\n         */\n        chooseShape: function (data) {\n            this.currentShapeContent(data.shapeContent);\n            this.value(data.shapeType);\n        }\n    });\n});\n","Amasty_Label/js/form/element/label-preview.js":"define([\n    'Magento_Ui/js/form/element/abstract',\n    'ko',\n    'Amasty_Label/js/utils/svg-to-data-url-converter',\n    'Amasty_Label/js/utils/replace-svg-color',\n    'underscore'\n], function (Abstract, ko, convertToDataUrl, replaceSvgColor, _) {\n    'use strict';\n\n    return Abstract.extend({\n        defaults: {\n            elementTmpl: 'Amasty_Label/form/element/label-preview',\n            mainImageSelector: '[data-am-label-js=\"preview-image\"]',\n            previewImageUrl: null,\n            labelImage: null,\n            previewType: '',\n            labelText: null,\n            labelStyle: '',\n            wrapperStyle: '',\n            transparentShapes: [],\n            externalPreviewLinks: {\n                labelType: null,\n                shapeContent: null,\n                shapeColor: null,\n                shapeType: null,\n                labelImage: null,\n                position: null,\n                labelSize: null,\n                labelTextColor: null,\n                labelTextSize: null,\n                externalLabelStyle: null\n            }\n        },\n\n        /**\n         * @inheritDoc\n         */\n        initialize: function () {\n          _.bindAll(\n              this,\n              'onLabelTypeChange',\n              'replaceImageWithShape',\n              'replaceImageWithPicture',\n              'renderLabelStyles',\n              'renderLabelWrapperStyles',\n              'createOnloadListener'\n          );\n\n          this._super();\n        },\n\n        /**\n         * @inheritDoc\n         */\n        initObservable: function () {\n            this._super()\n                .observe('labelImage labelStyle labelText wrapperStyle');\n\n            // eslint-disable-next-line vars-on-top\n            for (var key in this.externalPreviewLinks) {\n                if (this.externalPreviewLinks.hasOwnProperty(key)) {\n                    this.externalPreviewLinks[key] = ko.observable(this.externalPreviewLinks[key]);\n                }\n            }\n\n            this.externalPreviewLinks.labelType.subscribe(this.onLabelTypeChange);\n            this.externalPreviewLinks.shapeColor.subscribe(this.replaceImageWithShape);\n            this.externalPreviewLinks.shapeContent.subscribe(this.replaceImageWithShape);\n            this.externalPreviewLinks.labelImage.subscribe(this.replaceImageWithPicture);\n            this.externalPreviewLinks.labelTextColor.subscribe(this.renderLabelStyles);\n            this.externalPreviewLinks.labelTextSize.subscribe(this.renderLabelStyles);\n            this.externalPreviewLinks.externalLabelStyle.subscribe(this.renderLabelStyles);\n            this.externalPreviewLinks.position.subscribe(this.renderLabelWrapperStyles);\n            this.externalPreviewLinks.labelSize.subscribe(this.renderLabelWrapperStyles);\n\n            return this;\n        },\n\n        /**\n         * @param option\n         * @return {void}\n         */\n        renderLabelWrapperStyles: function (option) {\n            var labelSize = this.getNewLabelSize(),\n                position = this.externalPreviewLinks.position(),\n                resultCss = '';\n\n            if (labelSize !== null) {\n                resultCss += option === 'clear' ? 'width: auto;' : 'width: ' + labelSize + 'px;';\n            }\n\n            if (position !== null) {\n                resultCss += this.getPositionCss(position);\n            }\n\n            if (resultCss !== '') {\n                this.wrapperStyle(resultCss);\n            }\n        },\n\n        /**\n         * @param {number} position\n         * @return {object}\n         */\n        getPositionCss(position) {\n            var cssValues = {},\n                resultCss = '';\n\n            switch (position) {\n                case 0:\n                    cssValues = {\n                        'top': 0,\n                        'left': 0\n                    };\n                    break;\n                case 1:\n                    cssValues = {\n                        'top': 0,\n                        'left': 0,\n                        'right': 0,\n                        'margin-left': 'auto',\n                        'margin-right': 'auto'\n                    };\n                    break;\n                case 2:\n                    cssValues = {\n                        'top': 0,\n                        'right': 0,\n                        'text-align': 'right'\n                    };\n                    break;\n                case 3:\n                    cssValues = {\n                        'left': 0,\n                        'top': 0,\n                        'bottom': 0,\n                        'margin-top': 'auto',\n                        'margin-bottom': 'auto'\n                    };\n                    break;\n                case 4:\n                    cssValues = {\n                        'top': 0,\n                        'bottom': 0,\n                        'margin-top': 'auto',\n                        'margin-bottom': 'auto',\n                        'left': 0,\n                        'right': 0,\n                        'margin-left': 'auto',\n                        'margin-right': 'auto'\n                    };\n                    break;\n                case 5:\n                    cssValues = {\n                        'top': 0,\n                        'bottom': 0,\n                        'margin-top': 'auto',\n                        'margin-bottom': 'auto',\n                        'right': 0,\n                        'text-align': 'right'\n                    };\n                    break;\n                case 6:\n                    cssValues = {\n                        'bottom': 0,\n                        'left': 0\n                    };\n                    break;\n                case 7:\n                    cssValues = {\n                        'bottom': 0,\n                        'left': 0,\n                        'right': 0,\n                        'margin-left': 'auto',\n                        'margin-right': 'auto'\n                    };\n                    break;\n                case 8:\n                    cssValues = {\n                        'bottom': 0,\n                        'right': 0,\n                        'text-align': 'right'\n                    };\n                    break;\n            }\n\n            resultCss = Object.entries(cssValues).reduce(function (carry, currentCss) {\n                    var cssSetting = currentCss[0],\n                        cssSettingValue = currentCss[1];\n\n                    // eslint-disable-next-line no-return-assign\n                    return carry += cssSetting + ': ' + cssSettingValue + '; ';\n                }, '');\n\n            return resultCss;\n        },\n\n        /**\n         * @return {void}\n         */\n        renderLabelStyles: function () {\n            var labelTextColor = this.externalPreviewLinks.labelTextColor(),\n                labelTextSize = this.externalPreviewLinks.labelTextSize(),\n                additionalStyles = this.externalPreviewLinks.externalLabelStyle(),\n                styles = '';\n\n            if (this.isHexColor(labelTextColor)) {\n                styles += 'color: ' + labelTextColor + ';';\n            }\n\n            if (labelTextSize) {\n                labelTextSize = /^\\d+$/gm.test(labelTextSize) ? labelTextSize + 'px' : labelTextSize;\n                styles += 'font-size: ' + labelTextSize + ';';\n            }\n\n            if (additionalStyles) {\n                styles += ' ' + additionalStyles;\n            }\n\n            if (styles !== '') {\n                this.labelStyle(styles);\n            }\n        },\n\n        /**\n         * @return {string | number}\n         */\n        getNewLabelSize: function () {\n            var newLabelSize = this.externalPreviewLinks.labelSize(),\n                rawSize = /\\d+/.exec(newLabelSize),\n                result = null,\n                size;\n\n            if (rawSize) {\n                size = parseFloat(rawSize[0]);\n\n                result = size * this.getMainImageWidth() / 100;\n            }\n\n            return result;\n        },\n\n        /**\n         * @param {string} shapeType\n         * @return {boolean}\n         */\n        isShapeTransparent: function (shapeType) {\n          return this.transparentShapes.indexOf(shapeType) !== -1;\n        },\n\n        /**\n         * @param colorValue\n         * @return {boolean}\n         */\n        isHexColor: function (colorValue) {\n            return /^(#[A-Fa-f0-9]{6}|#[A-Fa-f0-9]{3})$/i.test(colorValue);\n        },\n\n        /**\n         * @return {void}\n         */\n        replaceImageWithShape: function () {\n            var shapeContent = this.externalPreviewLinks.shapeContent(),\n                shapeColor = this.externalPreviewLinks.shapeColor(),\n                shapeType = this.externalPreviewLinks.shapeType(),\n                isTransparent = this.isShapeTransparent(shapeType);\n\n            if (shapeContent) {\n                shapeContent = this.isHexColor(shapeColor)\n                    ? replaceSvgColor(shapeContent, shapeColor, isTransparent)\n                    : shapeContent;\n\n                if (shapeContent !== null) {\n                    this.labelImage(convertToDataUrl(shapeContent));\n                }\n            }\n        },\n\n        /**\n         * @return {void}\n         */\n        replaceImageWithPicture: function () {\n            var labelImage = this.externalPreviewLinks.labelImage();\n\n            if (labelImage && labelImage[0] && labelImage[0].url) {\n                this.labelImage(labelImage[0].url);\n            }\n        },\n\n        /**\n         * @param labelType\n         * @return {void}\n         */\n        onLabelTypeChange: function (labelType) {\n            switch (labelType) {\n                case 0:\n                    this.labelImage(null);\n                    this.renderLabelWrapperStyles('clear');\n                    break;\n                case 1:\n                    this.replaceImageWithShape();\n                    this.renderLabelWrapperStyles();\n                    break;\n                case 2:\n                    this.replaceImageWithPicture();\n                    this.renderLabelWrapperStyles();\n                    break;\n            }\n        },\n\n        /**\n         * @return {HTMLElement}\n         */\n        getMainImage: function () {\n            return document.querySelector(\n                this.mainImageSelector + '[data-am-label-preview-type=\"' + this.previewType + '\"]'\n            );\n        },\n\n        /**\n         * @return {number}\n         */\n        getMainImageWidth: function () {\n            var image = this.getMainImage(),\n                result = 0;\n\n            if (image) {\n                result = image.clientWidth;\n            }\n\n            return result;\n        },\n\n        /**\n         * @return {void}\n         */\n        createOnloadListener: function () {\n            this.getMainImage().onload = this.renderLabelWrapperStyles;\n        }\n    });\n});\n","Amasty_Label/js/form/element/image-uploader.js":"define([\n    'Magento_Ui/js/form/element/image-uploader',\n    'underscore'\n], function (ImageUploader, _) {\n    'use strict';\n\n    return ImageUploader.extend({\n        defaults: {\n            initialFileId: null\n        },\n\n        /**\n         * @inheritDoc\n         * @return {object}\n         */\n        initialize: function () {\n            var result = this._super(),\n                originalValue = this.value();\n\n            if (_.isArray(originalValue) && originalValue.length) {\n                this.initialFileId = originalValue[0].id;\n            }\n\n            return result;\n        },\n\n        onUpdate: function () {\n            var currentValue = this.value(),\n                currentFileId = _.isArray(currentValue) && currentValue.length ? currentValue[0].id : null;\n\n            if (currentFileId !== null) {\n                this.observe.call(currentValue[0], true, [\n                    'previewWidth',\n                    'previewHeight'\n                ]);\n            }\n\n            if (!_.isEqual(currentFileId, this.initialFileId)) {\n                this.bubble('update', this.hasChanged());\n            }\n\n            this.validate();\n        }\n    });\n});\n","Amasty_Label/js/form/element/visual-chooser.js":"define([\n    'Amasty_Label/js/form/element/position-chooser',\n    'ko'\n], function (PositionChooser, ko) {\n    'use strict';\n\n    return PositionChooser.extend({\n        defaults: {\n            optionTitles: []\n        },\n\n        /**\n         * Creates matrix with cells state models\n         */\n        initCellsMap: function () {\n            var chooserRow = [];\n\n            this.optionTitles.forEach(function (label, i) {\n                chooserRow.push({\n                    enabled: ko.observable(1),\n                    value: i,\n                    label: ko.observable(label)\n                });\n            });\n\n            this.cellsMap.push(chooserRow);\n            this.disabledPositions.forEach(this.disablePosition.bind(this));\n        }\n    });\n});\n","Amasty_Label/js/form/element/rules-form.js":"define([\n    'jquery',\n    'Magento_Rule/rules',\n    'prototype'\n], function (jQuery, Rules) {\n    'use strict';\n\n    return Class.create(Rules, {\n        /**\n         * @param {Function} $super\n         * @param {Element} container\n         * @param {Event} event\n         * @return {void}\n         */\n        removeRuleEntry: function ($super, container, event) {\n            $super(container, event);\n            this.getCurrentForm().trigger('change');\n        },\n\n        /**\n         * @param {Function} $super\n         * @param {Element} container\n         * @param {Event} event\n         * @return {void}\n         */\n        showParamInputField: function ($super, container, event) {\n            var result = $super(container, event);\n\n            if (result !== false) {\n                this.getCurrentForm().trigger('change');\n            }\n        },\n\n        /**\n         * @return {jQuery}\n         */\n        getCurrentForm: function () {\n            return jQuery(this.parent);\n        }\n    });\n});\n","Amasty_Label/js/form/element/rule-conditions-chooser.js":"define([\n    'Magento_Ui/js/form/element/abstract',\n    'jquery',\n    'ko',\n    'Amasty_Label/js/form/element/rules-form',\n    'prototype'\n], function (Abstract, $, ko, VarienRulesForm) {\n    'use strict';\n\n    return Abstract.extend({\n        default: {\n            formContent: '',\n            elementTmpl: 'Amasty_Label/form/element/rule-conditions-chooser',\n            newFormChildUrl: '',\n            conditionsFormId: 'rule_conditions_fieldset'\n        },\n\n        /**\n         * @return {string}\n         */\n        getFormContent: function () {\n            return this.formContent;\n        },\n\n        /**\n         * @return {void}\n         */\n        initForm: function () {\n            window[this.conditionsFormId] = new VarienRulesForm(this.conditionsFormId, this.newFormChildUrl);\n        },\n\n        /**\n         * @return {void}\n         */\n        processRuleFormChange: function () {\n            var formValue = $('#' + this.conditionsFormId).serializeArray(),\n                parsedFormValue = this.parseFormValue(formValue);\n\n            this.value(parsedFormValue);\n        },\n\n        /**\n         * Transform jQuery.serializeArray result to tree like object\n         *\n         * @param {object} formValue\n         * @return {object}\n         */\n        parseFormValue: function (formValue) {\n            var result = {};\n\n            formValue.forEach(function (formPart) {\n                var flatKey = formPart['name'],\n                    partValue = formPart['value'],\n                    keyParts = flatKey.split('[').map(function (rawKeyPart) {\n                        return rawKeyPart === ']' ? '[]' : rawKeyPart.replace(/]$/g, '');\n                    });\n\n                this.setValue(result, keyParts.reverse(), partValue);\n            }.bind(this));\n\n            return result;\n        },\n\n        /**\n         * Inserts a value into an object at the path specified in the first argument.\n         *\n         * @example\n         *   keysPathParts = ['c', 'b', 'a']\n         *   result = {a: {b: {c: value}}}\n         *\n         * @param {object} object\n         * @param keysPathParts\n         * @param value\n         */\n        setValue: function (object, keysPathParts, value) {\n            var key,\n                nextKey,\n                newObject;\n\n            if (keysPathParts.length > 0) {\n                key = keysPathParts.pop();\n\n                if (keysPathParts.length === 0) {\n                    // eslint-disable-next-line max-depth\n                    if (object instanceof Array) {\n                        object.push(value);\n                    } else {\n                        object[key] = value;\n                    }\n                } else {\n                    nextKey = keysPathParts.pop();\n                    newObject = nextKey === '[]' ? [] : {};\n\n                    newObject = object[key] || newObject;\n                    keysPathParts.push(nextKey);\n                    object[key] = newObject;\n                    this.setValue(newObject, keysPathParts, value);\n                }\n            }\n        }\n    });\n});\n","Amasty_Label/js/form/element/position-chooser.js":"define([\n    'Magento_Ui/js/form/element/abstract',\n    'ko'\n], function (Abstract, ko) {\n    'use strict';\n\n    return Abstract.extend({\n        defaults: {\n            elementTmpl: 'Amasty_Label/form/element/position-chooser',\n\n            /**\n             * Certain items may be prohibited from selection.\n             * To do this, you need to transfer them in Cartesian form, where the highest left cell is 0;0\n             *\n             * @example\n             * disabledPositions = ['1;1', '0;1']\n             */\n            disabledPositions: [],\n\n            /**\n             * The dimension of the square. For example 3 means chooser 3x3\n             */\n            dimensionSize: 3,\n            visible: true,\n            additionalClasses: {'amlabel-position-chooser': true},\n            cellsMap: []\n        },\n\n        /**\n         * @inheritDoc\n         * @return {object}\n         */\n        initialize: function () {\n            this._super();\n            this.initCellsMap();\n\n            return this;\n        },\n\n        /**\n         * Creates matrix with cells state models\n         */\n        initCellsMap: function () {\n            // eslint-disable-next-line vars-on-top\n            for (var i = 0; i < this.dimensionSize; ++i) {\n                // eslint-disable-next-line\n                var verticalDimension = [];\n\n                this.cellsMap.push(verticalDimension);\n\n                // eslint-disable-next-line\n                for (var j = 0; j < this.dimensionSize; ++j) {\n                    verticalDimension.push({\n                        enabled: ko.observable(1),\n                        value: i * this.dimensionSize + j\n                    });\n                }\n            }\n\n            this.disabledPositions.forEach(this.disablePosition.bind(this));\n        },\n\n        /**\n         * @param {string} position\n         */\n        disablePosition: function (position) {\n            var xyCoords;\n\n            if (/\\d+;\\d+/.test(position)) {\n                xyCoords = position.split(';');\n\n                if (this.cellsMap[xyCoords[0]] && this.cellsMap[xyCoords[0]][xyCoords[1]]) {\n                    this.cellsMap[xyCoords[0]][xyCoords[1]].enabled(0);\n                }\n            }\n        },\n\n        isCellEnabled: function (data) {\n          return this.value() === data.value ? 1 : 0;\n        },\n\n        /**\n         * @param {object} data\n         */\n        selectPositionProcess: function (data) {\n            if (data.enabled()) {\n                if (this.value() === data.value) {\n                    this.value(null);\n                } else {\n                    this.value(data.value);\n                }\n            }\n        },\n\n        /**\n         * @param {any} value\n         * @return {object}\n         */\n        normalizeData: function (value) {\n            value = value === null ? null : +value;\n\n            return this._super(value);\n        }\n    });\n});\n","Amasty_Label/js/grid/product/provider.js":"define([\n    'jquery',\n    'Magento_Ui/js/grid/provider'\n], function ($, provider) {\n    'use strict';\n\n    return provider.extend({\n\n        // eslint-disable-next-line no-unused-vars\n        reload: function (options) {\n            if (typeof this.params.filters === 'undefined') {\n                this.params.filters = {};\n            }\n\n            this.params.filters.label_id = $('[name=\"label_id\"]').val();\n\n            this._super({'refresh': true});\n        }\n    });\n});\n","Amasty_Label/js/utils/svg-to-data-url-converter.js":"define([], function () {\n    'use strict';\n\n    /**\n     * @param {string} svgContent,\n     * @returns {string}\n     */\n    function escapeSvg(svgContent) {\n        // eslint-disable-next-line\n        svgContent = svgContent.replace(/\"/g, '\\'');\n        svgContent = svgContent.replace(/>\\s{1,}</g, '><');\n        svgContent = svgContent.replace(/\\s{2,}/g, ' ');\n\n        return svgContent.replace(/[\\r\\n%#()<>?[\\\\\\]^`{|}]/g, encodeURIComponent);\n    }\n\n    return function (svgContent) {\n        return 'data:image/svg+xml,' + escapeSvg(svgContent);\n    };\n});\n","Amasty_Label/js/utils/replace-svg-color.js":"define([], function () {\n    'use strict';\n\n    /**\n     *\n     * @param {string} shapeContent\n     * @param {string} newColor\n     * @param {boolean} isTransparent\n     * @return {string}\n     */\n    return function (shapeContent, newColor, isTransparent) {\n        var parser = new DOMParser(),\n            svgDom = parser.parseFromString(shapeContent, 'image/svg+xml'),\n            result = null,\n            serializer = new XMLSerializer(),\n            colorElements = [],\n            vectorColor,\n            colorElement;\n\n        if (svgDom.getElementsByTagName('svg').length) {\n            if (isTransparent) {\n                colorElements = svgDom.getElementsByTagName('g');\n\n                // eslint-disable-next-line max-depth\n                if (colorElements.length === 0) {\n                    colorElements = svgDom.getElementsByTagName('path');\n                }\n\n                // eslint-disable-next-line max-depth\n                if (colorElements[0] instanceof Element) {\n                    colorElements[0].setAttribute('stroke', newColor);\n                }\n            } else {\n                colorElements = svgDom.getElementsByTagName('path');\n\n                // eslint-disable-next-line max-depth\n                for (colorElement of colorElements) {\n                    vectorColor = colorElement.getAttribute('fill');\n\n                    // eslint-disable-next-line max-depth\n                    if (vectorColor && vectorColor.toUpperCase() !== '#FFFFFF') {\n                        colorElement.setAttribute('fill', newColor);\n\n                        break;\n                    }\n                }\n            }\n\n            result = serializer.serializeToString(svgDom);\n        }\n\n        return result;\n    };\n});\n","Amasty_Label/vendor/tooltipster/js/tooltipster.min.js":"!function(t,i){\"function\"==typeof define&&define.amd?define([\"jquery\"],function(t){return i(t)}):\"object\"==typeof exports?module.exports=i(require(\"jquery\")):i(jQuery)}(0,function(t){var i={animation:\"fade\",animationDuration:350,content:null,contentAsHTML:!1,contentCloning:!1,debug:!0,delay:300,delayTouch:[300,500],functionInit:null,functionBefore:null,functionReady:null,functionAfter:null,functionFormat:null,IEmin:6,interactive:!1,multiple:!1,parent:null,plugins:[\"sideTip\"],repositionOnScroll:!1,restoration:\"none\",selfDestruction:!0,theme:[],timer:0,trackerInterval:500,trackOrigin:!1,trackTooltip:!1,trigger:\"hover\",triggerClose:{click:!1,mouseleave:!1,originClick:!1,scroll:!1,tap:!1,touchleave:!1},triggerOpen:{click:!1,mouseenter:!1,tap:!1,touchstart:!1},updateAnimation:\"rotate\",zIndex:9999999,styles:{backgroundColor:\"\",textColor:\"\"}},o=\"undefined\"!=typeof window?window:null,e={hasTouchCapability:!(!o||!(\"ontouchstart\"in o||o.DocumentTouch&&o.document instanceof o.DocumentTouch||o.navigator.maxTouchPoints)),hasTransitions:function(){if(!o)return!1;var t=(o.document.body||o.document.documentElement).style,i=\"transition\",e=[\"Moz\",\"Webkit\",\"Khtml\",\"O\",\"ms\"];if(\"string\"==typeof t[i])return!0;i=i.charAt(0).toUpperCase()+i.substr(1);for(var n=0;n<e.length;n++)if(\"string\"==typeof t[e[n]+i])return!0;return!1}(),IE:!1,semVer:\"4.2.8\",window:o},n=function(){this.__$emitterPrivate=t({}),this.__$emitterPublic=t({}),this.__instancesLatestArr=[],this.__plugins={},this._env=e};function s(t){this.$container,this.constraints=null,this.__$tooltip,this.__init(t)}function r(i,o){var e=!0;return t.each(i,function(t,n){if(void 0===o[t]||i[t]!==o[t])return e=!1,!1}),e}function _(i){var o=i.attr(\"id\"),n=o?e.window.document.getElementById(o):null;return n?n===i[0]:t.contains(e.window.document.body,i[0])}n.prototype={__bridge:function(o,e,n){if(!e[n]){var s=function(){};s.prototype=o;var r=new s;r.__init&&r.__init(e),t.each(o,function(t,o){0!=t.indexOf(\"__\")&&(e[t]?i.debug&&console.log(\"The \"+t+\" method of the \"+n+\" plugin conflicts with another plugin or native methods\"):(e[t]=function(){return r[t].apply(r,Array.prototype.slice.apply(arguments))},e[t].bridged=r))}),e[n]=r}return this},__setWindow:function(t){return e.window=t,this},_getRuler:function(t){return new s(t)},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_plugin:function(i){if(\"string\"==typeof i){var o=i,e=null;return o.indexOf(\".\")>0?e=this.__plugins[o]:t.each(this.__plugins,function(t,i){if(i.name.substring(i.name.length-o.length-1)==\".\"+o)return e=i,!1}),e}if(i.name.indexOf(\".\")<0)throw new Error(\"Plugins must be namespaced\");return this.__plugins[i.name]=i,i.core&&this.__bridge(i.core,this,i.name),this},_trigger:function(){var t=Array.prototype.slice.apply(arguments);return\"string\"==typeof t[0]&&(t[0]={type:t[0]}),this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,t),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,t),this},instances:function(i){var o=[];return t(i||\".tooltipstered\").each(function(){var i=t(this),e=i.data(\"tooltipster-ns\");e&&t.each(e,function(t,e){o.push(i.data(e))})}),o},instancesLatest:function(){return this.__instancesLatestArr},off:function(){return this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},origins:function(i){return t((i?i+\" \":\"\")+\".tooltipstered\").toArray()},setDefaults:function(o){return t.extend(i,o),this},triggerHandler:function(){return this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},t.tooltipster=new n,t.Tooltipster=function(i,o){this.__callbacks={close:[],open:[]},this.__closingTime,this.__Content,this.__contentBcr,this.__destroyed=!1,this.__$emitterPrivate=t({}),this.__$emitterPublic=t({}),this.__enabled=!0,this.__garbageCollector,this.__Geometry,this.__lastPosition,this.__namespace=\"tooltipster-\"+Math.round(1e6*Math.random()),this.__options,this.__$originParents,this.__pointerIsOverOrigin=!1,this.__previousThemes=[],this.__state=\"closed\",this.__timeouts={close:[],open:null},this.__touchEvents=[],this.__tracker=null,this._$origin,this._$tooltip,this.__init(i,o)},t.Tooltipster.prototype={__init:function(o,n){var s=this;if(s._$origin=t(o),s.__options=t.extend(!0,{},i,n),s.__optionsFormat(),!e.IE||e.IE>=s.__options.IEmin){var r=null;if(void 0===s._$origin.data(\"tooltipster-initialTitle\")&&(void 0===(r=s._$origin.attr(\"title\"))&&(r=null),s._$origin.data(\"tooltipster-initialTitle\",r)),null!==s.__options.content)s.__contentSet(s.__options.content);else{var _,a=s._$origin.attr(\"data-tooltip-content\");a&&(_=t(a)),_&&_[0]?s.__contentSet(_.first()):s.__contentSet(r)}s._$origin.removeAttr(\"title\").addClass(\"tooltipstered\"),s.__prepareOrigin(),s.__prepareGC(),t.each(s.__options.plugins,function(t,i){s._plug(i)}),e.hasTouchCapability&&t(e.window.document.body).on(\"touchmove.\"+s.__namespace+\"-triggerOpen\",function(t){s._touchRecordEvent(t)}),s._on(\"created\",function(){s.__prepareTooltip()})._on(\"repositioned\",function(t){s.__lastPosition=t.position})}else s.__options.disabled=!0},__contentInsert:function(){var t=this._$tooltip.find(\".tooltipster-content\"),i=this.__Content;return this._trigger({type:\"format\",content:this.__Content,format:function(t){i=t}}),this.__options.functionFormat&&(i=this.__options.functionFormat.call(this,this,{origin:this._$origin[0]},this.__Content)),\"string\"!=typeof i||this.__options.contentAsHTML?t.empty().append(i):t.text(i),this},__contentSet:function(i){return i instanceof t&&this.__options.contentCloning&&(i=i.clone(!0)),this.__Content=i,this._trigger({type:\"updated\",content:i}),this},__destroyError:function(){throw new Error(\"This tooltip has been destroyed and cannot execute your method call.\")},__geometry:function(){var i=this._$origin,o=this._$origin.is(\"area\");if(o){var n=this._$origin.parent().attr(\"name\");i=t('img[usemap=\"#'+n+'\"]')}var s=i[0].getBoundingClientRect(),r=t(e.window.document),_=t(e.window),a=i,l={available:{document:null,window:null},document:{size:{height:r.height(),width:r.width()}},window:{scroll:{left:e.window.scrollX||e.window.document.documentElement.scrollLeft,top:e.window.scrollY||e.window.document.documentElement.scrollTop},size:{height:_.height(),width:_.width()}},origin:{fixedLineage:!1,offset:{},size:{height:s.bottom-s.top,width:s.right-s.left},usemapImage:o?i[0]:null,windowOffset:{bottom:s.bottom,left:s.left,right:s.right,top:s.top}}};if(o){var p=this._$origin.attr(\"shape\"),c=this._$origin.attr(\"coords\");if(c&&(c=c.split(\",\"),t.map(c,function(t,i){c[i]=parseInt(t)})),\"default\"!=p)switch(p){case\"circle\":var h=c[0],d=c[1],u=c[2],g=d-u,f=h-u;l.origin.size.height=2*u,l.origin.size.width=l.origin.size.height,l.origin.windowOffset.left+=f,l.origin.windowOffset.top+=g;break;case\"rect\":var m=c[0],w=c[1],v=c[2],y=c[3];l.origin.size.height=y-w,l.origin.size.width=v-m,l.origin.windowOffset.left+=m,l.origin.windowOffset.top+=w;break;case\"poly\":for(var b=0,$=0,C=0,O=0,T=\"even\",z=0;z<c.length;z++){var E=c[z];\"even\"==T?(E>C&&(C=E,0===z&&(b=C)),E<b&&(b=E),T=\"odd\"):(E>O&&(O=E,1==z&&($=O)),E<$&&($=E),T=\"even\")}l.origin.size.height=O-$,l.origin.size.width=C-b,l.origin.windowOffset.left+=b,l.origin.windowOffset.top+=$}}for(this._trigger({type:\"geometry\",edit:function(t){l.origin.size.height=t.height,l.origin.windowOffset.left=t.left,l.origin.windowOffset.top=t.top,l.origin.size.width=t.width},geometry:{height:l.origin.size.height,left:l.origin.windowOffset.left,top:l.origin.windowOffset.top,width:l.origin.size.width}}),l.origin.windowOffset.right=l.origin.windowOffset.left+l.origin.size.width,l.origin.windowOffset.bottom=l.origin.windowOffset.top+l.origin.size.height,l.origin.offset.left=l.origin.windowOffset.left+l.window.scroll.left,l.origin.offset.top=l.origin.windowOffset.top+l.window.scroll.top,l.origin.offset.bottom=l.origin.offset.top+l.origin.size.height,l.origin.offset.right=l.origin.offset.left+l.origin.size.width,l.available.document={bottom:{height:l.document.size.height-l.origin.offset.bottom,width:l.document.size.width},left:{height:l.document.size.height,width:l.origin.offset.left},right:{height:l.document.size.height,width:l.document.size.width-l.origin.offset.right},top:{height:l.origin.offset.top,width:l.document.size.width}},l.available.window={bottom:{height:Math.max(l.window.size.height-Math.max(l.origin.windowOffset.bottom,0),0),width:l.window.size.width},left:{height:l.window.size.height,width:Math.max(l.origin.windowOffset.left,0)},right:{height:l.window.size.height,width:Math.max(l.window.size.width-Math.max(l.origin.windowOffset.right,0),0)},top:{height:Math.max(l.origin.windowOffset.top,0),width:l.window.size.width}};\"html\"!=a[0].tagName.toLowerCase();){if(\"fixed\"==a.css(\"position\")){l.origin.fixedLineage=!0;break}a=a.parent()}return l},__optionsFormat:function(){return\"number\"==typeof this.__options.animationDuration&&(this.__options.animationDuration=[this.__options.animationDuration,this.__options.animationDuration]),\"number\"==typeof this.__options.delay&&(this.__options.delay=[this.__options.delay,this.__options.delay]),\"number\"==typeof this.__options.delayTouch&&(this.__options.delayTouch=[this.__options.delayTouch,this.__options.delayTouch]),\"string\"==typeof this.__options.theme&&(this.__options.theme=[this.__options.theme]),null===this.__options.parent?this.__options.parent=t(e.window.document.body):\"string\"==typeof this.__options.parent&&(this.__options.parent=t(this.__options.parent)),\"hover\"==this.__options.trigger?(this.__options.triggerOpen={mouseenter:!0,touchstart:!0},this.__options.triggerClose={mouseleave:!0,originClick:!0,touchleave:!0}):\"click\"==this.__options.trigger&&(this.__options.triggerOpen={click:!0,tap:!0},this.__options.triggerClose={click:!0,tap:!0}),this._trigger(\"options\"),this},__prepareGC:function(){var i=this;return i.__options.selfDestruction?i.__garbageCollector=setInterval(function(){var o=(new Date).getTime();i.__touchEvents=t.grep(i.__touchEvents,function(t,i){return o-t.time>6e4}),_(i._$origin)||i.close(function(){i.destroy()})},2e4):clearInterval(i.__garbageCollector),i},__prepareOrigin:function(){var t=this;if(t._$origin.off(\".\"+t.__namespace+\"-triggerOpen\"),e.hasTouchCapability&&t._$origin.on(\"touchstart.\"+t.__namespace+\"-triggerOpen touchend.\"+t.__namespace+\"-triggerOpen touchcancel.\"+t.__namespace+\"-triggerOpen\",function(i){t._touchRecordEvent(i)}),t.__options.triggerOpen.click||t.__options.triggerOpen.tap&&e.hasTouchCapability){var i=\"\";t.__options.triggerOpen.click&&(i+=\"click.\"+t.__namespace+\"-triggerOpen \"),t.__options.triggerOpen.tap&&e.hasTouchCapability&&(i+=\"touchend.\"+t.__namespace+\"-triggerOpen\"),t._$origin.on(i,function(i){t._touchIsMeaningfulEvent(i)&&t._open(i)})}if(t.__options.triggerOpen.mouseenter||t.__options.triggerOpen.touchstart&&e.hasTouchCapability){i=\"\";t.__options.triggerOpen.mouseenter&&(i+=\"mouseenter.\"+t.__namespace+\"-triggerOpen \"),t.__options.triggerOpen.touchstart&&e.hasTouchCapability&&(i+=\"touchstart.\"+t.__namespace+\"-triggerOpen\"),t._$origin.on(i,function(i){!t._touchIsTouchEvent(i)&&t._touchIsEmulatedEvent(i)||(t.__pointerIsOverOrigin=!0,t._openShortly(i))})}if(t.__options.triggerClose.mouseleave||t.__options.triggerClose.touchleave&&e.hasTouchCapability){i=\"\";t.__options.triggerClose.mouseleave&&(i+=\"mouseleave.\"+t.__namespace+\"-triggerOpen \"),t.__options.triggerClose.touchleave&&e.hasTouchCapability&&(i+=\"touchend.\"+t.__namespace+\"-triggerOpen touchcancel.\"+t.__namespace+\"-triggerOpen\"),t._$origin.on(i,function(i){t._touchIsMeaningfulEvent(i)&&(t.__pointerIsOverOrigin=!1)})}return t},__prepareTooltip:function(){var i=this,o=i.__options.interactive?\"auto\":\"\";return i._$tooltip.attr(\"id\",i.__namespace).css({\"pointer-events\":o,zIndex:i.__options.zIndex}),t.each(i.__previousThemes,function(t,o){i._$tooltip.removeClass(o)}),t.each(i.__options.theme,function(t,o){i._$tooltip.addClass(o)}),i.__previousThemes=t.merge([],i.__options.theme),i},__scrollHandler:function(i){if(this.__options.triggerClose.scroll)this._close(i);else if(_(this._$origin)&&_(this._$tooltip)){var o=null;if(i.target===e.window.document)this.__Geometry.origin.fixedLineage||this.__options.repositionOnScroll&&this.reposition(i);else{o=this.__geometry();var n=!1;if(\"fixed\"!=this._$origin.css(\"position\")&&this.__$originParents.each(function(i,e){var s=t(e),r=s.css(\"overflow-x\"),_=s.css(\"overflow-y\");if(\"visible\"!=r||\"visible\"!=_){var a=e.getBoundingClientRect();if(\"visible\"!=r&&(o.origin.windowOffset.left<a.left||o.origin.windowOffset.right>a.right))return n=!0,!1;if(\"visible\"!=_&&(o.origin.windowOffset.top<a.top||o.origin.windowOffset.bottom>a.bottom))return n=!0,!1}if(\"fixed\"==s.css(\"position\"))return!1}),n)this._$tooltip.css(\"visibility\",\"hidden\");else if(this._$tooltip.css(\"visibility\",\"visible\"),this.__options.repositionOnScroll)this.reposition(i);else{var s=o.origin.offset.left-this.__Geometry.origin.offset.left,r=o.origin.offset.top-this.__Geometry.origin.offset.top;this._$tooltip.css({left:this.__lastPosition.coord.left+s,top:this.__lastPosition.coord.top+r})}}this._trigger({type:\"scroll\",event:i,geo:o})}return this},__stateSet:function(t){return this.__state=t,this._trigger({type:\"state\",state:t}),this},__timeoutsClear:function(){return clearTimeout(this.__timeouts.open),this.__timeouts.open=null,t.each(this.__timeouts.close,function(t,i){clearTimeout(i)}),this.__timeouts.close=[],this},__trackerStart:function(){var t=this,i=t._$tooltip.find(\".tooltipster-content\");return t.__options.trackTooltip&&(t.__contentBcr=i[0].getBoundingClientRect()),t.__tracker=setInterval(function(){if(_(t._$origin)&&_(t._$tooltip)){if(t.__options.trackOrigin){var o=t.__geometry(),e=!1;r(o.origin.size,t.__Geometry.origin.size)&&(t.__Geometry.origin.fixedLineage?r(o.origin.windowOffset,t.__Geometry.origin.windowOffset)&&(e=!0):r(o.origin.offset,t.__Geometry.origin.offset)&&(e=!0)),e||(t.__options.triggerClose.mouseleave?t._close():t.reposition())}if(t.__options.trackTooltip){var n=i[0].getBoundingClientRect();n.height===t.__contentBcr.height&&n.width===t.__contentBcr.width||(t.reposition(),t.__contentBcr=n)}}else t._close()},t.__options.trackerInterval),t},_close:function(i,o,n){var s=this,r=!0;if(s._trigger({type:\"close\",event:i,stop:function(){r=!1}}),r||n){o&&s.__callbacks.close.push(o),s.__callbacks.open=[],s.__timeoutsClear();var _=function(){t.each(s.__callbacks.close,function(t,o){o.call(s,s,{event:i,origin:s._$origin[0]})}),s.__callbacks.close=[]};if(\"closed\"!=s.__state){var a=!0,l=(new Date).getTime()+s.__options.animationDuration[1];if(\"disappearing\"==s.__state&&l>s.__closingTime&&s.__options.animationDuration[1]>0&&(a=!1),a){s.__closingTime=l,\"disappearing\"!=s.__state&&s.__stateSet(\"disappearing\");var p=function(){clearInterval(s.__tracker),s._trigger({type:\"closing\",event:i}),s._$tooltip.off(\".\"+s.__namespace+\"-triggerClose\").removeClass(\"tooltipster-dying\"),t(e.window).off(\".\"+s.__namespace+\"-triggerClose\"),s.__$originParents.each(function(i,o){t(o).off(\"scroll.\"+s.__namespace+\"-triggerClose\")}),s.__$originParents=null,t(e.window.document.body).off(\".\"+s.__namespace+\"-triggerClose\"),s._$origin.off(\".\"+s.__namespace+\"-triggerClose\"),s._off(\"dismissable\"),s.__stateSet(\"closed\"),s._trigger({type:\"after\",event:i}),s.__options.functionAfter&&s.__options.functionAfter.call(s,s,{event:i,origin:s._$origin[0]}),_()};e.hasTransitions?(s._$tooltip.css({\"-moz-animation-duration\":s.__options.animationDuration[1]+\"ms\",\"-ms-animation-duration\":s.__options.animationDuration[1]+\"ms\",\"-o-animation-duration\":s.__options.animationDuration[1]+\"ms\",\"-webkit-animation-duration\":s.__options.animationDuration[1]+\"ms\",\"animation-duration\":s.__options.animationDuration[1]+\"ms\",\"transition-duration\":s.__options.animationDuration[1]+\"ms\"}),s._$tooltip.clearQueue().removeClass(\"tooltipster-show\").addClass(\"tooltipster-dying\"),s.__options.animationDuration[1]>0&&s._$tooltip.delay(s.__options.animationDuration[1]),s._$tooltip.queue(p)):s._$tooltip.stop().fadeOut(s.__options.animationDuration[1],p)}}else _()}return s},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_open:function(i,o){var n=this;if(!n.__destroying&&_(n._$origin)&&n.__enabled){var s=!0;if(\"closed\"==n.__state&&(n._trigger({type:\"before\",event:i,stop:function(){s=!1}}),s&&n.__options.functionBefore&&(s=n.__options.functionBefore.call(n,n,{event:i,origin:n._$origin[0]}))),!1!==s&&null!==n.__Content){o&&n.__callbacks.open.push(o),n.__callbacks.close=[],n.__timeoutsClear();var r,a=function(){\"stable\"!=n.__state&&n.__stateSet(\"stable\"),t.each(n.__callbacks.open,function(t,i){i.call(n,n,{origin:n._$origin[0],tooltip:n._$tooltip[0]})}),n.__callbacks.open=[]};if(\"closed\"!==n.__state)r=0,\"disappearing\"===n.__state?(n.__stateSet(\"appearing\"),e.hasTransitions?(n._$tooltip.clearQueue().removeClass(\"tooltipster-dying\").addClass(\"tooltipster-show\"),n.__options.animationDuration[0]>0&&n._$tooltip.delay(n.__options.animationDuration[0]),n._$tooltip.queue(a)):n._$tooltip.stop().fadeIn(a)):\"stable\"==n.__state&&a();else{if(n.__stateSet(\"appearing\"),r=n.__options.animationDuration[0],n.__contentInsert(),n.reposition(i,!0),e.hasTransitions?(n._$tooltip.addClass(\"tooltipster-\"+n.__options.animation).addClass(\"tooltipster-initial\").css({\"-moz-animation-duration\":n.__options.animationDuration[0]+\"ms\",\"-ms-animation-duration\":n.__options.animationDuration[0]+\"ms\",\"-o-animation-duration\":n.__options.animationDuration[0]+\"ms\",\"-webkit-animation-duration\":n.__options.animationDuration[0]+\"ms\",\"animation-duration\":n.__options.animationDuration[0]+\"ms\",\"transition-duration\":n.__options.animationDuration[0]+\"ms\"}),setTimeout(function(){\"closed\"!=n.__state&&(n._$tooltip.addClass(\"tooltipster-show\").removeClass(\"tooltipster-initial\"),n.__options.animationDuration[0]>0&&n._$tooltip.delay(n.__options.animationDuration[0]),n._$tooltip.queue(a))},0)):n._$tooltip.css(\"display\",\"none\").fadeIn(n.__options.animationDuration[0],a),n.__trackerStart(),t(e.window).on(\"resize.\"+n.__namespace+\"-triggerClose\",function(i){var o=t(document.activeElement);(o.is(\"input\")||o.is(\"textarea\"))&&t.contains(n._$tooltip[0],o[0])||n.reposition(i)}).on(\"scroll.\"+n.__namespace+\"-triggerClose\",function(t){n.__scrollHandler(t)}),n.__$originParents=n._$origin.parents(),n.__$originParents.each(function(i,o){t(o).on(\"scroll.\"+n.__namespace+\"-triggerClose\",function(t){n.__scrollHandler(t)})}),n.__options.triggerClose.mouseleave||n.__options.triggerClose.touchleave&&e.hasTouchCapability){n._on(\"dismissable\",function(t){t.dismissable?t.delay?(h=setTimeout(function(){n._close(t.event)},t.delay),n.__timeouts.close.push(h)):n._close(t):clearTimeout(h)});var l=n._$origin,p=\"\",c=\"\",h=null;n.__options.interactive&&(l=l.add(n._$tooltip)),n.__options.triggerClose.mouseleave&&(p+=\"mouseenter.\"+n.__namespace+\"-triggerClose \",c+=\"mouseleave.\"+n.__namespace+\"-triggerClose \"),n.__options.triggerClose.touchleave&&e.hasTouchCapability&&(p+=\"touchstart.\"+n.__namespace+\"-triggerClose\",c+=\"touchend.\"+n.__namespace+\"-triggerClose touchcancel.\"+n.__namespace+\"-triggerClose\"),l.on(c,function(t){if(n._touchIsTouchEvent(t)||!n._touchIsEmulatedEvent(t)){var i=\"mouseleave\"==t.type?n.__options.delay:n.__options.delayTouch;n._trigger({delay:i[1],dismissable:!0,event:t,type:\"dismissable\"})}}).on(p,function(t){!n._touchIsTouchEvent(t)&&n._touchIsEmulatedEvent(t)||n._trigger({dismissable:!1,event:t,type:\"dismissable\"})})}n.__options.triggerClose.originClick&&n._$origin.on(\"click.\"+n.__namespace+\"-triggerClose\",function(t){n._touchIsTouchEvent(t)||n._touchIsEmulatedEvent(t)||n._close(t)}),(n.__options.triggerClose.click||n.__options.triggerClose.tap&&e.hasTouchCapability)&&setTimeout(function(){if(\"closed\"!=n.__state){var i=\"\",o=t(e.window.document.body);n.__options.triggerClose.click&&(i+=\"click.\"+n.__namespace+\"-triggerClose \"),n.__options.triggerClose.tap&&e.hasTouchCapability&&(i+=\"touchend.\"+n.__namespace+\"-triggerClose\"),o.on(i,function(i){n._touchIsMeaningfulEvent(i)&&(n._touchRecordEvent(i),n.__options.interactive&&t.contains(n._$tooltip[0],i.target)||n._close(i))}),n.__options.triggerClose.tap&&e.hasTouchCapability&&o.on(\"touchstart.\"+n.__namespace+\"-triggerClose\",function(t){n._touchRecordEvent(t)})}},0),n._trigger(\"ready\"),n.__options.functionReady&&n.__options.functionReady.call(n,n,{origin:n._$origin[0],tooltip:n._$tooltip[0]})}if(n.__options.timer>0){h=setTimeout(function(){n._close()},n.__options.timer+r);n.__timeouts.close.push(h)}}}return n},_openShortly:function(t){var i=this,o=!0;if(\"stable\"!=i.__state&&\"appearing\"!=i.__state&&!i.__timeouts.open&&(i._trigger({type:\"start\",event:t,stop:function(){o=!1}}),o)){var e=0==t.type.indexOf(\"touch\")?i.__options.delayTouch:i.__options.delay;e[0]?i.__timeouts.open=setTimeout(function(){i.__timeouts.open=null,i.__pointerIsOverOrigin&&i._touchIsMeaningfulEvent(t)?(i._trigger(\"startend\"),i._open(t)):i._trigger(\"startcancel\")},e[0]):(i._trigger(\"startend\"),i._open(t))}return i},_optionsExtract:function(i,o){var e=this,n=t.extend(!0,{},o),s=e.__options[i];return s||(s={},t.each(o,function(t,i){var o=e.__options[t];void 0!==o&&(s[t]=o)})),t.each(n,function(i,o){void 0!==s[i]&&(\"object\"!=typeof o||o instanceof Array||null==o||\"object\"!=typeof s[i]||s[i]instanceof Array||null==s[i]?n[i]=s[i]:t.extend(n[i],s[i]))}),n},_plug:function(i){var o=t.tooltipster._plugin(i);if(!o)throw new Error('The \"'+i+'\" plugin is not defined');return o.instance&&t.tooltipster.__bridge(o.instance,this,o.name),this},_touchIsEmulatedEvent:function(t){for(var i=!1,o=(new Date).getTime(),e=this.__touchEvents.length-1;e>=0;e--){var n=this.__touchEvents[e];if(!(o-n.time<500))break;n.target===t.target&&(i=!0)}return i},_touchIsMeaningfulEvent:function(t){return this._touchIsTouchEvent(t)&&!this._touchSwiped(t.target)||!this._touchIsTouchEvent(t)&&!this._touchIsEmulatedEvent(t)},_touchIsTouchEvent:function(t){return 0==t.type.indexOf(\"touch\")},_touchRecordEvent:function(t){return this._touchIsTouchEvent(t)&&(t.time=(new Date).getTime(),this.__touchEvents.push(t)),this},_touchSwiped:function(t){for(var i=!1,o=this.__touchEvents.length-1;o>=0;o--){var e=this.__touchEvents[o];if(\"touchmove\"==e.type){i=!0;break}if(\"touchstart\"==e.type&&t===e.target)break}return i},_trigger:function(){var i=Array.prototype.slice.apply(arguments);return\"string\"==typeof i[0]&&(i[0]={type:i[0]}),i[0].instance=this,i[0].origin=this._$origin?this._$origin[0]:null,i[0].tooltip=this._$tooltip?this._$tooltip[0]:null,this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,i),t.tooltipster._trigger.apply(t.tooltipster,i),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,i),this},_unplug:function(i){var o=this;if(o[i]){var e=t.tooltipster._plugin(i);e.instance&&t.each(e.instance,function(t,e){o[t]&&o[t].bridged===o[i]&&delete o[t]}),o[i].__destroy&&o[i].__destroy(),delete o[i]}return o},close:function(t){return this.__destroyed?this.__destroyError():this._close(null,t),this},content:function(t){var i=this;if(void 0===t)return i.__Content;if(i.__destroyed)i.__destroyError();else if(i.__contentSet(t),null!==i.__Content){if(\"closed\"!==i.__state&&(i.__contentInsert(),i.reposition(),i.__options.updateAnimation))if(e.hasTransitions){var o=i.__options.updateAnimation;i._$tooltip.addClass(\"tooltipster-update-\"+o),setTimeout(function(){\"closed\"!=i.__state&&i._$tooltip.removeClass(\"tooltipster-update-\"+o)},1e3)}else i._$tooltip.fadeTo(200,.5,function(){\"closed\"!=i.__state&&i._$tooltip.fadeTo(200,1)})}else i._close();return i},destroy:function(){var i=this;if(i.__destroyed)i.__destroyError();else{\"closed\"!=i.__state?i.option(\"animationDuration\",0)._close(null,null,!0):i.__timeoutsClear(),i._trigger(\"destroy\"),i.__destroyed=!0,i._$origin.removeData(i.__namespace).off(\".\"+i.__namespace+\"-triggerOpen\"),t(e.window.document.body).off(\".\"+i.__namespace+\"-triggerOpen\");var o=i._$origin.data(\"tooltipster-ns\");if(o)if(1===o.length){var n=null;\"previous\"==i.__options.restoration?n=i._$origin.data(\"tooltipster-initialTitle\"):\"current\"==i.__options.restoration&&(n=\"string\"==typeof i.__Content?i.__Content:t(\"<div></div>\").append(i.__Content).html()),n&&i._$origin.attr(\"title\",n),i._$origin.removeClass(\"tooltipstered\"),i._$origin.removeData(\"tooltipster-ns\").removeData(\"tooltipster-initialTitle\")}else o=t.grep(o,function(t,o){return t!==i.__namespace}),i._$origin.data(\"tooltipster-ns\",o);i._trigger(\"destroyed\"),i._off(),i.off(),i.__Content=null,i.__$emitterPrivate=null,i.__$emitterPublic=null,i.__options.parent=null,i._$origin=null,i._$tooltip=null,t.tooltipster.__instancesLatestArr=t.grep(t.tooltipster.__instancesLatestArr,function(t,o){return i!==t}),clearInterval(i.__garbageCollector)}return i},disable:function(){return this.__destroyed?(this.__destroyError(),this):(this._close(),this.__enabled=!1,this)},elementOrigin:function(){if(!this.__destroyed)return this._$origin[0];this.__destroyError()},elementTooltip:function(){return this._$tooltip?this._$tooltip[0]:null},enable:function(){return this.__enabled=!0,this},hide:function(t){return this.close(t)},instance:function(){return this},off:function(){return this.__destroyed||this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},open:function(t){return this.__destroyed?this.__destroyError():this._open(null,t),this},option:function(i,o){return void 0===o?this.__options[i]:(this.__destroyed?this.__destroyError():(this.__options[i]=o,this.__optionsFormat(),t.inArray(i,[\"trigger\",\"triggerClose\",\"triggerOpen\"])>=0&&this.__prepareOrigin(),\"selfDestruction\"===i&&this.__prepareGC()),this)},reposition:function(t,i){return this.__destroyed?this.__destroyError():\"closed\"!=this.__state&&_(this._$origin)&&(i||_(this._$tooltip))&&(i||this._$tooltip.detach(),this.__Geometry=this.__geometry(),this._trigger({type:\"reposition\",event:t,helper:{geo:this.__Geometry}})),this},show:function(t){return this.open(t)},status:function(){return{destroyed:this.__destroyed,enabled:this.__enabled,open:\"closed\"!==this.__state,state:this.__state}},triggerHandler:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},t.fn.tooltipster=function(){var o=Array.prototype.slice.apply(arguments),e=\"You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE.\";if(0===this.length)return this;if(\"string\"==typeof o[0]){var n=\"#*$~&\";return this.each(function(){var i=t(this).data(\"tooltipster-ns\"),s=i?t(this).data(i[0]):null;if(!s)throw new Error(\"You called Tooltipster's \\\"\"+o[0]+'\" method on an uninitialized element');if(\"function\"!=typeof s[o[0]])throw new Error('Unknown method \"'+o[0]+'\"');this.length>1&&\"content\"==o[0]&&(o[1]instanceof t||\"object\"==typeof o[1]&&null!=o[1]&&o[1].tagName)&&!s.__options.contentCloning&&s.__options.debug&&console.log(e);var r=s[o[0]](o[1],o[2]);if(r!==s||\"instance\"===o[0])return n=r,!1}),\"#*$~&\"!==n?n:this}t.tooltipster.__instancesLatestArr=[];var s=o[0]&&void 0!==o[0].multiple,r=s&&o[0].multiple||!s&&i.multiple,_=o[0]&&void 0!==o[0].content,a=_&&o[0].content||!_&&i.content,l=o[0]&&void 0!==o[0].contentCloning,p=l&&o[0].contentCloning||!l&&i.contentCloning,c=o[0]&&void 0!==o[0].debug,h=c&&o[0].debug||!c&&i.debug;return this.length>1&&(a instanceof t||\"object\"==typeof a&&null!=a&&a.tagName)&&!p&&h&&console.log(e),this.each(function(){var i=!1,e=t(this),n=e.data(\"tooltipster-ns\"),s=null;n?r?i=!0:h&&(console.log(\"Tooltipster: one or more tooltips are already attached to the element below. Ignoring.\"),console.log(this)):i=!0,i&&(s=new t.Tooltipster(this,o[0]),n||(n=[]),n.push(s.__namespace),e.data(\"tooltipster-ns\",n),e.data(s.__namespace,s),s.__options.functionInit&&s.__options.functionInit.call(s,s,{origin:this}),s._trigger(\"init\")),t.tooltipster.__instancesLatestArr.push(s)}),this},s.prototype={__init:function(i){this.__$tooltip=i,this.__$tooltip.css({left:0,overflow:\"hidden\",position:\"absolute\",top:0}).find(\".tooltipster-content\").css(\"overflow\",\"auto\"),this.$container=t('<div class=\"tooltipster-ruler\"></div>').append(this.__$tooltip).appendTo(e.window.document.body)},__forceRedraw:function(){var t=this.__$tooltip.parent();this.__$tooltip.detach(),this.__$tooltip.appendTo(t)},constrain:function(t,i){return this.constraints={width:t,height:i},this.__$tooltip.css({display:\"block\",height:\"\",overflow:\"auto\",width:t}),this},destroy:function(){this.__$tooltip.detach().find(\".tooltipster-content\").css({display:\"\",overflow:\"\"}),this.$container.remove()},free:function(){return this.constraints=null,this.__$tooltip.css({display:\"\",height:\"\",overflow:\"visible\",width:\"\"}),this},measure:function(){this.__forceRedraw();var t=this.__$tooltip[0].getBoundingClientRect(),i={size:{height:t.height||t.bottom-t.top,width:t.width||t.right-t.left}};if(this.constraints){var o=this.__$tooltip.find(\".tooltipster-content\"),n=this.__$tooltip.outerHeight(),s=o[0].getBoundingClientRect(),r={height:n<=this.constraints.height,width:t.width<=this.constraints.width&&s.width>=o[0].scrollWidth-1};i.fits=r.height&&r.width}return e.IE&&e.IE<=11&&i.size.width!==e.window.document.documentElement.clientWidth&&(i.size.width=Math.ceil(i.size.width)+1),i}};var a=navigator.userAgent.toLowerCase();-1!=a.indexOf(\"msie\")?e.IE=parseInt(a.split(\"msie\")[1]):-1!==a.toLowerCase().indexOf(\"trident\")&&-1!==a.indexOf(\" rv:11\")?e.IE=11:-1!=a.toLowerCase().indexOf(\"edge/\")&&(e.IE=parseInt(a.toLowerCase().split(\"edge/\")[1]));return t.tooltipster._plugin({name:\"tooltipster.sideTip\",instance:{__defaults:function(){return{arrow:!0,distance:6,functionPosition:null,maxWidth:null,minIntersection:16,minWidth:0,position:null,side:\"top\",viewportAware:!0,defaultStyles:{backgroundColor:\"#fff\",textColor:\"#000\"}}},__init:function(t){var i=this;i.__instance=t,i.__namespace=\"tooltipster-sideTip-\"+Math.round(1e6*Math.random()),i.__previousState=\"closed\",i.__options,i.__optionsFormat(),i.__instance._on(\"state.\"+i.__namespace,function(t){\"closed\"==t.state?i.__close():\"appearing\"==t.state&&\"closed\"==i.__previousState&&i.__create(),i.__previousState=t.state}),i.__instance._on(\"options.\"+i.__namespace,function(){i.__optionsFormat()}),i.__instance._on(\"reposition.\"+i.__namespace,function(t){i.__reposition(t.event,t.helper)})},__close:function(){this.__instance.content()instanceof t&&this.__instance.content().detach(),this.__instance._$tooltip.remove(),this.__instance._$tooltip=null},__create:function(){var i=this.__instance.__options.styles,o=t('<div class=\"tooltipster-base tooltipster-sidetip\"><div class=\"tooltipster-box\"><div class=\"tooltipster-content\"></div></div><div class=\"tooltipster-arrow\"><div class=\"tooltipster-arrow-uncropped\"><div class=\"tooltipster-arrow-border\"></div><div class=\"tooltipster-arrow-background\"></div></div></div></div>');o.find(\".tooltipster-box\").css({color:i.textColor?i.textColor:this.__options.defaultStyles.textColor,backgroundColor:i.backgroundColor?i.backgroundColor:this.__options.defaultStyles.backgroundColor}),o.find(\".tooltipster-arrow-border\").css({backgroundColor:i.backgroundColor?i.backgroundColor:this.__options.defaultStyles.backgroundColor}),this.__options.arrow||o.find(\".tooltipster-box\").css(\"margin\",0).end().find(\".tooltipster-arrow\").hide(),this.__options.minWidth&&o.css(\"min-width\",this.__options.minWidth+\"px\"),this.__options.maxWidth&&o.css(\"max-width\",this.__options.maxWidth+\"px\"),this.__instance._$tooltip=o,this.__instance._trigger(\"created\")},__destroy:function(){this.__instance._off(\".\"+self.__namespace)},__optionsFormat:function(){if(this.__options=this.__instance._optionsExtract(\"tooltipster.sideTip\",this.__defaults()),this.__options.position&&(this.__options.side=this.__options.position),\"object\"!=typeof this.__options.distance&&(this.__options.distance=[this.__options.distance]),this.__options.distance.length<4&&(void 0===this.__options.distance[1]&&(this.__options.distance[1]=this.__options.distance[0]),void 0===this.__options.distance[2]&&(this.__options.distance[2]=this.__options.distance[0]),void 0===this.__options.distance[3]&&(this.__options.distance[3]=this.__options.distance[1])),this.__options.distance={top:this.__options.distance[0],right:this.__options.distance[1],bottom:this.__options.distance[2],left:this.__options.distance[3]},\"string\"==typeof this.__options.side){this.__options.side=[this.__options.side,{top:\"bottom\",right:\"left\",bottom:\"top\",left:\"right\"}[this.__options.side]],\"left\"==this.__options.side[0]||\"right\"==this.__options.side[0]?this.__options.side.push(\"top\",\"bottom\"):this.__options.side.push(\"right\",\"left\")}6===t.tooltipster._env.IE&&!0!==this.__options.arrow&&(this.__options.arrow=!1)},__reposition:function(i,o){var e,n=this,s=n.__targetFind(o),r=[];n.__instance._$tooltip.detach();var _=n.__instance._$tooltip.clone(),a=t.tooltipster._getRuler(_),l=!1,p=n.__instance.option(\"animation\");switch(p&&_.removeClass(\"tooltipster-\"+p),t.each([\"window\",\"document\"],function(e,p){var c=null;if(n.__instance._trigger({container:p,helper:o,satisfied:l,takeTest:function(t){c=t},results:r,type:\"positionTest\"}),1==c||0!=c&&0==l&&(\"window\"!=p||n.__options.viewportAware))for(e=0;e<n.__options.side.length;e++){var h={horizontal:0,vertical:0},d=n.__options.side[e];\"top\"==d||\"bottom\"==d?h.vertical=n.__options.distance[d]:h.horizontal=n.__options.distance[d],n.__sideChange(_,d),t.each([\"natural\",\"constrained\"],function(t,e){if(c=null,n.__instance._trigger({container:p,event:i,helper:o,mode:e,results:r,satisfied:l,side:d,takeTest:function(t){c=t},type:\"positionTest\"}),1==c||0!=c&&0==l){var _={container:p,distance:h,fits:null,mode:e,outerSize:null,side:d,size:null,target:s[d],whole:null},u=(\"natural\"==e?a.free():a.constrain(o.geo.available[p][d].width-h.horizontal,o.geo.available[p][d].height-h.vertical)).measure();if(_.size=u.size,_.outerSize={height:u.size.height+h.vertical,width:u.size.width+h.horizontal},\"natural\"==e?o.geo.available[p][d].width>=_.outerSize.width&&o.geo.available[p][d].height>=_.outerSize.height?_.fits=!0:_.fits=!1:_.fits=u.fits,\"window\"==p&&(_.fits?_.whole=\"top\"==d||\"bottom\"==d?o.geo.origin.windowOffset.right>=n.__options.minIntersection&&o.geo.window.size.width-o.geo.origin.windowOffset.left>=n.__options.minIntersection:o.geo.origin.windowOffset.bottom>=n.__options.minIntersection&&o.geo.window.size.height-o.geo.origin.windowOffset.top>=n.__options.minIntersection:_.whole=!1),r.push(_),_.whole)l=!0;else if(\"natural\"==_.mode&&(_.fits||_.size.width<=o.geo.available[p][d].width))return!1}})}}),n.__instance._trigger({edit:function(t){r=t},event:i,helper:o,results:r,type:\"positionTested\"}),r.sort(function(t,i){return t.whole&&!i.whole?-1:!t.whole&&i.whole?1:t.whole&&i.whole?(o=n.__options.side.indexOf(t.side))<(e=n.__options.side.indexOf(i.side))?-1:o>e?1:\"natural\"==t.mode?-1:1:t.fits&&!i.fits?-1:!t.fits&&i.fits?1:t.fits&&i.fits?(o=n.__options.side.indexOf(t.side))<(e=n.__options.side.indexOf(i.side))?-1:o>e?1:\"natural\"==t.mode?-1:1:\"document\"==t.container&&\"bottom\"==t.side&&\"natural\"==t.mode?-1:1;var o,e}),(e=r[0]).coord={},e.side){case\"left\":case\"right\":e.coord.top=Math.floor(e.target-e.size.height/2);break;case\"bottom\":case\"top\":e.coord.left=Math.floor(e.target-e.size.width/2)}switch(e.side){case\"left\":e.coord.left=o.geo.origin.windowOffset.left-e.outerSize.width;break;case\"right\":e.coord.left=o.geo.origin.windowOffset.right+e.distance.horizontal;break;case\"top\":e.coord.top=o.geo.origin.windowOffset.top-e.outerSize.height;break;case\"bottom\":e.coord.top=o.geo.origin.windowOffset.bottom+e.distance.vertical}\"window\"==e.container?\"top\"==e.side||\"bottom\"==e.side?e.coord.left<0?o.geo.origin.windowOffset.right-this.__options.minIntersection>=0?e.coord.left=0:e.coord.left=o.geo.origin.windowOffset.right-this.__options.minIntersection-1:e.coord.left>o.geo.window.size.width-e.size.width&&(o.geo.origin.windowOffset.left+this.__options.minIntersection<=o.geo.window.size.width?e.coord.left=o.geo.window.size.width-e.size.width:e.coord.left=o.geo.origin.windowOffset.left+this.__options.minIntersection+1-e.size.width):e.coord.top<0?o.geo.origin.windowOffset.bottom-this.__options.minIntersection>=0?e.coord.top=0:e.coord.top=o.geo.origin.windowOffset.bottom-this.__options.minIntersection-1:e.coord.top>o.geo.window.size.height-e.size.height&&(o.geo.origin.windowOffset.top+this.__options.minIntersection<=o.geo.window.size.height?e.coord.top=o.geo.window.size.height-e.size.height:e.coord.top=o.geo.origin.windowOffset.top+this.__options.minIntersection+1-e.size.height):(e.coord.left>o.geo.window.size.width-e.size.width&&(e.coord.left=o.geo.window.size.width-e.size.width),e.coord.left<0&&(e.coord.left=0)),n.__sideChange(_,e.side),o.tooltipClone=_[0],o.tooltipParent=n.__instance.option(\"parent\").parent[0],o.mode=e.mode,o.whole=e.whole,o.origin=n.__instance._$origin[0],o.tooltip=n.__instance._$tooltip[0],delete e.container,delete e.fits,delete e.mode,delete e.outerSize,delete e.whole,e.distance=e.distance.horizontal||e.distance.vertical;var c,h,d,u=t.extend(!0,{},e);if(n.__instance._trigger({edit:function(t){e=t},event:i,helper:o,position:u,type:\"position\"}),n.__options.functionPosition){var g=n.__options.functionPosition.call(n,n.__instance,o,u);g&&(e=g)}a.destroy(),\"top\"==e.side||\"bottom\"==e.side?(c={prop:\"left\",val:e.target-e.coord.left},h=e.size.width-this.__options.minIntersection):(c={prop:\"top\",val:e.target-e.coord.top},h=e.size.height-this.__options.minIntersection),c.val<this.__options.minIntersection?c.val=this.__options.minIntersection:c.val>h&&(c.val=h),d=o.geo.origin.fixedLineage?o.geo.origin.windowOffset:{left:o.geo.origin.windowOffset.left+o.geo.window.scroll.left,top:o.geo.origin.windowOffset.top+o.geo.window.scroll.top},e.coord={left:d.left+(e.coord.left-o.geo.origin.windowOffset.left),top:d.top+(e.coord.top-o.geo.origin.windowOffset.top)},n.__sideChange(n.__instance._$tooltip,e.side),o.geo.origin.fixedLineage?n.__instance._$tooltip.css(\"position\",\"fixed\"):n.__instance._$tooltip.css(\"position\",\"\"),n.__instance._$tooltip.css({left:e.coord.left,top:e.coord.top,height:e.size.height,width:e.size.width}).find(\".tooltipster-arrow\").css({left:\"\",top:\"\"}).css(c.prop,c.val),n.__instance._$tooltip.appendTo(n.__instance.option(\"parent\")),n.__instance._trigger({type:\"repositioned\",event:i,position:e})},__sideChange:function(t,i){t.removeClass(\"tooltipster-bottom\").removeClass(\"tooltipster-left\").removeClass(\"tooltipster-right\").removeClass(\"tooltipster-top\").addClass(\"tooltipster-\"+i)},__targetFind:function(t){var i={},o=this.__instance._$origin[0].getClientRects();o.length>1&&(1==this.__instance._$origin.css(\"opacity\")&&(this.__instance._$origin.css(\"opacity\",.99),o=this.__instance._$origin[0].getClientRects(),this.__instance._$origin.css(\"opacity\",1)));if(o.length<2)i.top=Math.floor(t.geo.origin.windowOffset.left+t.geo.origin.size.width/2),i.bottom=i.top,i.left=Math.floor(t.geo.origin.windowOffset.top+t.geo.origin.size.height/2),i.right=i.left;else{var e=o[0];i.top=Math.floor(e.left+(e.right-e.left)/2),e=o.length>2?o[Math.ceil(o.length/2)-1]:o[0],i.right=Math.floor(e.top+(e.bottom-e.top)/2),e=o[o.length-1],i.bottom=Math.floor(e.left+(e.right-e.left)/2),e=o.length>2?o[Math.ceil((o.length+1)/2)-1]:o[o.length-1],i.left=Math.floor(e.top+(e.bottom-e.top)/2)}return i}}}),t});\n","Amasty_Shopby/js/utils/color.js":"/**\n * Amasty Shopby helpers\n */\n\ndefine([\n    'jquery',\n    'jquery-ui-modules/effect'\n], function ($) {\n    'use strict';\n\n    return {\n        color_constants: {\n            gradient: 0.675,\n            shadow: 0.8,\n            hover: 0.45\n        },\n\n        /**\n         * Generate gradient color depending on the specified percentage\n         *\n         * @param {String} color - default\n         * @param {String} type - type of gradient\n         *\n         * @return {String} new gradient color\n         */ // eslint-disable-next-line consistent-return\n        getGradient: function (color, type) {\n            var lightenColor = this._getLightness(color, this.color_constants.gradient);\n\n            if (type === 'vertical') {\n                return 'linear-gradient(160deg, ' + lightenColor + '40%, ' + color + ' 100%)';\n            }\n\n            if (type === 'horizontal') {\n                return 'linear-gradient(270deg,' + color + ' 0%, ' + lightenColor + ' 100%)';\n            }\n        },\n\n        /**\n         * Generate Box Shadow depending on the specified percentage\n         *\n         * @param {String} color - default\n         *\n         * @return {String} new box shadow\n         */\n        getShadow: function (color) {\n            var shadowColor = this._getLightness(color, this.color_constants.shadow);\n\n            return '0 3px 4px ' + shadowColor;\n        },\n\n        /**\n         * Generate Hover color depending on the specified percentage\n         *\n         * @param {String} color - default\n         * @param {Number} [percent] - default\n         *\n         * @return {String} new color\n         */\n        getHover: function (color, percent) {\n            // eslint-disable-next-line no-param-reassign\n            percent = percent || this.color_constants.hover;\n\n            return this._getLightness(color, percent);\n        },\n\n        /**\n         * Generate lightness color depending on the specified percentage\n         *\n         * @param {String} color - default\n         * @param {Number} percent - default\n         *\n         * @return {String} new color\n         */\n        _getLightness: function (color, percent) {\n            return $.Color(color).lightness(percent).toRgbaString();\n        }\n    };\n});\n","Amasty_Shopby/js/components/slider-settings.js":"/**\n * Amasty Shopby slider settings Ui Component\n */\n\ndefine([\n    'jquery',\n    'uiComponent',\n    'amshopby_color',\n    'ko'\n], function ($, Component, colorHelper, ko) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            shadow: ko.observable(),\n            gradients: {\n                vertical: ko.observable(),\n                horizontal: ko.observable()\n            }\n        },\n\n        /**\n         * Init observable variables\n         *\n         * @return {Object}\n         */\n        initObservable: function () {\n            var self = this;\n\n            self._super()\n                .observe({\n                    color: self.default.color,\n                    style: self.default.style\n                });\n\n            self.gradients.vertical(colorHelper.getGradient(self.default.color, 'vertical'));\n            self.gradients.horizontal(colorHelper.getGradient(self.default.color, 'horizontal'));\n            self.shadow(colorHelper.getShadow(self.default.color));\n\n            return self;\n        },\n\n        /**\n         * Initialize jQuery Color Picker for target Node\n         *\n         * @params {Object} node\n         */\n        initColorPicker: function (node) {\n            var self = this;\n\n            $(node).spectrum({\n                showAlpha: true,\n                preferredFormat: 'rgb',\n                showButtons: false,\n                color: self.default.color,\n                showInput: true,\n                hide: function (color) {\n                    self._changeColor(color.toRgbString());\n                },\n                move: function (color) {\n                    self._changeColor(color.toRgbString());\n                }\n            })\n        },\n\n        /**\n         * Change Current Colors\n         *\n         * @params {String} color - currentColor\n         */\n        _changeColor: function (color) {\n            this.color(color);\n            this.gradients.vertical(colorHelper.getGradient(color, 'vertical'));\n            this.gradients.horizontal(colorHelper.getGradient(color, 'horizontal'));\n            this.shadow(colorHelper.getShadow(color));\n        }\n    });\n});\n","Amasty_Customform/js/form-init.js":"define([\n    'jquery',\n    'jquery-ui-modules/tabs',\n    'jquery/validate'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.amFormInit', {\n        options: {\n            formSelector: '[data-amcform-js=\"multi-page\"]',\n            nextButton: '[data-amcform-js=\"next-button\"]',\n            prevButton: '[data-amcform-js=\"prev-button\"]',\n            pageTitles: '[data-amcform-js=\"page-titles\"]'\n        },\n\n        _create: function () {\n            var self = this;\n\n            // Call initialization for Ajax events\n            $(document).on('amcform-init-multipage', function (e, form) {\n                var $form = form.find('[data-amcform-js=\"multi-page\"]');\n\n                if ($form.length) {\n                    self.initialization($form);\n                }\n            });\n\n            self.initialization(self.element);\n        },\n\n        initialization: function (element) {\n            var self = this,\n                stepsWrap = element.find(self.options.pageTitles);\n\n            $.ui.tabs({active: 0}, element);\n\n            if (stepsWrap.children().length === 1) {\n                stepsWrap.remove();\n            }\n\n            $(self.options.pageTitles).children().each(function (index) {\n                if (index !== 0) {\n                    $(this).addClass('-disabled');\n                }\n            });\n\n            self.nextButtonBehavior();\n            self.prevButtonBehavior();\n            self.navigatePageForm();\n        },\n\n        /**\n         *  Behavior for next button: go to the next page\n         */\n\n        nextButtonBehavior: function () {\n            var self = this;\n\n            $(self.options.nextButton).off().on('click', function () {\n                var pageId = $(this).parents('.amcform-page-wrap').attr('id'),\n                    title = $(this)\n                        .parents(self.options.formSelector)\n                        .find('[href=\"#' + pageId + '\"]')\n                        .parent();\n\n                if ($(this).parents('form').valid()) {\n                    self.checkFormScrolling(this);\n                    title.addClass('-done');\n                    title.removeClass('-error');\n                    title.next().removeClass('-disabled').find('a').trigger('click');\n                } else {\n                    title.addClass('-error');\n                }\n            });\n        },\n\n        /**\n         *  Behavior for prev button: go to the prev page\n         */\n\n        prevButtonBehavior: function () {\n            var self = this;\n\n            $(self.options.prevButton).off().on('click', function () {\n                self.checkFormScrolling(this);\n                var pageId = $(this).parents('.amcform-page-wrap').attr('id'),\n                    title = $(this)\n                        .parents(self.options.formSelector)\n                        .find('[href=\"#' + pageId + '\"]')\n                        .parent();\n                title.prev().find('a').trigger('click');\n            });\n        },\n\n        /**\n         *  Style behavior of page headers\n         */\n\n        navigatePageForm: function () {\n            var self = this;\n\n            $(self.options.pageTitles).find('li').off().on('click', function () {\n                if ($(this).hasClass('-disabled')) {\n                    return\n                }\n\n                if ($(this).hasClass('-done')) {\n                    $(this).removeClass('-done').addClass('-active');\n                }\n\n                if ($(this).prevUntil().hasClass('-active')) {\n                    $(this).prevUntil().removeClass('-active').addClass('-done');\n                }\n\n                self.updatePages(\n                    $(this).parents(self.options.formSelector),\n                    $(this).find('a')\n                );\n            });\n        },\n\n        /**\n         * Fix default scrolling in the browser\n         * @param page - DOM element\n         */\n\n        checkFormScrolling: function (page) {\n            var form = $(page).parents('[data-amcform-js=\"multi-page\"]'),\n                docViewTop = $(window).scrollTop(),\n                elemTop = form.offset().top,\n                isPopup = form.parents('.amform-popup').length;\n\n            if (docViewTop > elemTop && !isPopup) {\n                $('html, body').animate({\n                    scrollTop: (form.offset().top) - 50\n                },0);\n            }\n        },\n\n        /**\n         * Set class for not current pages for ignore jquery validate\n         * @param form\n         * @param pageTitle\n         */\n\n        updatePages: function (form, pageTitle) {\n            form.find('input, textarea').addClass('amcform-hidden-page');\n            form\n                .find(pageTitle.attr('href') + ' input, ' + pageTitle.attr('href') + ' textarea')\n                .removeClass('amcform-hidden-page');\n        }\n    });\n\n    return $.mage.amFormInit;\n});\n","Amasty_Customform/js/form-data.js":"define([\n    \"jquery\",\n    'Amasty_Customform/js/form-builder',\n    'Amasty_Customform/js/form-render',\n    'Amasty_Customform/js/am-google-map'\n], function ($, customFormBuilder) {\n    'use strict';\n\n    $.widget('mage.amformData', {\n        _create: function () {\n            var self = this;\n\n            self.options.formWrapper = $('[data-amcform-js=\"form-builder-wrap\"]');\n            self.options.formEditor = $('[data-amcform-js=\"fb-editor\"]');\n            self.options.addNewPage = $('[data-amcform-js=\"add-new-page\"]');\n            self.options.deletePage = '[data-amcform-js=\"delete-tab\"]';\n\n            self.generateEventsListener();\n\n            self.options.formEditor.customFormBuilder(self.options);\n        },\n\n        /**\n         * Set events listeners on form builder\n         */\n\n        generateEventsListener: function () {\n            var self = this,\n                tabsWrap = '[data-amcform-js=\"tabs-wrap\"]',\n                tab = '[data-amcform-role=\"page-link\"]',\n                tabForKeyboard = tab + ', [data-amcform-role=\"page\"], [data-amcform-js=\"add-new-page\"]',\n                formJson = '[name=\"form_json\"]',\n                keyCodes = [$.ui.keyCode.RIGHT, $.ui.keyCode.DOWN, $.ui.keyCode.LEFT, $.ui.keyCode.UP];\n\n            // jQ UI tabs\n            self.options.formWrapper.tabs({\n                beforeActivate: function (event, ui) {\n                    if (ui.newPanel.selector === \"#new-page\") {\n                        return false;\n                    }\n                }\n            });\n\n            // Save form config\n            $('#edit_form').on('beforeSubmit', function (event, submitData, handlerName) {\n                if (['saveAndContinueEdit', 'save'].indexOf(handlerName) != -1) {\n                    self.options.formEditor.customFormBuilder('generateSaveEvent', event);\n                }\n            });\n\n            // Switch between page tabs\n            $(tabsWrap).on('click', tab, function () {\n                self.options.formEditor.customFormBuilder('navigatePageForm', this);\n            });\n\n            // Switch between tpage tabs via keyboard\n            $(tabsWrap).on('keydown', tabForKeyboard, function (event) {\n                if (keyCodes.indexOf(event.keyCode) != -1) {\n                    self.options.formEditor.customFormBuilder('navigateKeyboard', this);\n                }\n            });\n\n            // Delete page\n            $(tabsWrap).on('click', self.options.deletePage, function (e) {\n                self.options.formEditor.customFormBuilder('deleteCurentPage', this, e);\n            });\n\n            // Add new page\n            self.options.addNewPage.on('click', function () {\n                $(formJson).val('[]');\n                self.options.formEditor.customFormBuilder('createNewPage');\n            });\n        }\n    });\n\n    return $.mage.amformData;\n});\n","Amasty_Customform/js/form-builder-helper.js":"/* eslint-disable one-var, vars-on-top, max-depth, no-shadow */\n\ndefine([\n    'jquery',\n    'underscore',\n    'mage/adminhtml/events',\n    'mage/adminhtml/wysiwyg/tiny_mce/setup',\n    'Magento_Ui/js/modal/modal'\n], function ($, _) {\n    'use strict';\n\n    // compatibility for M244\n    var tinymce = window.tinymce;\n\n    if (_.isUndefined(tinymce)) {\n        return;\n    }\n\n    if (!('remove' in Element.prototype)) {\n        Element.prototype.remove = function () {\n            if (this.parentNode) {\n                this.parentNode.removeChild(this);\n            }\n        };\n    }\n\n    // Event polyfill\n    if (typeof Event !== 'function') {\n        (function () {\n            window.Event = function (evt) {\n                var event = document.createEvent('Event');\n\n                event.initEvent(evt, true, true);\n                return event;\n            };\n        })();\n    }\n\n    // Object.assign polyfill\n    if (typeof Object.assign != 'function') {\n        Object.assign = function (target) {\n            'use strict';\n\n            if (target === null) {\n                throw new TypeError('Cannot convert undefined or null to object');\n            }\n\n            target = Object(target);\n\n            for (var index = 1; index < arguments.length; index++) {\n                var source = arguments[index];\n\n                if (source !== null) {\n                    for (var key in source) {\n                        if (Object.prototype.hasOwnProperty.call(source, key)) {\n                            target[key] = source[key];\n                        }\n                    }\n                }\n            }\n            return target;\n        };\n    }\n\n    var _typeof = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol' ? function (obj) {\n        return typeof obj;\n    } : function (obj) {\n        return obj && typeof Symbol === 'function' && obj.constructor === Symbol\n            && obj !== Symbol.prototype ? 'symbol' : typeof obj;\n    },\n\n     fbUtils = {};\n\n    // cleaner syntax for testing indexOf element\n    fbUtils.inArray = function (needle, haystack) {\n        return haystack.indexOf(needle) !== -1;\n    };\n\n    /**\n     * Remove null or undefined values\n     * @param  {Object} attrs {attrName: attrValue}\n     * @return {Object} Object trimmed of null or undefined values\n     */\n    fbUtils.trimObj = function (attrs) {\n        var xmlRemove = [null, undefined, false, 'false'];\n\n        for (var attr in attrs) {\n            if (fbUtils.inArray(attrs[attr], xmlRemove)) {\n                delete attrs[attr];\n            } else if (Array.isArray(attrs[attr])) {\n                if (!attrs[attr].length) {\n                    delete attrs[attr];\n                }\n            }\n        }\n\n        return attrs;\n    };\n\n    /**\n     * Test if attribute is a valid HTML attribute\n     * @param  {String} attr\n     * @return {Boolean}\n     */\n    fbUtils.validAttr = function (attr) {\n        var invalid = [\n            'values',\n            'enableOther',\n            'other',\n            'label',\n            // 'style',\n            'subtype'\n        ];\n\n        return !fbUtils.inArray(attr, invalid);\n    };\n\n    /**\n     * Convert an attrs object into a string\n     *\n     * @param  {Object} attrs object of attributes for markup\n     * @return {string}\n     */\n    fbUtils.attrString = function (attrs) {\n        var attributes = [];\n\n        for (var attr in attrs) {\n            if (attr === 'map_position' || attr === 'zoom') {\n                continue;\n            }\n\n            if (attrs.hasOwnProperty(attr) && fbUtils.validAttr(attr)) {\n                attr = fbUtils.safeAttr(attr, attrs[attr]);\n                attributes.push(attr.name + attr.value);\n            }\n        }\n        return attributes.join(' ');\n    };\n\n    /**\n     * Convert attributes to markup safe strings\n     * @param  {String} name  attribute name\n     * @param  {String} value attribute value\n     * @return {Object} {attrName: attrValue}\n     */\n    fbUtils.safeAttr = function (name, value) {\n        name = fbUtils.safeAttrName(name);\n\n        if (value) {\n            if (Array.isArray(value)) {\n                value = value.join(' ');\n            } else if (typeof value === 'boolean') {\n                value = value.toString();\n            }\n        }\n\n        value = value ? '=\"' + value + '\"' : '';\n\n        return {\n            name: name,\n            value: value\n        };\n    };\n\n    fbUtils.safeAttrName = function (name) {\n        var safeAttr = {\n            className: 'class'\n        };\n\n        return safeAttr[name] || fbUtils.hyphenCase(name);\n    };\n\n    /**\n     * Convert strings into lowercase-hyphen\n     *\n     * @param  {String} str\n     * @return {String}\n     */\n    fbUtils.hyphenCase = function (str) {\n        str = str.replace(/[^\\w\\s\\-]/gi, '');\n        str = str.replace(/([A-Z])/g, function ($1) {\n            return '-' + $1.toLowerCase();\n        });\n\n        return str.replace(/\\s/g, '-').replace(/^-+/g, '');\n    };\n\n    /**\n     * convert a hyphenated string to camelCase\n     * @param  {String} str\n     * @return {String}\n     */\n    fbUtils.camelCase = function (str) {\n        return str.replace(/-([a-z])/g, function (m, w) {\n            return w.toUpperCase();\n        });\n    };\n\n    /**\n     * Generate markup wrapper where needed\n     *\n     * @param  {string} tag\n     * @return {String}\n     */\n    fbUtils.markup = function (tag) {\n        var content = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '',\n         attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n\n         contentType = void 0,\n            field = document.createElement(tag),\n\n            getContentType = function getContentType(content) {\n                return Array.isArray(content)\n                    ? 'array' : typeof content === 'undefined' ? 'undefined' : _typeof(content);\n            },\n\n            appendContent = {\n                string: function string(content) {\n                    field.innerHTML = content;\n                },\n                object: function object(content) {\n                    return field.appendChild(content);\n                },\n                array: function array(content) {\n                    for (var i = 0; i < content.length; i++) {\n                        contentType = getContentType(content[i]);\n                        appendContent[contentType](content[i]);\n                    }\n                }\n            };\n\n        for (var attr in attrs) {\n            if (attrs.hasOwnProperty(attr)) {\n                var name = fbUtils.safeAttrName(attr);\n\n                field.setAttribute(name, attrs[attr]);\n            }\n        }\n\n        contentType = getContentType(content);\n\n        if (content) {\n            appendContent[contentType].call(this, content);\n        }\n\n        return field;\n    };\n\n    /**\n     * Convert html element attributes to key/value object\n     * @return {Object} ex: {attrName: attrValue}\n     * @param {Object} elem\n     */\n    fbUtils.parseAttrs = function (elem) {\n        var attrs = elem.attributes,\n         data = {};\n\n        fbUtils.forEach(attrs, function (attr) {\n            var attrVal = attrs[attr].value;\n\n            if (attrVal.match(/false|true/g)) {\n                attrVal = attrVal === 'true';\n            } else if (attrVal.match(/undefined/g)) {\n                attrVal = undefined;\n            }\n\n            if (attrVal) {\n                data[attrs[attr].name] = attrVal;\n            }\n        });\n\n        return data;\n    };\n\n    /**\n     * Convert field options to optionData\n     * @return {Array} optionData array\n     * @param {Object} field\n     */\n    fbUtils.parseOptions = function (field) {\n        var options = field.getElementsByTagName('option'),\n            optionData = {},\n            data = [];\n\n        if (options.length) {\n            for (var i = 0; i < options.length; i++) {\n                optionData = fbUtils.parseAttrs(options[i]);\n                optionData.label = options[i].textContent;\n                data.push(optionData);\n            }\n        }\n\n        return data;\n    };\n\n    /**\n     * Parse XML formData\n     * @param  {String} xmlString\n     * @return {Array} formData array\n     */\n    fbUtils.parseXML = function (xmlString) {\n        var parser = new window.DOMParser(),\n            xml = parser.parseFromString(xmlString, 'text/xml'),\n            formData = [];\n\n        if (xml) {\n            var fields = xml.getElementsByTagName('field');\n\n            for (var i = 0; i < fields.length; i++) {\n                var fieldData = fbUtils.parseAttrs(fields[i]);\n\n                if (fields[i].children.length) {\n                    fieldData.values = fbUtils.parseOptions(fields[i]);\n                }\n\n                formData.push(fieldData);\n            }\n        }\n\n        return formData;\n    };\n\n    /**\n     * Escape markup, so it can be displayed rather than rendered\n     * @param  {String} html markup\n     * @return {String} escaped html\n     */\n    fbUtils.escapeHtml = function (html) {\n        var escapeElement = document.createElement('textarea');\n\n        escapeElement.textContent = html;\n\n        return escapeElement.innerHTML;\n    };\n\n    // Escape an attribute\n    fbUtils.escapeAttr = function (str) {\n        var match = {\n            '\"': '&quot;',\n          //  '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;'\n        };\n\n        function replaceTag(tag) {\n            return match[tag] || tag;\n        }\n\n        return typeof str === 'string' ? str.replace(/[\"&<>]/g, replaceTag) : str;\n    };\n\n    // Escape attributes\n    fbUtils.escapeAttrs = function (attrs) {\n        for (var attr in attrs) {\n            if (attrs.hasOwnProperty(attr)) {\n                attrs[attr] = fbUtils.escapeAttr(attrs[attr]);\n            }\n        }\n\n        return attrs;\n    };\n\n    // forEach that can be used on nodeList\n    fbUtils.forEach = function (array, callback, scope) {\n        for (var i = 0; i < array.length; i++) {\n            callback.call(scope, i, array[i]); // passes back stuff we need\n        }\n    };\n\n    /**\n     * Remove duplicates from an array of elements\n     * @return {Array} array with only unique values\n     * @param {Array} array\n     */\n    fbUtils.unique = function (array) {\n        return array.filter(function (elem, pos, arr) {\n            return arr.indexOf(elem) === pos;\n        });\n    };\n\n    /**\n     * Generate preview markup\n     * @param {object} fieldData\n     * @param {object} opts\n     * @return {string} preview markup for field\n     */\n    fbUtils.fieldRender = function (fieldData, opts) {\n        var preview = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false,\n            utils = fbUtils;\n\n        fieldData.placeholder = fieldData.placeholder\n            ? fbUtils.cutJs(utils.escapeAttr(fieldData.placeholder))\n            : '';\n        fieldData.label = fieldData.label\n            ? fbUtils.cutJs(utils.escapeAttr(fieldData.label))\n            : '';\n\n        var fieldMarkup = '',\n            fieldLabel = '',\n            optionsMarkup = '',\n            fieldLabelText = fieldData.label || '',\n            fieldDesc = fieldData.description || '',\n            fieldRequired = '',\n            fieldValue = fieldData.value,\n            fieldOptions = fieldData.values;\n\n        fieldData.name = preview ? fieldData.name + '-preview' : fieldData.name;\n        fieldData.id = fieldData.name;\n        fieldData.name = fieldData.multiple ? fieldData.name + '[]' : fieldData.name;\n        if (utils.inArray(\n            fieldData.type,\n            ['textinput', 'number', 'file', 'dropdown', 'listbox', 'textarea']\n        ) && fieldData.className !== 'form-control'\n        ) {\n            fieldData.className += ' form-control';\n        }\n\n        fieldData.type = fieldData.subtype || fieldData.type;\n        if (fieldData.type === 'datetime') {\n            fieldData.type = 'datetime-local';\n        }\n\n        if (fieldData.required) {\n            fieldData.required = null;\n            fieldData['aria-required'] = 'true';\n            fieldRequired = '<span class=\"required\">*</span>';\n        }\n\n        if (fieldData.type !== 'hidden') {\n            if (fieldDesc) {\n                fieldDesc = '<span class=\"tooltip-element\" tooltip=\"' + fieldDesc + '\">?</span>';\n            }\n\n            fieldLabel = '<label for=\"' + fieldData.id + '\" class=\"fb-' + fieldData.type + '-label\">'\n                + fieldLabelText + ' ' + fieldRequired + ' ' + fieldDesc + '</label>';\n        }\n\n        var fieldLabelVal = fieldData.label;\n\n        delete fieldData.label;\n        delete fieldData.description;\n\n        if (fieldData.type === 'wysiwyg'\n            || fieldData.type === 'textarea'\n            || fieldData.type === 'rich-text'\n        ) {\n            delete fieldData.value;\n        }\n\n        var fieldDataString = fbUtils.attrString(fieldData),\n\n        /* rendering text fields*/\n         withBr = true;\n\n        switch (fieldData.type) {\n            case 'text':\n                fieldData.type = 'div';\n                break;\n            case 'hone':\n                fieldData.type = 'h1';\n                break;\n            case 'htwo':\n                fieldData.type = 'h2';\n                break;\n            case 'hthree':\n                fieldData.type = 'h3';\n                break;\n            case 'checkboxtwo':\n                fieldData.type = 'checkbox';\n                withBr = false;\n                break;\n            case 'radiotwo':\n                fieldData.type = 'radio';\n            // eslint-disable-next-line no-fallthrough\n            case 'rating':\n                withBr = false;\n                break;\n            case 'listbox':\n                fieldData.type = 'dropdown';\n                fieldData.multiple = true;\n                break;\n            case 'wysiwyg':\n                fieldData.type = 'wysiwyg';\n                break;\n        }\n\n        switch (fieldData.type) {\n            case 'wysiwyg':\n                fieldMarkup = '<textarea ' + fieldDataString + '>' + (fieldValue || '') + '</textarea>';\n                break;\n            case 'textarea':\n            case 'rich-text':\n                delete fieldData.type;\n                var fieldVal = fieldValue || '';\n\n                fieldMarkup = fieldLabel + '<textarea ' + fieldDataString + '>' + fieldVal + '</textarea>';\n                break;\n            case 'dropdown':\n                var optionAttrsString;\n\n                fieldData.type = fieldData.type.replace('-group', '');\n\n                if (fieldOptions) {\n\n                    if (fieldData.placeholder) {\n                        optionsMarkup += '<option disabled selected>' + fieldData.placeholder + '</option>';\n                    }\n\n                    for (var i = 0; i < fieldOptions.length; i++) {\n                        if (!fieldOptions[i].selected || fieldData.placeholder) {\n                            delete fieldOptions[i].selected;\n                        }\n\n                        var optionLabel = fieldOptions[i].label\n                            ? fbUtils.cutJs(fieldOptions[i].label)\n                            : '';\n\n                        optionAttrsString = fbUtils.attrString(fieldOptions[i]);\n                        optionsMarkup += '<option ' + optionAttrsString + '>' + optionLabel + '</option>';\n                    }\n                }\n\n                fieldMarkup = fieldLabel + '<select ' + fieldDataString + '>' + optionsMarkup + '</select>';\n                break;\n            case 'checkbox':\n            case 'radio':\n            case 'rating':\n                var optionAttrs = void 0,\n                    ratingClass = '';\n\n                fieldData.type = fieldData.type.replace('-group', '');\n\n                if (fieldData.type === 'rating') {\n                    fieldData.type = 'radio';\n                    ratingClass = 'amform-rating-container ';\n                    fieldOptions = fieldOptions.reverse();\n                }\n\n                if (fieldData.type === 'checkbox' || fieldData.type === 'checkboxtwo') {\n                    fieldData.name += '[]';\n                }\n\n                if (fieldOptions) {\n                    var _optionAttrsString = void 0;\n\n                    for (var _i = 0; _i < fieldOptions.length; _i++) {\n                        optionAttrs = Object.assign({value: '', label: ''}, fieldData, fieldOptions[_i]);\n\n                        if (optionAttrs.value) {\n                            if (optionAttrs.selected) {\n                                delete optionAttrs.selected;\n                                optionAttrs.checked = null;\n                            }\n\n                            optionAttrs.id = fieldData.id + '-' + _i;\n                            _optionAttrsString = fbUtils.attrString(optionAttrs);\n\n                            var br = '',\n                             classNameLabel = ' class=\"amform-versiontwo-label\"';\n\n                            if (withBr) {\n                                br = '<br>';\n                                // eslint-disable-next-line no-use-before-define\n                                className = '';\n                            }\n\n                            var labelText = ratingClass ? '' : optionAttrs.label;\n                            let inputAsString = '<input ' + _optionAttrsString + '/' + '> <label for=\"'\n                                + optionAttrs.id + '\" ' + classNameLabel + '>'\n                                + fbUtils.cutJs(labelText) + '</label>' + br;\n\n                            if (optionAttrs.name.startsWith('checkboxtwo') || optionAttrs.name.startsWith('radiotwo')) {\n                                inputAsString = `<div class=\"amform-groupv2\">${inputAsString}</div>`;\n                            }\n\n                            optionsMarkup += inputAsString;\n                        }\n\n                    }\n\n                    if (fieldData.other) {\n                        var otherOptionAttrs = {\n                            id: fieldData.id + '-' + 'other',\n                            className: fieldData.className + ' other-option',\n                            onclick: 'fbUtils.otherOptionCB(\\'' + fieldData.id + '-other\\')'\n                        };\n\n                        _optionAttrsString = fbUtils.attrString(Object.assign({}, fieldData, otherOptionAttrs));\n\n                        // eslint-disable-next-line max-len\n                        optionsMarkup += '<input ' + _optionAttrsString + '/' + '>'\n                            + '<label for=\"' + otherOptionAttrs.id + '\">'\n                            + opts.messages.other + '</label> <input type=\"text\" name=\"'\n                            + fieldData.name + '\" id=\"' + otherOptionAttrs.id\n                            + '-value\" class=\"amform-no-display\"' + '/' + '>';\n                    }\n                }\n\n                fieldMarkup = fieldLabel + '<div class=\"' + ratingClass + fieldData.type + '-group\">'\n                    + optionsMarkup + '</div>';\n                break;\n            case 'textinput':\n            case 'password':\n            case 'email':\n            case 'number':\n            case 'file':\n            case 'hidden':\n            case 'date':\n            case 'time':\n            case 'datetime-local':\n            case 'daterange':\n            case 'tel':\n            case 'autocomplete':\n                fieldMarkup = fieldLabel + ' <input ' + fieldDataString + '>';\n                break;\n            case 'color':\n                fieldMarkup = fieldLabel + ' <input ' + fieldDataString + '> ' + opts.messages.selectColor;\n                break;\n            case 'button':\n            case 'submit':\n                fieldMarkup = '<button ' + fieldDataString + '>' + fieldLabelVal + '</button>';\n                break;\n            case 'googlemap':\n                fieldMarkup = fieldLabel + ' <input ' + fieldDataString + '><div class=\"map\"></div>';\n                break;\n            default:\n                fieldMarkup = '<' + fieldData.type + ' ' + fieldDataString + '>' + fieldLabelVal + '</' + fieldData.type + '>';\n        }\n\n        if (fieldData.type !== 'hidden') {\n            var className = fieldData.id ? 'fb-' + fieldData.type + ' form-group field-' + fieldData.id : '';\n\n            className += ' amform-layout-' + fieldData.layout;\n            fieldMarkup = fbUtils.markup('div', fieldMarkup, {\n                className: className\n            });\n        } else {\n            fieldMarkup = fbUtils.markup('input', null, fieldData);\n        }\n\n        if (fieldData.type === 'googlemap') {\n            var position = null,\n                zoom = 1,\n                oldMapSelector = '.' + fieldMarkup.className.replace(/\\s+/g, '.'),\n                oldMap = $(oldMapSelector);\n\n            if (oldMap.length > 0\n                && $.data(oldMap[0], 'mage-amGoogleMap')\n            ) {\n                position = oldMap.amGoogleMap('getPosition');\n                zoom = oldMap.amGoogleMap('getZoom');\n            } else if (fieldData.map_position) {\n                var lat = _.isUndefined(fieldData.map_position.lat) ? 0 : parseFloat(fieldData.map_position.lat),\n                    lng = _.isUndefined(fieldData.map_position.lng) ? 0 : parseFloat(fieldData.map_position.lng);\n\n                position = {\n                    'lat': lat,\n                    'lng': lng\n                };\n                zoom = fieldData.zoom;\n            }\n            $(fieldMarkup).amGoogleMap({\n                'position': position,\n                'zoom': zoom\n            });\n        }\n\n        return fieldMarkup;\n    };\n\n    /**\n     * Listen to create or init wysiwyg editor\n     *\n     * @param  {String} selector - css selector of the target type='wysiwyg'\n     * @param  {String} html - wysiwyg content\n     * @param  {Object} wysiwygConfig - wysiwyg config\n     * @returns {void}\n     */\n    fbUtils.wysiwygListener = function (selector, html, wysiwygConfig) {\n        var editors = Object.keys(tinymce.EditorManager.editors);\n\n        if (tinymce.EditorManager.editors.length && editors.includes(selector)) {\n            fbUtils.setWysiwygContent(selector, html);\n            fbUtils.refreshWysiwyg(selector);\n        } else {\n            fbUtils.createWysiwyg(selector, html, wysiwygConfig);\n        }\n    };\n\n    /**\n     * @param  {String} selector - css selector of the target type='wysiwyg'\n     * @param  {String} html - wysiwyg content\n     * @param  {Object} wysiwygConfig - wysiwyg config\n     * @returns {void}\n     */\n    fbUtils.createWysiwyg = function (selector, html, wysiwygConfig) {\n        // eslint-disable-next-line new-cap,no-undef\n        var wysiwyg = new wysiwygSetup(selector, _.extend(wysiwygConfig, {\n            'width': '100%',\n            'height': '200px'\n        }));\n\n        wysiwyg.setup('exact');\n        fbUtils.setWysiwygContent(selector, html);\n    };\n\n    /**\n     * @param  {String} selector - css selector of the target type='wysiwyg'\n     * @returns {void}\n     */\n    fbUtils.refreshWysiwyg = function (selector) {\n        tinymce.EditorManager.execCommand('mceRemoveEditor', true, selector);\n        tinymce.EditorManager.execCommand('mceAddEditor', true, selector);\n    };\n\n    /**\n     * @param  {String} selector - css selector of the target type='wysiwyg'\n     * @param  {String} html - wysiwyg content\n     * @returns {void}\n     */\n    fbUtils.setWysiwygContent = function (selector, html) {\n        $('.amform-wysiwyg#' + selector).html(html);\n    };\n\n    /**\n     * Callback for other option.\n     * Toggles the hidden text area for \"other\" option.\n     * @param  {String} otherId id of the \"other\" option input\n     */\n    fbUtils.otherOptionCB = function (otherId) {\n        var otherInput = document.getElementById(otherId),\n            otherInputValue = document.getElementById(otherId + '-value');\n\n        if (otherInput.checked) {\n            otherInput.style.display = 'none';\n            otherInputValue.style.display = 'inline-block';\n        } else {\n            otherInput.style.display = 'inline-block';\n            otherInputValue.style.display = 'none';\n        }\n    };\n\n    /**\n     * Capitalizes a string\n     * @param  {String} str uncapitalized string\n     * @return {String} str capitalized string\n     */\n    fbUtils.capitalize = function (str) {\n        return str.replace(/\\b\\w/g, function (m) {\n            return m.toUpperCase();\n        });\n    };\n\n    fbUtils.cutJs = function (str) {\n        return str.replace(/<\\/?script.*?>/ig, '');\n    };\n\n    'use strict';\n\n    function formBuilderHelpersFn(opts, formBuilder) {\n\n\n        var _helpers = {\n            doCancel: false\n        },\n         utils = fbUtils;\n\n        // eslint-disable-next-line no-use-before-define\n        formBuilder.events = formBuilderEventsFn();\n\n        _helpers.wysiwygHtmlCache = {};\n\n        /**\n         * Convert converts messy `cl#ssNames` into valid `class-names`\n         *\n         * @param  {string} str\n         * @return {string}\n         */\n        _helpers.makeClassName = function (str) {\n            str = str.replace(/[^\\w\\s\\-]/gi, '');\n            return utils.hyphenCase(str);\n        };\n\n        /**\n         * Add a mobile class\n         *\n         * @return {string}\n         */\n        _helpers.mobileClass = function () {\n            var mobileClass = '';\n\n            (function (a) {\n                // eslint-disable-next-line max-len\n                if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) {\n                    mobileClass = ' fb-mobile';\n                }\n            })(navigator.userAgent || navigator.vendor || window.opera);\n            return mobileClass;\n        };\n\n        /**\n         * Callback for when a drag begins\n         *\n         * @param  {Object} event\n         * @param  {Object} ui\n         */\n        _helpers.startMoving = function (event, ui) {\n            ui.item.show().addClass('moving');\n            _helpers.startIndex = $('li', this).index(ui.item);\n        };\n\n        /**\n         * Callback for when a drag ends\n         *\n         * @param  {Object} event\n         * @param  {Object} ui\n         */\n        _helpers.stopMoving = function (event, ui) {\n            var wysiwygElement = ui.item.find('.amform-wysiwyg[type=\"wysiwyg\"]');\n\n            if (wysiwygElement.length) {\n                fbUtils.refreshWysiwyg(wysiwygElement.attr('id'));\n            }\n\n            ui.item.removeClass('moving');\n\n            if (_helpers.doCancel || $(event.target).hasClass('frmb-control')) {\n                $(ui.sender).sortable('cancel');\n                $(this).sortable('cancel');\n            }\n\n            _helpers.save();\n            _helpers.doCancel = false;\n        };\n\n        /**\n         * Callback for when the user stopped sorting\n         *\n         * @param  {Object} event\n         * @param  {Object} ui\n         */\n        _helpers.update = function (event, ui) {\n            if (_helpers.doCancel) {\n                return false;\n            }\n\n            if (ui.item.parent()[0] === formBuilder.sortableFields[0]) {\n                formBuilder.processControl(ui.item);\n                _helpers.doCancel = true;\n            } else {\n                _helpers.setFieldOrder(event.target);\n                _helpers.doCancel = !opts.sortableControls;\n            }\n        };\n\n        /**\n         * jQuery UI sortable beforeStop callback used for both lists.\n         * Logic for canceling the sort or drop.\n         */\n        _helpers.beforeStop = function (event, ui) {\n            var form = document.getElementById(opts.formID),\n                lastIndex = form.children.length - 1,\n                cancelArray = [];\n\n            _helpers.stopIndex = ui.placeholder.index() - 1;\n\n            if (!opts.sortableControls && ui.item.parent().hasClass('frmb-control')) {\n                cancelArray.push(true);\n            }\n\n            if (opts.prepend) {\n                cancelArray.push(_helpers.stopIndex === 0);\n            }\n\n            if (opts.append) {\n                cancelArray.push(_helpers.stopIndex + 1 === lastIndex);\n            }\n\n            _helpers.doCancel = cancelArray.some(function (elem) {\n                return elem === true;\n            });\n        };\n\n        /**\n         * Make strings safe to be used as classes\n         *\n         * @param  {string} str string to be converted\n         * @return {string}     converter string\n         */\n        _helpers.safename = function (str) {\n            return str.replace(/\\s/g, '-')\n                .replace(/[^a-zA-Z0-9\\-]/g, '')\n                .toLowerCase();\n        };\n\n        /**\n         * Strips non-numbers from a number only input\n         *\n         * @param  {string} str string with possible number\n         * @return {string}     string without numbers\n         */\n        _helpers.forceNumber = function (str) {\n            return str.replace(/[^0-9]/g, '');\n        };\n\n        /**\n         * hide and show mouse tracking tooltips, only used for disabled\n         * fields in the editor.\n         *\n         * @todo   remove or refactor to make better use\n         * @param  {Object} tt jQuery option with nexted tooltip\n         * @return {void}\n         */\n        _helpers.initTooltip = function (tt) {\n            var tooltip = tt.find('.tooltip');\n\n            tt.mouseenter(function () {\n                if (tooltip.outerWidth() > 200) {\n                    tooltip.addClass('max-width');\n                }\n                tooltip.css('left', tt.width() + 14);\n                tooltip.stop(true, true).fadeIn('fast');\n            }).mouseleave(function () {\n                tt.find('.tooltip').stop(true, true).fadeOut('fast');\n            });\n\n            tooltip.hide();\n        };\n\n        /**\n         * Attempts to get element type and subtype\n         *\n         * @param  {Object} $field\n         * @return {Object}\n         */\n        _helpers.getTypes = function ($field) {\n            var types = {\n                    type: $field.attr('type')\n                },\n                subtype = $('.fld-subtype', $field).val();\n\n            if (subtype !== types.type) {\n                types.subtype = subtype;\n            }\n\n            return types;\n        };\n\n        /**\n         * Get option data for a field\n         * @param  {Object} field jQuery field object\n         * @return {Array}        Array of option values\n         */\n        _helpers.fieldOptionData = function (field) {\n            var options = [];\n\n            $('.sortable-options li', field).each(function () {\n                var $option = $(this),\n                    selected = $('.option-selected', $option).is(':checked'),\n                    attrs = {\n                        label: $('.option-label', $option).val(),\n                        value: $('.option-value', $option).val()\n                    };\n\n                if (selected) {\n                    attrs.selected = selected;\n                }\n                if (attrs.value) {\n                    options.push(attrs);\n                }\n            });\n\n            return options;\n        };\n\n        /**\n         * XML save\n         *\n         * @param  {Object} form sortableFields node\n         */\n        _helpers.xmlSave = function (form) {\n            var formData = _helpers.prepData(form),\n                xml = ['<form-template>\\n\\t<fields>'];\n\n            utils.forEach(formData, function (fieldIndex, field) {\n                var fieldContent = null;\n\n                // Handle options\n                if (field.type.match(/(select|checkbox-group|radio-group)/)) {\n                    var optionData = field.values,\n                        options = [];\n\n                    for (var i = 0; i < optionData.length; i++) {\n                        var option = utils.markup('option', optionData[i].label, optionData[i]).outerHTML;\n\n                        options.push('\\n\\t\\t\\t' + option);\n                    }\n\n                    options.push('\\n\\t\\t');\n                    fieldContent = options.join('');\n                    delete field.values;\n                }\n\n                var xmlField = utils.markup('field', fieldContent, field);\n\n                xml.push('\\n\\t\\t' + xmlField.outerHTML);\n            });\n\n            xml.push('\\n\\t</fields>\\n</form-template>');\n\n            return xml.join('');\n        };\n\n        _helpers.prepData = function (form) {\n            var formData = [];\n\n            if (form.childNodes.length !== 0) {\n                // build data object\n                utils.forEach(form.childNodes, function (index, field) {\n                    var $field = $(field);\n\n                    if (!$field.hasClass('disabled')) {\n                        var match,\n                            multipleField;\n\n                        (function () {\n                            var fieldData = _helpers.getTypes($field),\n                                roleVals = $('.roles-field:checked', field).map(function () {\n                                    return this.value;\n                                }).get();\n\n                            $('[class*=\"fld-\"]', field).each(function () {\n                                var name = utils.camelCase(this.name);\n\n                                fieldData[name] = this.type === 'checkbox' ? this.checked : this.value;\n                            });\n\n                            if (roleVals.length) {\n                                fieldData.role = roleVals.join(',');\n                            }\n\n                            fieldData.className = fieldData.className || fieldData.class; // backwards compatibility\n\n\n                            match = /(?:^|\\s)btn-(.*?)(?:\\s|$)/g.exec(fieldData.className);\n\n                            if (match) {\n                                fieldData.style = match[1];\n                            }\n\n                            fieldData = utils.trimObj(fieldData);\n\n                            multipleField = fieldData.type\n                                // eslint-disable-next-line max-len\n                                .match(/(select|dropdown|listbox|radio|radiotwo|checkbox|checkboxtwo|radio-group|rating)/);\n\n\n                            if (multipleField) {\n                                fieldData.values = _helpers.fieldOptionData($field);\n                            }\n\n                            if (fieldData.type === 'googlemap') {\n                                var fbGoogleMap = $(field).find('.fb-googlemap');\n\n                                fieldData.map_position = fbGoogleMap.amGoogleMap('getPosition');\n                                fieldData.zoom = fbGoogleMap.amGoogleMap('getZoom');\n                            }\n                            if (fieldData.type === 'date') {\n                                fieldData.value = $field.find('.amform-date._has-datepicker').val();\n                                fieldData.format = $field.attr('date-format');\n                            }\n\n                            if (fieldData.type === 'wysiwyg') {\n                                fieldData.value = $field.find('[type=' + fieldData.type + ']').val();\n                            }\n\n                            fieldData.dependency = _helpers.fieldDependencyData($field);\n\n                            formData.push(fieldData);\n                        })();\n                    }\n                });\n            }\n\n            return formData;\n        };\n\n        _helpers.jsonSave = function (form) {\n            return window.JSON.stringify(_helpers.prepData(form), null, '\\t');\n        };\n\n        _helpers.getData = function (formData) {\n            var data = formData || opts.formData;\n\n            if (!data) {\n                return false;\n            }\n\n            var setData = {\n                xml: function xml(formData) {\n                    return utils.parseXML(formData);\n                },\n                json: function json(formData) {\n                    return window.JSON.parse(formData);\n                }\n            };\n\n            formBuilder.formData = setData[opts.dataType](data) || [];\n\n            return formBuilder.formData;\n        };\n\n        /**\n         * Saves and returns formData\n         * @return {XML|JSON}\n         */\n        _helpers.save = function () {\n            var form = document.getElementById(opts.formID),\n                 doSave = {\n                    xml: _helpers.xmlSave,\n                    json: _helpers.jsonSave\n                };\n\n            // save action for current `dataType`\n            formBuilder.formData = doSave[opts.dataType](form);\n\n            //trigger formSaved event\n            document.dispatchEvent(formBuilder.events.formSaved);\n            return formBuilder.formData;\n        };\n\n        /**\n         * increments the field ids with support for multiple editors\n         * @param  {String} id field ID\n         * @return {String}    incremented field ID\n         */\n        _helpers.incrementId = function (id) {\n            var split = id.lastIndexOf('-'),\n                newFieldNumber = parseInt(id.substring(split + 1), 10) + 1,\n                baseString = id.substring(0, split);\n\n            return baseString + '-' + newFieldNumber;\n        };\n\n        /**\n         * Collect field attribute values and call fieldPreview to generate preview\n         * @param  {Object} field jQuery wrapped dom object @todo, remove jQuery dependency\n         * @param {Object} orig jQuery saved original when creating clone\n         */\n        _helpers.updatePreview = function (field, orig) {\n            var fieldClass = field.attr('class');\n\n            if (fieldClass && fieldClass.indexOf('ui-sortable-handle') !== -1) {\n                return;\n            }\n\n            var fieldType = $(field).attr('type'),\n                $prevHolder = $('.prev-holder', field),\n                previewData = {\n                    type: fieldType\n                },\n                preview;\n\n            $('[class*=\"fld-\"]', field).each(function () {\n                var name = utils.camelCase(this.name);\n\n                previewData[name] = this.type === 'checkbox' ? this.checked : this.value;\n            });\n\n            var style = $('.btn-style', field).val();\n\n            if (style) {\n                previewData.style = style;\n            }\n\n            if (fieldType === 'wysiwyg') {\n                _helpers.setWysiwygHtml($prevHolder, previewData, orig);\n            }\n\n            if (fieldType.match(/(select|dropdown|listbox|radio|radiotwo|checkbox|checkboxtwo|radio-group|rating)/)) {\n                previewData.values = [];\n                previewData.multiple = fieldType === 'listbox';\n\n                $('.sortable-options li', field).each(function () {\n                    var option = {};\n\n                    option.selected = $('.option-selected', this).is(':checked');\n                    option.value = $('.option-value', this).val();\n                    option.label = $('.option-label', this).val();\n                    previewData.values.push(option);\n                });\n            }\n            if (fieldType === 'date') {\n                var value = field.data('fieldData').attrs ?\n                        field.data('fieldData').attrs.value :\n                        field.data('fieldData').value;\n\n                previewData.value = value;\n            }\n\n            previewData = utils.trimObj(previewData);\n\n            previewData.className = _helpers.classNames(field, previewData);\n            $('.fld-className', field).val(previewData.className);\n\n            if (fieldType === 'googlemap') {\n                var fieldData = field.data('fieldData');\n\n                if (fieldData) {\n                    // first load\n                    if (fieldData.attrs) {\n                        previewData.map_position = fieldData.attrs.map_position;\n                        previewData.zoom = fieldData.attrs.zoom;\n                    }\n                } else if (orig) {\n                    // for clone action\n                    var oldMap = orig.find('.fb-googlemap');\n\n                    if (oldMap.length > 0\n                        && $.data(oldMap[0], 'mage-amGoogleMap')\n                    ) {\n                        var latLng = oldMap.amGoogleMap('getPosition');\n\n                        previewData.map_position = {\n                            lat: latLng.lat(),\n                            lng: latLng.lng()\n                        };\n                        previewData.zoom = oldMap.amGoogleMap('getZoom');\n                    }\n                }\n            }\n\n            field.data('fieldData', previewData);\n            preview = utils.fieldRender(previewData, opts, true);\n\n            if (fieldType === 'date') {\n                this.updateDateField(preview, field.attr('date-format'), previewData.value);\n            }\n\n            $prevHolder.html(preview);\n\n            if ($prevHolder.find('.amform-layout-two').length) {\n                $prevHolder.find('.amform-layout-two').removeClass('amform-layout-two');\n                $prevHolder.parents('li.form-field').addClass('amform-layout-two');\n            }\n\n            if ($prevHolder.find('.amform-layout-three').length) {\n                $prevHolder.find('.amform-layout-three').removeClass('amform-layout-three');\n                $prevHolder.parents('li.form-field').addClass('amform-layout-three');\n            }\n\n            $('input[toggle]', $prevHolder).kcToggle();\n\n            if (fieldType === 'wysiwyg' && opts.wysiwygConfig.enabled) {\n                fbUtils.wysiwygListener(previewData.id, _helpers.getWysiwygHtml(previewData.name), opts.wysiwygConfig);\n            }\n        };\n\n        /**\n         * Set wysiwyg content to the wysiwygHtmlCache by it's name\n         *\n         * @param  {Object} $prevHolder\n         * @param  {Object} previewData - field data\n         * @param  {Object|Undefined} orig - not undefined means field is copied. orig - original field\n         * @returns {void}\n         */\n        _helpers.setWysiwygHtml = function ($prevHolder, previewData, orig) {\n            var html = _helpers.wysiwygHtmlCache,\n                value = $prevHolder.find('[type=' + previewData.type + ']').val();\n\n            if (typeof value === 'undefined') {\n                value = previewData.value;\n            }\n\n            if (!value) {\n                html[previewData.name + '-preview'] = '';\n\n                return;\n            }\n\n            if (typeof orig !== 'undefined' || value.length) {\n                html[previewData.name + '-preview'] = value;\n            }\n        };\n\n        /**\n         * @param  {String} name\n         * @returns {void}\n         */\n        _helpers.removeWysiwygHtml = function (name) {\n            delete _helpers.wysiwygHtmlCache[name];\n        };\n\n        /**\n         * @param  {String} name\n         * @returns {String} html\n         */\n        _helpers.getWysiwygHtml = function (name) {\n            return _helpers.wysiwygHtmlCache[name];\n        };\n\n        _helpers.updateDateField = function (fieldMarkup, format, value) {\n            var dateInput = $(fieldMarkup).find('input');\n\n            format = format.replaceAll('yy', 'y');\n            dateInput.removeAttr('type');\n            dateInput.attr('readonly', 'readonly');\n            dateInput.datepicker({\n                showOn: 'both',\n                changeYear: true,\n                yearRange: '1900:2100',\n                autoSize: true,\n                dateFormat: format\n            });\n\n            if (value) {\n                dateInput.datepicker('setDate', value);\n            }\n\n            dateInput.attr('placeholder', format);\n            dateInput.attr('size', 15);\n            $(fieldMarkup).find('button').html('');\n\n            var datepicker = $('#ui-datepicker-div');\n\n            if (!datepicker.hasClass('am-picker-year')) {\n                datepicker.addClass('am-picker-year');\n            }\n        };\n\n        _helpers.debounce = function (func) {\n            var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 250,\n                immediate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false,\n                timeout;\n\n            return function () {\n                var context = this,\n                    args = arguments,\n                    later = function later() {\n                        timeout = null;\n                        if (!immediate) {\n                            func.apply(context, args);\n                        }\n                    },\n                    callNow = immediate && !timeout;\n\n                clearTimeout(timeout);\n                timeout = setTimeout(later, wait);\n\n                if (callNow) {\n                    func.apply(context, args);\n                }\n            };\n        };\n\n        /**\n         * Display a custom tooltip for disabled fields.\n         *\n         * @param  {Object} field\n         */\n        _helpers.disabledTT = {\n            className: 'frmb-tt',\n            add: function add(field) {\n                var title = opts.messages.fieldNonEditable;\n\n                if (title) {\n                    var tt = utils.markup('p', title, {className: _helpers.disabledTT.className});\n\n                    field.append(tt);\n                }\n            },\n            remove: function remove(field) {\n                $('.frmb-tt', field).remove();\n            }\n        };\n\n        _helpers.classNames = function (field, previewData) {\n            var i = void 0,\n                type = previewData.type,\n                style = previewData.style,\n                className = field[0].querySelector('.fld-className').value,\n                classes = className.split(' '),\n                types = {\n                    button: 'btn',\n                    submit: 'btn'\n                },\n\n                primaryType = types[type];\n\n            if (primaryType) {\n                if (style) {\n                    for (i = 0; i < classes.length; i++) {\n                        var re = new RegExp('(?:^|\\s)' + primaryType + '-(.*?)(?:\\s|$)+', 'g'),\n                         match = classes[i].match(re);\n\n                        if (match) {\n                            classes.splice(i, 1);\n                        }\n                    }\n                    classes.push(primaryType + '-' + style);\n                }\n                classes.push(primaryType);\n            }\n\n            // reverse the array to put custom classes at end,\n            // remove any duplicates, convert to string, remove whitespace\n            return utils.unique(classes).join(' ').trim();\n        };\n\n        /**\n         * Closes and open dialog\n         *\n         * @param  {Object} overlay Existing overlay if there is one\n         * @param  {Object} dialog  Existing dialog\n         * @return {Event}          Triggers modalClosed event\n         */\n        _helpers.closeConfirm = function (overlay, dialog) {\n            overlay = overlay || document.getElementsByClassName('form-builder-overlay')[0];\n            dialog = dialog || document.getElementsByClassName('form-builder-dialog')[0];\n            overlay.classList.remove('visible');\n            dialog.remove();\n            overlay.remove();\n            document.dispatchEvent(formBuilder.events.modalClosed);\n        };\n\n        /**\n         * Returns the layout data based on controlPosition option\n         * @param  {String} controlPosition 'left' or 'right'\n         * @return {Object}\n         */\n        _helpers.editorLayout = function (controlPosition) {\n            var layoutMap = {\n                left: {\n                    stage: 'pull-right',\n                    controls: 'pull-left'\n                },\n                right: {\n                    stage: 'pull-left',\n                    controls: 'pull-right'\n                }\n            };\n\n            return layoutMap[controlPosition] ? layoutMap[controlPosition] : '';\n        };\n\n        /**\n         * Adds overlay to the page. Used for modals.\n         * @return {Object}\n         */\n        _helpers.showOverlay = function () {\n            var overlay = utils.markup('div', null, {\n                className: 'form-builder-overlay'\n            });\n\n            document.body.appendChild(overlay);\n            overlay.classList.add('visible');\n\n            overlay.onclick = function () {\n                _helpers.closeConfirm(overlay);\n            };\n\n            return overlay;\n        };\n\n        /**\n         * Custom confirmation dialog\n         *\n         * @param  {Object}  message   Content to be displayed in the dialog\n         * @param  {function} yesAction callback to fire if they confirm\n         * @param  {Boolean} coords    location to put the dialog\n         * @param  {String}  className Custom class to be added to the dialog\n         * @return {Object}            Reference to the modal\n         */\n        _helpers.confirm = function (message, yesAction) {\n            var coords = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false,\n             className = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '',\n\n             overlay = _helpers.showOverlay(),\n             yes = utils.markup('button', opts.messages.yes, {className: 'yes btn btn-success btn-sm'}),\n                no = utils.markup('button', opts.messages.no, {className: 'no btn btn-danger btn-sm'});\n\n            no.onclick = function () {\n                _helpers.closeConfirm(overlay);\n            };\n\n            yes.onclick = function () {\n                yesAction();\n                _helpers.closeConfirm(overlay);\n            };\n\n            var btnWrap = utils.markup('div', [no, yes], {className: 'button-wrap'});\n\n            className = 'form-builder-dialog ' + className;\n\n            var miniModal = utils.markup('div', [message, btnWrap], {className: className});\n\n            if (!coords) {\n                coords = {\n                    pageX: Math.max(document.documentElement.clientWidth, window.innerWidth || 0) / 2,\n                    pageY: Math.max(document.documentElement.clientHeight, window.innerHeight || 0) / 2\n                };\n                miniModal.style.position = 'fixed';\n            } else {\n                miniModal.classList.add('positioned');\n            }\n\n            miniModal.style.left = coords.pageX + 'px';\n            miniModal.style.top = coords.pageY + 'px';\n\n            document.body.appendChild(miniModal);\n\n            yes.focus();\n            return miniModal;\n        };\n\n        /**\n         * Popup dialog the does not require confirmation.\n         * @param  {String|DOM|Array}  content\n         * @param  {Boolean} coords    false if no coords are provided. Without coordinates\n         *                             the popup will appear center screen.\n         * @param  {String}  className classname to be added to the dialog\n         * @return {Object}            dom\n         */\n        _helpers.dialog = function (content) {\n            var coords = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false,\n             className = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n\n            _helpers.showOverlay();\n\n            className = 'form-builder-dialog ' + className;\n\n            var miniModal = utils.markup('div', content, {className: className});\n\n            if (!coords) {\n                coords = {\n                    pageX: Math.max(document.documentElement.clientWidth, window.innerWidth || 0) / 2,\n                    pageY: Math.max(document.documentElement.clientHeight, window.innerHeight || 0) / 2\n                };\n                miniModal.style.position = 'fixed';\n            } else {\n                miniModal.classList.add('positioned');\n            }\n\n            miniModal.style.left = coords.pageX + 'px';\n            miniModal.style.top = coords.pageY + 'px';\n\n            document.body.appendChild(miniModal);\n\n            document.dispatchEvent(formBuilder.events.modalOpened);\n\n            if (className.indexOf('data-dialog') !== -1) {\n                document.dispatchEvent(formBuilder.events.viewData);\n            }\n\n            return miniModal;\n        };\n\n        /**\n         * Removes all fields from the form\n         */\n        _helpers.removeAllfields = function () {\n            var form = document.getElementById(opts.formID),\n             fields = form.querySelectorAll('li.form-field'),\n             $fields = $(fields),\n             markEmptyArray = [];\n\n            if (!fields.length) {\n                return false;\n            }\n\n            if (opts.prepend) {\n                markEmptyArray.push(true);\n            }\n\n            if (opts.append) {\n                markEmptyArray.push(true);\n            }\n\n            if (!markEmptyArray.some(function (elem) {return elem === true;})) {\n                form.parentElement.classList.add('empty');\n                form.parentElement.dataset.content = opts.messages.getStarted;\n            }\n\n            form.classList.add('removing');\n\n            var outerHeight = 0;\n\n            $fields.each(function () {\n                outerHeight += $(this).outerHeight() + 3;\n            });\n\n            fields[0].style.marginTop = -outerHeight + 'px';\n\n            setTimeout(function () {\n                $fields.remove();\n                document.getElementById(opts.formID).classList.remove('removing');\n                _helpers.save();\n            }, 400);\n        };\n\n        /**\n         * If user re-orders the elements their order should be saved.\n         *\n         * @param {Object} $cbUL our list of elements\n         */\n        _helpers.setFieldOrder = function ($cbUL) {\n            if (!opts.sortableControls) {\n                return false;\n            }\n            var fieldOrder = {};\n\n            $cbUL.children().each(function (index, element) {\n                fieldOrder[index] = $(element).data('attrs').type;\n            });\n\n            if (window.sessionStorage) {\n                window.sessionStorage.setItem('fieldOrder', window.JSON.stringify(fieldOrder));\n            }\n        };\n\n        /**\n         * Reorder the controls if the user has previously ordered them.\n         *\n         * @param  {Array} frmbFields\n         * @return {Array}\n         */\n        _helpers.orderFields = function (frmbFields) {\n            var fieldOrder = false;\n\n            if (window.sessionStorage) {\n                if (opts.sortableControls) {\n                    fieldOrder = window.sessionStorage.getItem('fieldOrder');\n                } else {\n                    window.sessionStorage.removeItem('fieldOrder');\n                }\n            }\n\n            if (!fieldOrder) {\n                var controlOrder = opts.controlOrder.concat(frmbFields.map(function (field) {\n                    return field.attrs.type;\n                }));\n\n                fieldOrder = utils.unique(controlOrder);\n            } else {\n                fieldOrder = window.JSON.parse(fieldOrder);\n                fieldOrder = Object.keys(fieldOrder).map(function (i) {\n                    return fieldOrder[i];\n                });\n            }\n\n            var newOrderFields = [];\n\n            fieldOrder.forEach(function (fieldType) {\n                var field = frmbFields.filter(function (field) {\n                    return field.attrs.type === fieldType;\n                })[0];\n\n                newOrderFields.push(field);\n            });\n\n            return newOrderFields.filter(Boolean);\n        };\n\n        /**\n         * Close fields being editing\n         * @param  {Object} stage\n         */\n        _helpers.closeAllEdit = function (stage) {\n            var fields = $('> li.editing', stage),\n                toggleBtns = $('.toggle-form', stage),\n                editModes = $('.frm-holder', fields);\n\n            toggleBtns.removeClass('open');\n            fields.removeClass('editing');\n            editModes.hide();\n            $('.prev-holder', fields).show();\n        };\n\n        /**\n         * Toggles the edit mode for the given field\n         * @param  {String} fieldId\n         */\n        _helpers.toggleEdit = function (fieldId) {\n            var field = document.getElementById(fieldId),\n                toggleBtn = $('.toggle-form', field),\n                editMode = $('.frm-holder', field);\n\n            field.classList.toggle('editing');\n            toggleBtn.toggleClass('open');\n            $('.prev-holder', field).slideToggle(250);\n            editMode.slideToggle(250);\n        };\n\n        /**\n         * Controls follow scroll to the bottom of the editor\n         * @param  {Object} $sortableFields\n         * @param  {Object} cbUL\n         */\n        _helpers.stickyControls = function ($sortableFields, cbUL) {\n            var $cbWrap = $(cbUL).parent(),\n                $stageWrap = $sortableFields.parent(),\n                cbWidth = $cbWrap.width(),\n                cbPosition = cbUL.getBoundingClientRect();\n\n            // eslint-disable-next-line jquery-no-input-event-shorthand\n            $(window).scroll(function () {\n                var scrollTop = $(this).scrollTop();\n\n                if (scrollTop > $stageWrap.offset().top) {\n                    var cbStyle = {\n                            position: 'fixed',\n                            width: cbWidth,\n                            top: 0,\n                            bottom: 'auto',\n                            right: 'auto',\n                            left: cbPosition.left\n                        },\n                        cbOffset = $cbWrap.offset(),\n                        stageOffset = $stageWrap.offset(),\n                        cbBottom = cbOffset.top + $cbWrap.height(),\n                        stageBottom = stageOffset.top + $stageWrap.height();\n\n                    if (cbBottom > stageBottom && cbOffset.top !== stageOffset.top) {\n                        $cbWrap.css({\n                            position: 'absolute',\n                            top: 'auto',\n                            bottom: 0,\n                            right: 0,\n                            left: 'auto'\n                        });\n                    }\n\n                    if (cbBottom < stageBottom || cbBottom === stageBottom && cbOffset.top > scrollTop) {\n                        $cbWrap.css(cbStyle);\n                    }\n                } else {\n                    cbUL.parentElement.removeAttribute('style');\n                }\n            });\n        };\n\n        /**\n         * Open a dialog with the form's data\n         */\n        _helpers.showData = function () {\n            var data = utils.escapeHtml(formBuilder.formData),\n                code = utils.markup('code', data, {className: 'formData-' + opts.dataType}),\n                pre = utils.markup('pre', code);\n\n            _helpers.dialog(pre, null, 'data-dialog');\n        };\n\n        /**\n         * Remove a field from the stage\n         * @param  {String}  fieldID ID of the field to be removed\n         * @return {Boolean} fieldRemoved returns true if field is removed\n         */\n        _helpers.removeField = function (fieldID) {\n            var fieldRemoved = false,\n                form = document.getElementById(opts.formID),\n                fields = form.getElementsByClassName('form-field');\n\n            if (!fields.length) {\n                console.warn('No fields to remove');\n\n                return false;\n            }\n\n            if (!fieldID) {\n                var availableIds = [].slice.call(fields).map(function (field) {\n                    return field.id;\n                });\n\n                console.warn('fieldID required to use `removeField` action.');\n                console.warn('Available IDs: ' + availableIds.join(', '));\n            }\n\n            var field = document.getElementById(fieldID),\n                $field = $(field);\n\n            if (!field) {\n                console.warn('Field not found');\n\n                return false;\n            }\n\n            $field.slideUp(250, function () {\n                $field.removeClass('deleting');\n                $field.remove();\n                fieldRemoved = true;\n                _helpers.save();\n\n                if (!form.childNodes.length) {\n                    var stageWrap = form.parentElement;\n\n                    stageWrap.classList.add('empty');\n                    stageWrap.dataset.content = opts.messages.getStarted;\n                }\n            });\n\n            document.dispatchEvent(formBuilder.events.fieldRemoved);\n\n            return fieldRemoved;\n        };\n\n        _helpers.fieldDependencyData = function (field) {\n            var options = [];\n\n            $('.sortable-options li.dependent-field', field).each(function () {\n                var $option = $(this),\n                    selected = $('.option-selected', $option).is(':checked'),\n                    attrs = {\n                        field: $option.find('select').first().val(),\n                        type: $option.find('select').first().find('[selected=\"selected\"]').attr('type'),\n                        value: $option.find('select').last().val()\n                    };\n\n                if (selected) {\n                    attrs.selected = selected;\n                }\n\n                if (attrs.value) {\n                    options.push(attrs);\n                }\n            });\n\n            return options;\n        };\n\n        return _helpers;\n    }\n\n    'use strict';\n\n    function formBuilderEventsFn() {\n        var events = {};\n\n        events.loaded = new Event('loaded');\n        events.viewData = new Event('viewData');\n        events.userDeclined = new Event('userDeclined');\n        events.modalClosed = new Event('modalClosed');\n        events.modalOpened = new Event('modalOpened');\n        events.formSaved = new Event('formSaved');\n        events.fieldAdded = new Event('fieldAdded');\n        events.fieldRemoved = new Event('fieldRemoved');\n\n        return events;\n    }\n\n    'use strict';\n\n    (function ($) {\n        var Toggle = function Toggle(element, options) {\n            var defaults = {\n                    theme: 'fresh',\n                    messages: {\n                        off: 'Off',\n                        on: 'On'\n                    }\n                },\n                opts = $.extend(defaults, options),\n                $kcToggle = $('<div class=\"kc-toggle\"></div>').insertAfter(element).append(element);\n\n            $kcToggle.toggleClass('on', element.is(':checked'));\n\n            var kctOn = '<div class=\"kct-on\">' + opts.messages.on + '</div>',\n                kctOff = '<div class=\"kct-off\">' + opts.messages.off + '</div>',\n                kctHandle = '<div class=\"kct-handle\"></div>',\n                kctInner = '<div class=\"kct-inner\">' + kctOn + kctHandle + kctOff + '</div>';\n\n            $kcToggle.append(kctInner);\n\n            $kcToggle.click(function () {\n                element.attr('checked', !element.attr('checked'));\n                $(this).toggleClass('on');\n            });\n        };\n\n        $.fn.kcToggle = function (options) {\n            var toggle = this;\n\n            return toggle.each(function () {\n                var element = $(this);\n\n                if (element.data('kcToggle')) {\n                    return;\n                }\n\n                var kcToggle = new Toggle(element, options);\n\n                element.data('kcToggle', kcToggle);\n            });\n        };\n    })(jQuery);\n\n    return [fbUtils, formBuilderHelpersFn];\n});\n","Amasty_Customform/js/form-prompt.js":"define([\n    'jquery',\n    'Magento_Ui/js/modal/confirm',\n    'mage/translate'\n], function ($, confirm, $t) {\n    'use strict';\n\n    $.widget('mage.amcformPrompt', {\n        options: {\n            modalClass: 'amcform-popup-block -active',\n            responsive: true,\n            title: $t('This form can be submitted only once. Ready to proceed?'),\n            cancellationLink: '',\n            actions: {},\n            isShowed: false\n        },\n\n        _create: function () {\n            var self = this,\n                options = this.options,\n                form = $(this.element).closest('.amform-form');\n\n            self.options.actions = {\n                cancel: function () {\n                    self.options.isShowed = false;\n                }\n            };\n\n            options.buttons = [{\n                text: $t('No'),\n                class: 'amcform-button -error',\n                click: function () {\n                    this.closeModal();\n                }\n            }, {\n                text: $t('Yes'),\n                class: 'amcform-button -default',\n                click: function () {\n                    this.closeModal();\n                    form.submit();\n                }\n            }];\n\n            this.element.click(function (e) {\n                e.preventDefault();\n\n                if (!self.options.isShowed) {\n                    confirm(options);\n\n                    self.options.isShowed = true;\n                } else {\n                    form.submit();\n                }\n            });\n        }\n    });\n\n    return $.mage.amcformPrompt\n});\n","Amasty_Customform/js/form-builder.js":"define([\n    'jquery',\n    'underscore',\n    'Amasty_Customform/js/form-builder-helper',\n    'Magento_Ui/js/modal/alert',\n    'mage/translate',\n    'Magento_Ui/js/modal/modal',\n    'mage/backend/tabs'\n], function ($, _, helper, alert) {\n    'use strict';\n\n    $.widget('mage.customFormBuilder', {\n        options: {\n            controlPosition: 'right',\n            controlOrder: ['autocomplete', 'button', 'checkbox', 'checkbox-group',\n                'date', 'file', 'header', 'hidden', 'paragraph', 'number', 'radio-group', 'select', 'text', 'textarea'],\n            dataType: 'json',\n            // Array of fields to disable\n            disableFields: [],\n            editOnAdd: false,\n            // Uneditable fields or other content you would like to appear before and after regular fields:\n            append: false,\n            prepend: false,\n            defaultFields: [],\n            inputSets: [],\n            fieldRemoveWarn: false,\n            messages: {},\n            frmbFields: [{\n                label: 'autocomplete',\n                attrs: {\n                    type: 'autocomplete',\n                    className: 'autocomplete',\n                    name: 'autocomplete'\n                }\n            }],\n            notify: {\n                error: function error(message) {\n                    return console.error(message);\n                },\n                success: function success(message) {\n                    return console.log(message);\n                },\n                warning: function warning(message) {\n                    return console.warn(message);\n                }\n            },\n            sortableControls: false,\n            stickyControls: false,\n            showActionButtons: true,\n            typeUserAttrs: {},\n            typeUserEvents: {},\n            prefix: 'form-builder-',\n            fbInstances: [],\n            savedValue: '[name=\"form_json\"]',\n            savedTitles: '[name=\"form_title\"]',\n            pageFormId: [],\n            pageTitles: []\n        },\n        classes: {\n            delete: 'deleting'\n        },\n        selectors: {\n            wysiwygField: '[type=wysiwyg]',\n            deleteButton: '.delete-confirm',\n            fieldFirst: '.form-field:eq(0)',\n            wysiwygContainer: '.wysiwyg-field#{id}'\n        },\n\n        _create: function () {\n            var self = this,\n                formbId,\n                savedValue,\n                formDataJSON = [],\n                savedTitles,\n                pageCount;\n\n            self.generateSubtypes();\n\n            formDataJSON = self.options.form_json;\n            savedTitles = $(self.options.savedTitles).val();\n            self.formTitle = savedTitles ? window.JSON.parse(savedTitles) : this.options.pageTitles;\n\n            if (formDataJSON.length && !Array.isArray(formDataJSON[0])) {\n                var createPage = [];\n                createPage.push(formDataJSON);\n                formDataJSON = createPage;\n            }\n\n            if (formDataJSON.length) {\n                pageCount = formDataJSON.length;\n\n                for (var i = 0; i < pageCount; i++) {\n                    self.formData = formDataJSON[i];\n                    formbId = 'frmb-' + i;\n\n                    if (i == 0) {\n                        self.initialization(formbId);\n                        self.setPageTitle(i);\n                    } else {\n                        self.createNewPage(formbId);\n                        self.setPageTitle(i);\n                    }\n                }\n                $('[data-amcform-role=\"page\"]:first-child').find('a').trigger('click');\n            } else {\n                formbId = 'frmb-' + $('ul[id^=frmb-].frmb').length++;\n                self.formData = formDataJSON;\n                self.initialization(formbId);\n                if ($('[data-amcform-role=\"page\"]').length == 1) {\n                    $('[data-amcform-role=\"page\"]').find('a').trigger('click');\n                }\n            }\n        },\n\n        initialization: function (formbId) {\n            var self = this,\n                $cbUL,\n                boxID = formbId + '-control-box';\n\n            this.lastID = formbId + '-fld-1';\n            this.options.formID = formbId;\n            this.options.pageFormId.push(formbId);\n\n            this.helpers = helper[1](this.options, this);\n            this.utils = helper[0];\n\n            this.layout = this.helpers.editorLayout(this.options.controlPosition);\n\n            // create array of field objects to cycle through\n            var frmbFields = this.options.frmbFields;\n            //frmbFields = this.helpers.orderFields(frmbFields);\n\n            if (this.options.disableFields) {\n                // remove disabledFields\n                frmbFields = frmbFields.filter(function (field) {\n                    return !self.utils.inArray(field.attrs.type, self.options.disableFields);\n                });\n            }\n\n            // Create draggable fields for this.options\n            var cbUl = this.utils.markup('ul', null, {id: boxID, className: 'frmb-control'});\n\n            if (this.options.sortableControls) {\n                cbUl.classList.add('sort-enabled');\n            }\n\n            $cbUL = $(cbUl);\n            this.generateFormFields(frmbFields, $cbUL);\n\n            if (this.options.inputSets.length) {\n                $('<li/>', {'class': 'fb-separator'}).html('<hr>').appendTo($cbUL);\n                this.options.inputSets.forEach(function (set) {\n                    set.name = set.name || this.helpers.makeClassName(set.label);\n                    var $set = $('<li/>', {'class': 'input-set-control', type: set.name});\n                    $set.html(set.label).appendTo($cbUL);\n                });\n            }\n\n            this.generateSortable(formbId, $cbUL);\n            this.generateWrapperContent(formbId, $cbUL);\n\n            $cbUL.prev('.amcustomform-element-tabs').find('li:first-child').click();\n\n            this.observeFields($cbUL, formbId);\n\n            this.helpers.getData();\n            this.loadFields();\n\n            this.sortableFields.css('min-height', $cbUL.height());\n\n            // If option set, controls will remain in view in editor\n            if (this.options.stickyControls) {\n                this.helpers.stickyControls(this.sortableFields, cbUl);\n            }\n\n            document.dispatchEvent(self.events.loaded);\n\n            // Make actions accessible\n            self.actions = {\n                clearFields: self.helpers.removeAllfields,\n                showData: self.helpers.showData,\n                save: self.helpers.save,\n                addField: function addField(field, index) {\n                    self.helpers.stopIndex = self.sortableFields[0].children.length ? index : undefined;\n                    self.prepFieldVars(field);\n                    document.dispatchEvent(self.events.fieldAdded);\n                },\n                removeField: self.helpers.removeField,\n                setData: function setData(formData) {\n                    self.helpers.removeAllfields();\n                    self.helpers.getData(formData);\n                    self.loadFields();\n                }\n            };\n        },\n\n        addCollapseDefaultValueVariables: function (element) {\n            $(element).find('.value-wrap .default-values-link').on('click', function (e) {\n                var variantsBlock = $(e.target).closest('.value-note-wrap').find('.default-value-variants');\n                variantsBlock.slideToggle();\n                e.preventDefault();\n            });\n        },\n\n        addValidateObserve: function ($element) {\n            var self = this,\n                select = $element.find('.fld-validation');\n            this.validateObserve(select);\n\n            select.change(function (e) {\n                self.validateObserve($(e.target));\n            });\n        },\n\n        validateObserve: function ($element) {\n            var regexpBlock = $element.parents('.form-group').next('.form-group.regexp-wrap'),\n                errorBlock = regexpBlock.next('.form-group.errorMessage-wrap');\n\n            if ($element.val() === 'pattern') {\n                regexpBlock.show();\n                errorBlock.show();\n            } else {\n                regexpBlock.hide();\n                errorBlock.hide();\n            }\n        },\n\n        /**\n         * Set page title for current page if there is a saved title\n         * @param page - (int) current page\n         */\n\n        setPageTitle: function (page) {\n            var self = this,\n                id = page + 1;\n\n            if (self.formTitle) {\n                $('#page-title-' + id).val(self.formTitle[page]);\n            }\n        },\n\n        /**\n         * Create new page\n         * @param formbId - (string) id for new form\n         */\n\n        createNewPage: function (formbId) {\n            var self = this,\n                tabCount = $('[data-amcform-js=\"tabs-wrap\"]').children().length,\n                tabId = \"page-\" + tabCount,\n                titleId = 'page-title-' + tabCount,\n                $newPageTemplate = $('[data-amcform-js=\"new-page\"]'),\n                $newPage = $newPageTemplate\n                    .clone()\n                    .removeAttr(\"data-amcform-js\")\n                    .attr(\"id\", tabId)\n                    .addClass(\"fb-editor\"),\n                $newTab = $('[data-amcform-js=\"add-new-page\"]')\n                    .clone()\n                    .removeAttr(\"data-amcform-js\")\n                    .attr('data-amcform-role', 'page')\n                    .removeClass('-new'),\n                $newTitle = $newPage.find('[data-amcform-js=\"title-edit-new\"]');\n\n            $(\"a\", $newTab)\n                .attr(\"href\", \"#\" + tabId)\n                .attr('data-amcform-role', 'page-link')\n                .attr(\"title\", $.mage.__('Page ') + tabCount)\n                .text($.mage.__('Page ') + tabCount);\n\n            $newTitle.attr('data-amcform-js', 'title-edit');\n            $newTitle.find('input').attr('id', titleId);\n            $newTitle.find('label').attr('for', titleId);\n\n            $newPage.insertBefore($newPageTemplate);\n            $newTab.insertBefore('[data-amcform-js=\"add-new-page\"]');\n\n            self.options.formWrapper.tabs(\"refresh\");\n            self.options.formWrapper.tabs(\"option\", \"active\", tabCount - 1);\n\n            self.element = $newPage;\n\n            $('[data-amcform-role=\"page\"]').removeClass('active');\n            $newTab.addClass('active');\n\n            if (!formbId) {\n                self.options.form_json = [];\n                self._create();\n                return;\n            }\n\n            self.initialization(formbId);\n        },\n\n        /**\n         * Delete current page\n         * @param page - DOM node\n         * @param e - event\n         */\n\n        deleteCurentPage: function (page, e) {\n            var self = this,\n                tab = $(page).parent(),\n                prevTab = tab.prev().find('a'),\n                pageId = $(page).prev().attr('href').split('-')[1];\n\n            e.stopPropagation();\n\n            self.downgradeTabNumber(tab);\n\n            tab.remove();\n            $('#page-' + pageId).remove();\n            prevTab.trigger('click');\n        },\n\n        /**\n         * Downgrade tabs number after deleting previos tab\n         * @param tab - DOM element\n         */\n        downgradeTabNumber: function (tab) {\n            var nextTabs = tab.nextAll().find('a');\n\n            nextTabs.each(function (index, page) {\n                if (index == nextTabs.length -1) {\n                    return;\n                }\n\n                var pageValue = $(page).text().split(' '),\n                    newPageId = pageValue[1] - 1,\n                    pageLabel = pageValue[0];\n\n                $(page).text(pageLabel + ' ' + newPageId);\n                $(page).attr('title', pageLabel + ' ' + newPageId);\n            });\n        },\n\n        /**\n         * Navigate between form pages\n         * @param page - DOM node\n         */\n\n        navigatePageForm: function (page) {\n            if ($(page).length > 0) {\n                var pageId = $(page).attr('href'),\n                    tab = $(page).parent(),\n                    tabId = pageId.split('-')[1] - 1,\n                    fields;\n\n                $('[data-amcform-role=\"page\"]').removeClass('active');\n                $(tab).addClass('active');\n                $(pageId).find('.amcustomform-element-tabs li:first-child').trigger('click');\n\n                // Set new settings\n                this.options.formID = 'frmb-' + tabId;\n                fields = $('#' + this.options.formID).children().length + 1;\n                this.lastID = this.options.formID + '-fld-' + fields;\n                this.sortableFields = $('ul#' + this.options.formID + '.frmb.ui-sortable');\n                this.stageWrap = $('div#' + this.options.formID + '-stage-wrap.stage-wrap.pull-left');\n            }\n        },\n\n        navigateKeyboard: function () {\n            this.navigatePageForm(\n                $('[data-amcform-role=\"page\"][aria-selected=\"true\"] a')\n            );\n        },\n\n        /**\n         * @return {array}\n         */\n        getPageTitles: function () {\n            var result = [];\n\n            $.each($('[data-amcform-js=\"title-edit\"] .amcform-input'), function (index, title) {\n                result.push($(title).val());\n            });\n\n            return result;\n        },\n\n        /**\n         * Set page titles in hidden input\n         */\n        savePageTitles: function () {\n            var self = this;\n\n            self.options.pageTitles = this.getPageTitles();\n\n            $('#form_form_title').val(window.JSON.stringify(self.options.pageTitles, null, '\\t'));\n\n            $('[data-amcform-js^=\"title-edit\"] .amcform-input').each(function (key, element) {\n                $(element).attr('disabled', 'disabled');\n            });\n        },\n\n        /**\n         * @return {array}\n         */\n        getSerializedFormConfig: function () {\n            var result = [];\n\n            $.each(this.options.pageFormId, function (index, id) {\n                var form = document.getElementById(id),\n                    json;\n\n                if (form) {\n                    json = this.helpers.prepData(form);\n\n                    if (json.length) {\n                        result.push(json);\n                    }\n                }\n            }.bind(this));\n\n            return result;\n        },\n\n        /**\n         * Save form configuration\n         */\n        generateSaveEvent: function (event) {\n            var self = this;\n\n            self.savePageTitles();\n\n            self.options.fbInstances = this.getSerializedFormConfig();\n\n            var formFields = 'input, textarea, select',\n                formContent = window.JSON.stringify(self.options.fbInstances, null, '');\n            if (formContent.length < 65000) {\n                $('[name=\"form_json\"]').val(formContent);\n                $('.form-wrap').find(formFields).each(function (key, element) {\n                    $(element).removeAttr('required').attr('disabled', 'disabled');\n                });\n            } else {\n                event.preventDefault();\n                self.options.fbInstances = [];\n                self.options.pageTitles = [];\n                alert({\n                    title: $.mage.__('Error'),\n                    content: $.mage.__('You have exceeded the maximum allowed number of fields. Please try to create several forms instead of this one.')\n                });\n            }\n        },\n\n        generateSubtypes: function () {\n            this.options.messages.subtypes = function () {\n                var subtypeDefault = function subtypeDefault(subtype) {\n                    return {\n                        label: subtype,\n                        value: subtype\n                    };\n                };\n\n                return {\n                    text: ['text', 'password', 'email', 'color', 'tel'].map(subtypeDefault),\n                    header: ['h1', 'h2', 'h3'].map(subtypeDefault)\n                };\n            }();\n        },\n\n        generateWrapperContent: function (formbId, $cbUL) {\n            var $formWrap = $('<div/>', {\n                id: formbId + '-form-wrap',\n                'class': 'form-wrap form-builder' + this.helpers.mobileClass()\n            });\n\n            this.stageWrap = $('<div/>', {\n                id: formbId + '-stage-wrap',\n                'class': 'stage-wrap ' + this.layout.stage\n            });\n\n            var controlbWrap = $('<div/>', {\n                id: formbId + '-cb-wrap',\n                'class': 'cb-wrap ' + this.layout.controls\n            });\n\n            /*show type controls*/\n            var typesWrap = $('<ul/>', {\n                'class': 'type-wrap amcform-tabs-wrap -second amcustomform-element-tabs'\n            });\n\n            var fieldsTypes = this.options.fieldsTypes;\n            this.utils.forEach(fieldsTypes, function (i) {\n                var $field = $('<li/>', {\n                    'id': 'amcustomform-type-' + fieldsTypes[i].type,\n                    'type': fieldsTypes[i].type,\n                    'text': fieldsTypes[i].title,\n                    'class': 'amcform-tab'\n                }).appendTo(typesWrap);\n\n                $field.on('click', function () {\n                    $('.amelement-container').hide();\n                    $('.amcustomform-element-tabs li').removeClass('active');\n                    $(this).addClass('active');\n                    var type = $(this).attr('type');\n                    $('.amelement-container[parenttype=\"' + type + '\"]').fadeIn();\n                });\n            });\n\n            controlbWrap.append(typesWrap);\n            controlbWrap.append($cbUL[0]);\n\n            if (this.options.showActionButtons) {\n                // Build our headers and action links\n                var viewDataText = this.options.dataType === 'xml' ? this.options.messages.viewXML : this.options.messages.viewJSON,\n\n                    clearAll = this.utils.markup('button', this.options.messages.clearAll, {\n                        id: formbId + '-clear-all',\n                        type: 'button',\n                        className: 'clear-all btn btn-default'\n                    });\n                var formActions = this.utils.markup('div', [clearAll], {\n                    className: 'form-actions btn-group'\n                });\n\n                controlbWrap.append(formActions);\n            }\n\n            this.stageWrap.append($(this.element).find('[data-amcform-js=\"title-edit\"]'));\n            this.stageWrap.append(this.sortableFields, controlbWrap);\n            this.stageWrap.before($formWrap);\n            $formWrap.append(this.stageWrap, controlbWrap);\n            $(this.element).append($formWrap);\n        },\n\n        generateSortable: function (formbId, $cbUL) {\n            // Sortable fields\n            this.sortableFields = $('<ul/>').attr('id', formbId).addClass('frmb');\n            this.sortableFields.sortable({\n                cursor: 'move',\n                opacity: 0.9,\n                revert: 150,\n                beforeStop: this.helpers.beforeStop,\n                start: this.helpers.startMoving,\n                stop: this.helpers.stopMoving,\n                cancel: 'input, select, .disabled, .form-group, .btn',\n                placeholder: 'frmb-placeholder'\n            });\n\n            // ControlBox with different fields\n            var self = this;\n            $cbUL.sortable({\n                helper: 'clone',\n                opacity: 0.9,\n                connectWith: this.sortableFields,\n                cancel: '.fb-separator',\n                cursor: 'move',\n                scroll: false,\n                placeholder: 'ui-state-highlight',\n                start: this.helpers.startMoving,\n                stop: this.helpers.stopMoving,\n                revert: 150,\n                beforeStop: this.helpers.beforeStop,\n                distance: 3,\n                update: this.helpers.update\n            });\n        },\n\n        generateFormFields: function (frmbFields, $cbUL) {\n            var self = this;\n            this.utils.forEach(frmbFields, function (i) {\n                var $field = $('<li/>', {\n                    'class': 'amelement-container icon-' + frmbFields[i].attrs.className,\n                    'type': frmbFields[i].attrs.type,\n                    'parentType': frmbFields[i].attrs.parentType,\n                    'name': frmbFields[i].className,\n                    'label': frmbFields[i].attrs.label\n                });\n\n                var $title = $('<div/>', {\n                    'class': 'amelement-title',\n                    'html': frmbFields[i].label\n                }).appendTo($field);\n\n                var $contentContainer = $('<div/>', {\n                    'class': 'amelement-content',\n                    'html': frmbFields[i].content\n                }).appendTo($field);\n\n                $field.data('newFieldData', frmbFields[i]);\n\n                $field.appendTo($cbUL);\n\n                if (frmbFields[i].attrs.type == 'date') {\n                    self.helpers.updateDateField($field, frmbFields[i].attrs.format);\n                }\n            });\n        },\n\n        saveAndUpdate: function () {\n            var self = this;\n            return this.helpers.debounce(function (evt) {\n                if (evt) {\n                    if (evt.type === 'keyup' && this.name === 'className') {\n                        return false;\n                    }\n                }\n\n                var $field = $(this).parents('.form-field:eq(0)');\n                self.helpers.updatePreview($field);\n                self.helpers.save();\n            });\n        },\n\n        processControl: function (control) {\n            if (control[0].classList.contains('input-set-control')) {\n                var inputSet = this.options.inputSets.filter(function (set) {\n                    return set.name === control[0].type;\n                })[0];\n                if (inputSet.showHeader) {\n                    var header = {\n                        type: 'header',\n                        subtype: 'h2',\n                        id: inputSet.name,\n                        label: inputSet.label\n                    };\n                    this.prepFieldVars(header, true);\n                }\n                inputSet.fields.forEach(function (field) {\n                    //TODO Check this\n                    this.prepFieldVars(field, true);\n                }).bind(this);\n            } else {\n                this.prepFieldVars(control, true);\n            }\n        },\n\n        prepFieldVars: function ($field) {\n            var isNew = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false,\n                self = this;\n\n            var field = {};\n            if ($field instanceof jQuery) {\n                var fieldData = $field.data('newFieldData');\n                if (fieldData) {\n                    field = fieldData.attrs;\n                    field.label = fieldData.label;\n                    field.options = fieldData.options;\n                    if (fieldData.childs) {\n                        $(fieldData.childs).each(function (i, child) {\n                            var element = $('.amelement-container[type=\"' + child.type + '\"]');\n                            if (element) {\n                                var childData = element.data('newFieldData');\n                                if (childData) {\n                                    var childField = childData.attrs;\n                                    childField.label = childData.label;\n                                    childField.options = childData.options;\n                                    childField = Object.assign(childField, child.data);\n                                    self.prepFieldVars(childField, true);\n                                }\n                            }\n                        });\n                        return;\n                    }\n                } else {\n                    var attrs = $field[0].attributes;\n                    if (!isNew) {\n                        field.values = $field.children().map(function (index, elem) {\n                            return {\n                                label: $(elem).text(),\n                                value: $(elem).attr('value'),\n                                selected: Boolean($(elem).attr('selected'))\n                            };\n                        });\n                    }\n\n                    for (var i = attrs.length - 1; i >= 0; i--) {\n                        field[attrs[i].name] = attrs[i].value;\n                    }\n                }\n            } else {\n                field = Object.assign({}, $field);\n            }\n\n            field.name = isNew ? this.nameAttr(field) : field.name || this.nameAttr(field);\n\n            switch (field.type) {\n                case 'country' :\n                    field.type = 'dropdown';\n                    break;\n            }\n\n            if (isNew && this.utils.inArray(\n                field.type,\n                ['textinput', 'number', 'file', 'dropdown', 'listbox', 'textarea']\n            )\n            ) {\n                field.className = 'form-control'; // backwards compatibility\n            } else {\n                field.className = field.class || field.className; // backwards compatibility\n            }\n\n            var match = /(?:^|\\s)btn-(.*?)(?:\\s|$)/g.exec(field.className);\n            if (match) {\n                field.style = match[1];\n            }\n\n            this.utils.escapeAttrs(field);\n\n            this.appendNewField(field);\n            if (isNew) {\n                document.dispatchEvent(this.events.fieldAdded);\n            }\n            this.stageWrap.removeClass('empty');\n        },\n\n        appendNewField: function (values) {\n            var self = this,\n                type = values.type || 'text',\n                label = values.label\n                    || this.options.messages[type]\n                    || (values.type === 'wysiwyg' ? $.mage.__('Wysiwyg') : this.options.messages.label),\n                delBtn = this.utils.markup('a', this.options.messages.remove, {\n                    id: 'del_' + this.lastID,\n                    className: 'del-button btn delete-confirm',\n                    title: this.options.messages.removeMessage\n                }),\n                toggleBtn = this.utils.markup('a', null, {\n                    id: this.lastID + '-edit',\n                    className: 'toggle-form btn icon-pencil',\n                    title: this.options.messages.hide\n                }),\n                copyBtn = this.utils.markup('a', this.options.messages.copyButton, {\n                    id: this.lastID + '-copy',\n                    className: 'copy-button btn icon-copy',\n                    title: this.options.messages.copyButtonTooltip\n                }),\n                liContents = this.utils.markup(\n                    'div',\n                    [toggleBtn, copyBtn, delBtn],\n                    { className: 'field-actions' }\n                ).outerHTML;\n\n            // Field preview Label\n            if (['hone', 'text', 'htwo', 'hthree'].indexOf(type) != -1) {\n                label = ''; //do not show label for text elements\n            }\n            liContents += '<label class=\"field-label\">' + label + '</label>';\n            var requiredDisplay = values.required ? 'style=\"display:inline\"' : '';\n            liContents += '<span class=\"required-asterisk\" ' + requiredDisplay + '> *</span>';\n            liContents += this.utils.markup('a', 'x', {className: 'close-field top-close-field'}).outerHTML;\n            if (values.description) {\n                liContents += '<span class=\"tooltip-element\" tooltip=\"' + values.description + '\">?</span>';\n            }\n\n            liContents = '<div class=\"field-label-container\">' + liContents + '</div>';\n\n            liContents += this.utils.markup('div', '', {className: 'prev-holder'}).outerHTML;\n            liContents += '<div id=\"' + this.lastID + '-holder\" class=\"frm-holder\">';\n            liContents += '<div class=\"form-elements\">';\n\n            liContents += this.advFields(values);\n            liContents += this.utils.markup('a', this.options.messages.close, {className: 'close-field'}).outerHTML;\n\n            liContents += '</div>';\n            liContents += '</div>';\n\n            var field = this.utils.markup('li', liContents, {\n                    'class': type + '-field form-field',\n                    'type': type,\n                    id: this.lastID\n                }),\n                $li = $(field);\n\n            $li.data('fieldData', {attrs: values});\n            if (typeof this.helpers.stopIndex !== 'undefined') {\n                $('> li', this.sortableFields).eq(this.helpers.stopIndex).before($li);\n            } else {\n                this.sortableFields.append($li);\n            }\n\n            $('.sortable-options', $li).sortable({\n                update: function update() {\n                    self.helpers.updatePreview($li);\n                }\n            }); // make dynamically added option fields sortable if they exist.\n\n            if (values.type == 'date') {\n                $li.attr('date-format', this.options.format);\n            }\n            this.helpers.updatePreview($li);\n\n            if (this.options.editOnAdd) {\n                this.helpers.closeAllEdit(this.sortableFields);\n                this.helpers.toggleEdit(this.lastID);\n            }\n\n            if (this.options.typeUserEvents[type] && this.options.typeUserEvents[type].onadd) {\n                this.options.typeUserEvents[type].onadd(field);\n            }\n\n            this.lastID = this.helpers.incrementId(this.lastID);\n            this.addCollapseDefaultValueVariables(field);\n            this.addValidateObserve($li);\n        },\n\n        // Add append and prepend options if necessary\n        nonEditableFields: function () {\n            var cancelArray = [];\n\n            if (this.options.prepend && !$('.disabled.prepend', this.sortableFields).length) {\n                var prependedField = this.utils.markup('li', this.options.prepend, {className: 'disabled prepend'});\n                cancelArray.push(true);\n                this.sortableFields.prepend(prependedField);\n            }\n\n            if (this.options.append && !$('.disabled.append', this.sortableFields).length) {\n                var appendedField = this.utils.markup('li', this.options.append, {className: 'disabled append'});\n                cancelArray.push(true);\n                this.sortableFields.append(appendedField);\n            }\n\n            if (cancelArray.some(function (elem) {\n                return elem === true;\n            })) {\n                this.stageWrap.removeClass('empty');\n            }\n        },\n\n        // Parse saved XML template data\n        loadFields: function () {\n            var self = this;\n            var formData = this.formData;\n            if (formData && formData.length) {\n                for (var i = 0; i < formData.length; i++) {\n                    this.prepFieldVars(formData[i]);\n                }\n                this.stageWrap.removeClass('empty');\n            } else if (this.options.defaultFields && this.options.defaultFields.length) {\n                // Load default fields if none are set\n                this.options.defaultFields.forEach(function (field) {\n                    return self.prepFieldVars(field);\n                });\n                this.stageWrap.removeClass('empty');\n            } else if (!this.options.prepend && !this.options.append) {\n                this.stageWrap.addClass('empty').attr('data-content', this.options.messages.getStarted);\n            }\n            this.helpers.save();\n\n            $('li.form-field:not(.disabled)', this.sortableFields).each(function () {\n                self.helpers.updatePreview($(this));\n            });\n\n            this.nonEditableFields();\n        },\n\n        nameAttr: function (field) {\n            var epoch = new Date().getTime();\n            return field.type + '-' + epoch;\n        },\n\n        /**\n         * Add data for field with options [select, checkbox-group, radio-group]\n         *\n         * @todo   refactor this nasty ~crap~ code, its actually painful to look at\n         * @param  {object} values\n         */\n        fieldOptions: function (values) {\n            var self = this;\n            var optionActions = [this.utils.markup('a', this.options.messages.addOption, {className: 'add add-opt'})],\n                fieldOptions = ['<label class=\"false-label\">' + this.options.messages.selectOptions + '</label>'],\n                isMultiple = values.multiple || values.type.match(/(listbox|checkbox|checkboxtwo|checkbox-group)/);\n\n            if (!values.values || !values.values.length) {\n                var counter = [1, 2, 3],\n                    optionLabel = self.options.messages.option;\n\n                if (values.type === 'rating') {\n                    counter = [1, 2, 3, 4, 5];\n                    optionLabel = self.options.messages.star;\n                }\n\n                if (values.options) {\n                    values.values = values.options;\n                } else {\n                    values.values = counter.map(function (index) {\n                        var label = optionLabel + ' ' + index,\n                            option = {\n                                selected: false,\n                                label: label,\n                                value: self.utils.hyphenCase(label)\n                            };\n                        return option;\n                    });\n                }\n\n                values.values[0].selected = true;\n            }\n\n            fieldOptions.push('<div class=\"sortable-options-wrap\">');\n\n            fieldOptions.push('<ol class=\"sortable-options\">');\n\n            var emptyFieldSelected = ' checked=\"true\"',\n                valuesOptions = [];\n            this.utils.forEach(values.values, function (i) {\n                if (values.values[i].selected) {\n                    emptyFieldSelected = '';\n                }\n                valuesOptions.push(self.selectFieldOptions(values.name, values.values[i], isMultiple));\n            });\n\n            fieldOptions = fieldOptions.concat(valuesOptions);\n\n            fieldOptions.push('</ol>');\n            fieldOptions.push(this.utils.markup('div', optionActions, {className: 'option-actions'}).outerHTML);\n            fieldOptions.push('</div>');\n\n            return this.utils.markup('div', fieldOptions.join(''), {className: 'form-group field-options'}).outerHTML;\n        },\n\n        /**\n         * Build the editable properties for the field\n         * @param  {object} values configuration object for advanced fields\n         * @return {String}        markup for advanced fields\n         */\n        advFields: function (values) {\n            var advFields = [],\n                optionFields = ['dropdown', 'listbox', 'checkbox', 'radio', 'checkboxtwo', 'radiotwo', 'rating', 'country'],\n                isOptionField = function () {\n                    return optionFields.indexOf(values.type) !== -1;\n                }(),\n                valueField = !this.utils.inArray(values.type, ['header', 'paragraph', 'file'].concat(optionFields));\n\n            advFields.push(this.textAttribute('name', values));\n            advFields.push(this.hiddenAttribute('entity_id', values));\n\n            if (values.type !== 'wysiwyg') {\n                advFields.push(this.textAttribute('label', values));\n            } else {\n                advFields.push(this.hiddenAttribute('value', values));\n            }\n\n            // Class\n            advFields.push(this.textAttribute('className', values));\n            advFields.push(this.textAttribute('style', values));\n\n            if (values.parentType !== 'other' || isOptionField) {\n\n                advFields.push(this.textAttribute('placeholder', values));\n                advFields.push(this.requiredField(values));\n                advFields.push(this.textAttribute('description', values));\n\n                if (values.type === 'checkbox' || values.type === 'checkboxtwo') {\n                    advFields.push(this.boolAttribute('toggle', values, {first: this.options.messages.toggle}));\n                }\n\n                values.size = values.size || 'm';\n                values.style = values.style || 'default';\n\n                //Help Text / Description Field\n                /* if (!this.utils.inArray(values.type, ['header', 'paragraph', 'button'])) {\n\n                 }*/\n\n                if (this.options.messages.subtypes[values.type]) {\n                    var optionData = this.options.messages.subtypes[values.type];\n                    advFields.push(this.selectAttribute('subtype', values, optionData));\n                }\n\n                if (values.type === 'number') {\n                    advFields.push(this.numberAttribute('min', values));\n                    advFields.push(this.numberAttribute('max', values));\n                    advFields.push(this.numberAttribute('step', values));\n                }\n\n                if (values.type === 'textinput') {\n                    advFields.push(this.selectAttribute('validation', values, this.options.messages.validations));\n                    advFields.push(this.textAttribute('regexp', values));\n                    advFields.push(this.textAttribute('errorMessage', values));\n                }\n\n                if (values.type === 'date') {\n                    values.validation = 'validate-date';\n                    advFields.push(this.hiddenAttribute('validation', values));\n                }\n\n                //TextArea Rows Attribute\n                if (values.type === 'textarea') {\n                    advFields.push(this.numberAttribute('rows', values));\n                }\n\n                if (valueField && values.type != 'googlemap') {\n                    advFields.push(this.textAttribute('value', values));\n                } else if (values.type == 'googlemap') {\n                    advFields.push(this.hiddenAttribute('value', values));\n                }\n\n                if (values.type === 'file') {\n                    advFields.push(this.textAttribute('allowed_extension', values));\n                    advFields.push(this.textAttribute('max_file_size', values));\n\n                    var labels = {\n                        first: this.options.messages.multipleFiles,\n                        second: this.options.messages.allowMultipleFiles\n                    };\n                    advFields.push(this.boolAttribute('multiple', values, labels));\n                }\n                /* other feature for future\n                if (values.type === 'checkbox' || values.type === 'radio') {\n                    advFields.push(this.boolAttribute('other', values, {\n                        first: this.options.messages.enableOther,\n                        second: this.options.messages.enableOtherMsg\n                    }));\n                }*/\n\n                if (isOptionField) {\n                    advFields.push(this.fieldOptions(values));\n                }\n\n                if (this.utils.inArray(values.type, ['textinput', 'textarea'])) {\n                    advFields.push(this.numberAttribute('maxlength', values));\n                }\n\n                // Append custom attributes as defined in typeUserAttrs option\n                if (this.options.typeUserAttrs[values.type]) {\n                    advFields.push(this.processTypeUserAttrs(this.options.typeUserAttrs[values.type], values));\n                }\n            }\n            var dependency = [];\n            if (values.dependency) {\n                dependency = values.dependency;\n            }\n            advFields.push(this.fieldDependencyArea(dependency, values.name));\n\n            advFields.push(this.selectAttribute('layout', values, this.options.messages.layouts));\n\n            advFields.push(this.hiddenAttribute('parentType', values));\n\n            return advFields.join('');\n        },\n\n\n        processTypeUserAttrs: function (typeUserAttr, values) {\n            var advField = [];\n\n            for (var attribute in typeUserAttr) {\n                if (typeUserAttr.hasOwnProperty(attribute)) {\n                    var orig = this.options.messages[attribute];\n                    var origValue = typeUserAttr[attribute].value;\n                    typeUserAttr[attribute].value = values[attribute] || typeUserAttr[attribute].value || '';\n\n                    if (typeUserAttr[attribute].label) {\n                        this.options.messages[attribute] = typeUserAttr[attribute].label;\n                    }\n\n                    if (typeUserAttr[attribute].options) {\n                        advField.push(selectUserAttrs(attribute, typeUserAttr[attribute]));\n                    } else {\n                        advField.push(inputUserAttrs(attribute, typeUserAttr[attribute]));\n                    }\n\n                    this.options.messages[attribute] = orig;\n                    typeUserAttr[attribute].value = origValue;\n                }\n            }\n\n            return advField.join('');\n        },\n\n        inputUserAttrs: function (name, attrs) {\n            var textAttrs = {\n                    id: name + '-' + this.lastID,\n                    title: attrs.description || attrs.label || name.toUpperCase(),\n                    name: name,\n                    type: attrs.type || 'text',\n                    className: ['fld-' + name]\n                },\n                label = '<label for=\"' + textAttrs.id + '\">' + this.options.messages[name] + '</label>';\n\n            if (!this.utils.inArray(textAttrs.type, ['checkbox', 'radio', 'checkboxtwo', 'radiotwo'])) {\n                textAttrs.className.push('form-control');\n            }\n\n            if (attrs.type === 'datetime') {\n                attrs.type = 'datetime-local';\n            }\n\n            textAttrs = Object.assign({}, attrs, textAttrs);\n            var textInput = '<input ' + this.utils.attrString(textAttrs) + '>',\n                inputWrap = '<div class=\"input-wrap\">' + textInput + '</div>';\n\n            return '<div class=\"form-group ' + name + '-wrap\">' + label + inputWrap + '</div>';\n        },\n\n        selectUserAttrs: function (name, options) {\n            var optis = Object.keys(options.options).map(function (val) {\n                    var attrs = {value: val};\n                    if (val === options.value) {\n                        attrs.selected = null;\n                    }\n                    return '<option ' + this.utils.attrString(attrs) + '>' + options.options[val] + '</option>';\n                }),\n                selectAttrs = {\n                    id: name + '-' + this.lastID,\n                    title: options.description || options.label || name.toUpperCase(),\n                    name: name,\n                    className: 'fld-' + name + ' form-control'\n                },\n                label = '<label for=\"' + selectAttrs.id + '\">' + this.options.messages[name] + '</label>';\n\n            Object.keys(options).filter(function (prop) {\n                return !utils.inArray(prop, ['value', 'options', 'label']);\n            }).forEach(function (attr) {\n                selectAttrs[attr] = options[attr];\n            });\n\n            var select = '<select ' + this.utils.attrString(selectAttrs) + '>' + optis.join('') + '</select>',\n                inputWrap = '<div class=\"input-wrap\">' + select + '</div>';\n            return '<div class=\"form-group ' + name + '-wrap\">' + label + inputWrap + '</div>';\n        },\n\n        boolAttribute: function (name, values, labels) {\n            if (this.options.typeUserAttrs[values.type] && this.options.typeUserAttrs[values.type][name]) {\n                return;\n            }\n\n            var checked = values[name] !== undefined ? 'checked' : '',\n                input = '<input type=\"checkbox\" class=\"fld-' + name + '\" name=\"' + name + '\" value=\"true\" ' + checked + ' id=\"' + name + '-' + this.lastID + '\"/> ',\n                left = [],\n                right = [input];\n\n            if (labels.first) {\n                left.unshift(this.label(labels.first));\n            }\n\n            if (labels.second) {\n                right.push(this.label(labels.second));\n            }\n\n            if (labels.content) {\n                right.push(labels.content);\n            }\n\n            right.unshift('<div class=\"input-wrap\">');\n            right.push('</div>');\n\n            return '<div class=\"form-group ' + name + '-wrap\">' + left.concat(right).join('') + '</div>';\n        },\n\n        label: function (txt) {\n            return '<label for=\"' + name + '-' + this.lastID + '\">' + txt + '</label>';\n        },\n\n        btnStyles: function (style, type) {\n            var tags = {\n                    button: 'btn'\n                },\n                styles = this.options.messages.styles[tags[type]],\n                styleField = '';\n\n            if (styles) {\n                var styleLabel = '<label>' + this.options.messages.style + '</label>';\n                styleField += '<input value=\"' + style + '\" name=\"style\" type=\"hidden\" class=\"btn-style\">';\n                styleField += '<div class=\"btn-group\" role=\"group\">';\n\n                Object.keys(this.options.messages.styles[tags[type]]).forEach(function (element) {\n                    var active = style === element ? 'active' : '';\n                    styleField += '<button value=\"' + element + '\" type=\"' + type + '\" class=\"' + active + ' btn-xs ' + tags[type] + ' ' + tags[type] + '-' + element + '\">' + this.options.messages.styles[tags[type]][element] + '</button>';\n                });\n\n                styleField += '</div>';\n\n                styleField = '<div class=\"form-group style-wrap\">' + styleLabel + ' ' + styleField + '</div>';\n            }\n\n            return styleField;\n        },\n\n        /**\n         * Add a number attribute to a field.\n         * @param  {String} attribute\n         * @param  {Object} values\n         * @return {String}\n         */\n        numberAttribute: function (attribute, values) {\n            if (this.options.typeUserAttrs[values.type] && this.options.typeUserAttrs[values.type][attribute]) {\n                return '';\n            }\n\n            var attrVal = values[attribute],\n                attrLabel = this.options.messages[attribute] || attribute,\n                placeholder = this.options.messages.placeholders[attribute],\n                inputConfig = {\n                    type: 'number',\n                    value: attrVal,\n                    name: attribute,\n                    min: '0',\n                    placeholder: placeholder,\n                    className: 'fld-' + attribute + ' form-control',\n                    id: attribute + '-' + this.lastID\n                },\n                numberAttribute = '<input ' + this.utils.attrString(this.utils.trimObj(inputConfig)) + '>',\n                inputWrap = '<div class=\"input-wrap\">' + numberAttribute + '</div>';\n\n            return '<div class=\"form-group ' + attribute + '-wrap\"><label for=\"' + inputConfig.id + '\">'\n                + attrLabel + '</label> ' + inputWrap + '</div>';\n\n        },\n\n        selectAttribute: function (attribute, values, optionData) {\n            if (this.options.typeUserAttrs[values.type] && this.options.typeUserAttrs[values.type][attribute]) {\n                return;\n            }\n            var self = this,\n                allowedTypes = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n            var selectOptions = optionData.map(function (option, i) {\n                    if (allowedTypes && allowedTypes.indexOf(option.type) === -1) {\n                        return false;\n                    }\n                    var optionAttrs = Object.assign({\n                        label: self.options.messages.option + ' ' + i,\n                        value: undefined\n                    }, option);\n\n                    if (values[attribute] != undefined) {\n                        try {\n                            var validationJson = JSON.parse(values[attribute].replace(/&quot;/g, '\"'));\n                        } catch (ex) {\n                            validationJson = {validation: values[attribute]};\n                        }\n\n                        if (validationJson.hasOwnProperty(\"validation\") && (option.value === validationJson.validation)) {\n                            optionAttrs.selected = true;\n                        }\n                    }\n\n                    return '<option ' + self.utils.attrString(self.utils.trimObj(optionAttrs)) + '>'\n                        + optionAttrs.label + '</option>';\n                }),\n                selectAttrs = {\n                    id: attribute + '-' + this.lastID,\n                    name: attribute,\n                    value: attribute,\n                    className: 'fld-' + attribute + ' form-control'\n                },\n\n                label = '<label for=\"' + selectAttrs.id + '\">' + (this.options.messages[attribute]\n                    || this.utils.capitalize(attribute)) + '</label>';\n\n\n            var select = '<select ' + this.utils.attrString(selectAttrs) + '>' + selectOptions.join('') + '</select>',\n                inputWrap = '<div class=\"input-wrap\">' + select + '</div>';\n\n            return '<div class=\"form-group ' + selectAttrs.name + '-wrap\">' + label + inputWrap + '</div>';\n        },\n\n        /**\n         * Generate some text inputs for field attributes, **will be replaced**\n         * @param  {String} attribute\n         * @param  {Object} values\n         * @return {String}\n         */\n        textAttribute: function (attribute, values) {\n            if (this.options.typeUserAttrs[values.type] && this.options.typeUserAttrs[values.type][attribute]) {\n                return '';\n            }\n\n            var textArea = ['paragraph'];\n\n            var attrVal = values[attribute] || '',\n                attrLabel = this.options.messages[attribute];\n            if (attribute === 'label' && this.utils.inArray(values.type, textArea)) {\n                attrLabel = this.options.messages.content;\n            }\n\n            var placeholderFields = ['textinput', 'textarea', 'dropdown'];\n            var placeholders = this.options.messages.placeholders,\n                placeholder = placeholders[attribute] || '',\n                attributefield = '',\n                noMakeAttr = [];\n            // Field has placeholder attribute\n            if (attribute === 'placeholder' && !this.utils.inArray(values.type, placeholderFields)) {\n                noMakeAttr.push(true);\n            }\n\n            if (!noMakeAttr.some(function (elem) {\n                return elem === true;\n            })) {\n                var inputConfig = {\n                    name: attribute,\n                    placeholder: placeholder,\n                    className: 'fld-' + attribute + ' form-control',\n                    id: attribute + '-' + this.lastID\n                };\n                var attributeLabel = '<label for=\"' + inputConfig.id + '\">' + attrLabel + '</label>';\n\n                if (attribute === 'label' && this.utils.inArray(values.type, textArea)\n                    || attribute === 'value' && values.type === 'textarea') {\n                    attributefield += '<textarea ' + this.utils.attrString(inputConfig) + '>' + attrVal + '</textarea>';\n                } else if (attribute === 'value' && values.type === 'date') {\n                    inputConfig.value = attrVal;\n                    inputConfig.type = 'date';\n                    attributefield += '<input ' + this.utils.attrString(inputConfig) + '>';\n                } else {\n                    inputConfig.value = attrVal;\n                    inputConfig.type = 'text';\n                    attributefield += '<input ' + this.utils.attrString(inputConfig) + '>';\n                }\n                var note = this.getNote(attribute, values),\n                    inputWrap = '<div class=\"input-wrap\">' + attributefield + note +'</div>';\n\n                attributefield = '<div class=\"form-group ' + attribute + '-wrap\">' + attributeLabel + ' ' + inputWrap + '</div>';\n            }\n\n            return attributefield;\n        },\n\n        getNote: function (attribute, values) {\n            var allowTypes = ['textinput', 'textarea', 'number'],\n                note = '';\n\n            if (attribute === 'value' && allowTypes.includes(values.type)) {\n                $.each(this.options.messages['notes'][attribute], function (index, noteData) {\n                    var variables = '',\n                        noteVariant ='';\n\n                    if (typeof values.entityType === 'undefined' || values.entityType === noteData.allowedEntityType) {\n                        noteVariant = '<a class=\"default-values-link\" href=\"#\">'\n                            + noteData['label']\n                            + '</a>';\n\n                        noteData.values.forEach(function (value) {\n                            variables += '<div class=\"variable\">' + value + '</div>'\n                        });\n                        noteVariant += '<div class=\"default-value-variants\">' + variables + '</div>';\n                        note += '<div class=\"value-note-wrap\">' + noteVariant + '</div>';\n                    }\n                });\n            }\n\n            return note;\n        },\n\n        hiddenAttribute: function (attribute, values) {\n            var attrValue = values[attribute] || '',\n                attributeField = '<input class=\"fld-' + attribute + ' form-control\" type=\"hidden\" name=\"'\n                    + attribute + '\" value=\"' + attrValue + '\">';\n\n            return attributeField;\n        },\n\n        requiredField: function (values) {\n            var noRequire = ['header', 'paragraph', 'button'],\n                noMake = [],\n                requireField = '';\n\n            if (this.utils.inArray(values.type, noRequire)) {\n                noMake.push(true);\n            }\n            if (!noMake.some(function (elem) {\n                return elem === true;\n            })) {\n                requireField = this.boolAttribute('required', values, {first: this.options.messages.required});\n            }\n\n            return requireField;\n        },\n\n        // Select field html, since there may be multiple\n        selectFieldOptions: function (name, optionData, multipleSelect) {\n            var optionInputType = {\n                    selected: multipleSelect ? 'checkbox' : 'radio'\n                },\n                optionDataOrder = ['value', 'label', 'selected'],\n                optionInputs = [];\n\n            optionData = Object.assign({selected: false, label: '', value: ''}, optionData);\n\n            for (var i = optionDataOrder.length - 1; i >= 0; i--) {\n                var prop = optionDataOrder[i];\n                if (optionData.hasOwnProperty(prop)) {\n                    var attrs = {\n                        type: optionInputType[prop] || 'text',\n                        'class': 'option-' + prop,\n                        value: optionData[prop],\n                        name: name + '-option'\n                    };\n\n                    if (this.options.messages.placeholders[prop]) {\n                        attrs.placeholder = this.options.messages.placeholders[prop];\n                    }\n\n                    if (prop === 'selected'\n                        && (optionData.selected === \"1\" || optionData.selected === true)\n                    ) {\n                        attrs.checked = optionData.selected;\n                    }\n\n                    optionInputs.push(this.utils.markup('input', null, attrs));\n                }\n            }\n\n            var removeAttrs = {\n                className: 'remove btn',\n                title: this.options.messages.removeMessage\n            };\n\n            optionInputs.push(this.utils.markup('a', this.options.messages.remove, removeAttrs));\n            var field = this.utils.markup('li', optionInputs);\n\n            return field.outerHTML;\n        },\n\n\n        cloneItem: function (currentItem) {\n            var self = this;\n            var currentId = currentItem.attr('id'),\n                type = currentItem.attr('type'),\n                ts = new Date().getTime(),\n                cloneName = type + '-' + ts;\n\n            var $clone = currentItem.clone();\n\n            $clone.find('[id]').each(function () {\n                this.id = this.id.replace(currentId, self.lastID);\n            });\n\n            $clone.find('[for]').each(function () {\n                this.setAttribute('for', this.getAttribute('for').replace(currentId, self.lastID));\n            });\n\n            $clone.each(function () {\n                $('e:not(.form-elements)').each(function () {\n                    var newName = this.getAttribute('name');\n                    newName = newName.substring(0, newName.lastIndexOf('-') + 1);\n                    newName = newName + ts.toString();\n                    this.setAttribute('name', newName);\n                });\n            });\n\n            $clone.find('.form-elements').find(':input').each(function () {\n                if (this.getAttribute('name') === 'name') {\n                    var newVal = this.getAttribute('value');\n                    newVal = newVal.substring(0, newVal.lastIndexOf('-') + 1);\n                    newVal = newVal + ts.toString();\n                    this.setAttribute('value', newVal);\n                }\n            });\n\n            $clone.attr('id', this.lastID);\n            $clone.attr('name', cloneName);\n            $clone.addClass('cloned');\n            $('.sortable-options', $clone).sortable();\n\n            if (this.options.typeUserEvents[type] && this.options.typeUserEvents[type].onclone) {\n                this.options.typeUserEvents[type].onclone($clone[0]);\n            }\n\n            this.lastID = this.helpers.incrementId(this.lastID);\n            return $clone;\n        },\n\n        observeFields: function ($cbUL, formbId) {\n            var self = this;\n            // Save field on change\n            this.sortableFields.on(\n                'change blur keyup click', '.form-elements input, .form-elements select, .form-elements textarea, .toggle-form',\n                self.saveAndUpdate()\n            );\n\n            $('li', $cbUL).click(function (e) {\n                self.helpers.stopIndex = undefined;\n                self.processControl($(this));\n                self.helpers.save();\n                e.preventDefault();\n            });\n\n            // callback to track disabled tooltips\n            this.sortableFields.on('mousemove', 'li.disabled', function (e) {\n                $('.frmb-tt', this).css({\n                    left: e.offsetX - 16,\n                    top: e.offsetY - 34\n                });\n            });\n\n            // callback to call disabled tooltips\n            this.sortableFields.on('mouseenter', 'li.disabled', function () {\n                self.helpers.disabledTT.add($(this));\n            });\n\n            // callback to call disabled tooltips\n            this.sortableFields.on('mouseleave', 'li.disabled', function () {\n                self.helpers.disabledTT.remove($(this));\n            });\n\n            // ---------------------- UTILITIES ---------------------- //\n            // delete options\n            this.sortableFields.on('click touchstart', '.remove', function (e) {\n                var $field = $(this).parents('.form-field:eq(0)');\n                e.preventDefault();\n                var optionsCount = $(this).parents('.sortable-options:eq(0)').children('li').length;\n                if (optionsCount <= 0) {\n                    self.options.notify.error('Error: ' + self.options.messages.minOptionMessage);\n                } else {\n                    $(this).parent('li').slideUp('250', function () {\n                        $(this).remove();\n                        self.helpers.updatePreview($field);\n                        self.helpers.save();\n                    });\n                }\n            });\n\n            // touch focus\n            this.sortableFields.on('touchstart', 'input', function (e) {\n                if (e.handled !== true) {\n                    if ($(this).attr('type') === 'checkbox') {\n                        $(this).trigger('click');\n                    } else {\n                        $(this).focus();\n                        var fieldVal = $(this).val();\n                        $(this).val(fieldVal);\n                    }\n                } else {\n                    return false;\n                }\n            });\n\n            // toggle fields\n            this.sortableFields.on('click touchstart', '.toggle-form, .close-field', function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n                if (e.handled !== true) {\n                    var targetID = $(this).parents('.form-field:eq(0)').attr('id');\n                    self.helpers.toggleEdit(targetID);\n                    e.handled = true;\n                } else {\n                    return false;\n                }\n            });\n\n            this.sortableFields.on('change', '.prev-holder input, .prev-holder select', function (e) {\n                if (e.target.classList.contains('other-option') || $(e.target).attr('type') == 'googlemap') {\n                    return;\n                }\n                var field = $(e.target).closest('li.form-field')[0];\n                if (self.utils.inArray(field.type, ['checkbox', 'checkboxtwo'])) {\n                    field.querySelector('[class=\"option-value\"][value=\"' + e.target.value + '\"]')\n                        .parentElement.childNodes[0].checked = field\n                        .querySelector('.prev-holder input[value=\"' + e.target.value + '\"]').checked;\n                } else if (self.utils.inArray(field.type, ['listbox'])) {\n                    $(field).find('[class=\"option-selected\"]').attr('checked', false);\n                    $.each($(field).find('.prev-holder select').val(), function (key, value) {\n                        field.querySelector('[class=\"option-value\"][value=\"' + value + '\"]')\n                            .parentElement.childNodes[0].checked = true;\n                    });\n                } else if (self.utils.inArray(field.type, ['dropdown', 'rating', 'radio', 'radiotwo'])) {\n                    field.querySelector('[class=\"option-value\"][value=\"' + e.target.value + '\"]')\n                        .parentElement.childNodes[0].checked = true;\n                } else {\n                    document.getElementById('value-' + field.id).value = e.target.value;\n                }\n\n                self.helpers.save();\n            });\n\n            // update preview to wysiwyg\n            this.sortableFields.on('change', '.prev-holder [type=wysiwyg]', _.debounce(function () {\n                self.helpers.save();\n            }, 1000));\n\n            // update preview to label\n            this.sortableFields.on('keyup change', '[name=\"label\"]', function () {\n                $('.field-label', $(this).closest('li:not(.hone-field):not(.text-field):not(.hthree-field):not(.htwo-field)')).text($(this).val());\n            });\n\n            // remove error styling when users tries to correct mistake\n            this.sortableFields.delegate('input.error', 'keyup', function () {\n                $(this).removeClass('error');\n            });\n\n            // update preview for description\n            this.sortableFields.on('keyup', 'input[name=\"description\"]', function () {\n                var $field = $(this).parents('.form-field:eq(0)');\n                var closestToolTip = $('.tooltip-element', $field);\n                var ttVal = $(this).val();\n                if (ttVal !== '') {\n                    if (!closestToolTip.length) {\n                        var tt = '<span class=\"tooltip-element\" tooltip=\"' + ttVal + '\">?</span>';\n                        $('.field-label', $field).after(tt);\n                    } else {\n                        closestToolTip.attr('tooltip', ttVal).css('display', 'inline-block');\n                    }\n                } else {\n                    if (closestToolTip.length) {\n                        closestToolTip.css('display', 'none');\n                    }\n                }\n            });\n\n            this.sortableFields.on('change', '.fld-multiple', function (e) {\n                var newType = e.target.checked ? 'checkbox' : 'radio';\n\n                $(e.target).parents('.form-elements:eq(0)')\n                    .find('.sortable-options input.option-selected').each(function () {\n                    this.type = newType;\n                });\n            });\n\n            // format name attribute\n            this.sortableFields.on('blur', 'input.fld-name', function () {\n                this.value = self.helpers.safename(this.value);\n                if (this.value === '') {\n                    $(this).addClass('field-error').attr('placeholder', self.options.messages.cannotBeEmpty);\n                } else {\n                    $(this).removeClass('field-error');\n                }\n            });\n\n            this.sortableFields.on('blur', 'input.fld-maxlength', function () {\n                this.value = self.helpers.forcenumber(this.value);\n            });\n\n            // Copy field\n            this.sortableFields.on('click touchstart', '.icon-copy', function (e) {\n                e.preventDefault();\n                var currentItem = $(this).parents('li');\n                var $clone = self.cloneItem(currentItem);\n                $clone.insertAfter(currentItem);\n                self.helpers.updatePreview($clone, currentItem);\n                self.helpers.save();\n            });\n\n            // Delete field\n            this.sortableFields.on('click touchstart', self.selectors.deleteButton, function (event) {\n                var buttonPosition = this.getBoundingClientRect(),\n                    bodyRect = document.body.getBoundingClientRect(),\n                    coords = {\n                        pageX: buttonPosition.left + buttonPosition.width / 2,\n                        pageY: buttonPosition.top - bodyRect.top - 12\n                    },\n                    deleteID = $(this).parents(self.selectors.fieldFirst).attr('id'),\n                    $field = $(document.getElementById(deleteID)),\n                    warnH3,\n                    warnMessage;\n\n                event.preventDefault();\n\n                self.removeWysiwygData(event.target);\n\n                document.addEventListener('modalClosed', function () {\n                    $field.removeClass(self.classes.delete);\n                }, false);\n\n                // Check if user is sure they want to remove the field\n                if (self.options.fieldRemoveWarn) {\n                    warnH3 = self.utils.markup('h3', self.options.messages.warning);\n                    warnMessage = self.utils.markup('p', self.options.messages.fieldRemoveWarning);\n\n                    self.helpers.confirm([warnH3, warnMessage], function () {\n                        return self.helpers.removeField(deleteID);\n                    }, coords);\n\n                    $field.addClass(self.classes.delete);\n                } else {\n                    self.helpers.removeField(deleteID);\n                }\n            });\n\n            // Update button style selection\n            this.sortableFields.on('click', '.style-wrap button', function () {\n                var styleVal = $(this).val(),\n                    $parent = $(this).parent(),\n                    $btnStyle = $parent.prev('.btn-style');\n                $btnStyle.val(styleVal);\n                $(this).siblings('.btn').removeClass('active');\n                $(this).addClass('active');\n                self.saveAndUpdate().call($parent);\n            });\n\n            // Attach a callback to toggle required asterisk\n            this.sortableFields.on('click', 'input.fld-required', function () {\n                var requiredAsterisk = $(this).parents('li.form-field').find('.required-asterisk');\n                requiredAsterisk.toggle();\n            });\n\n            // Attach a callback to add new options\n            this.sortableFields.on('click', '.add-opt', function (e) {\n                e.preventDefault();\n                var $optionWrap = $(this).parents('.field-options:eq(0)'),\n                    $multiple = $('[name=\"multiple\"]', $optionWrap),\n                    $firstOption = $('.option-selected:eq(0)', $optionWrap),\n                    isMultiple = $multiple.length ? $multiple.prop('checked') : $firstOption.attr('type') === 'checkbox',\n                    name = $firstOption.attr('name') || $optionWrap.attr('name'),\n                    sortOptions = $('.sortable-options', $optionWrap);\n\n                if (sortOptions.attr('dependent')) {\n                    sortOptions.append(self.createDependencyRow(false, false, false, name, false));\n                } else {\n                    sortOptions.append(self.selectFieldOptions(name, false, isMultiple));\n                }\n            });\n\n            this.sortableFields.on('mouseover mouseout', '.remove, .del-button', function () {\n                $(this).parents('li:eq(0)').toggleClass('delete');\n            });\n\n            this.sortableFields.on('change', '[name=\"dependency-field\"]', function (e) {\n                var fieldName = this.value,\n                    field = self.findField(fieldName),\n                    values = [],\n                    selects = $(this).parent('li').find('select');\n\n                if (field && field.values) {\n                    values = field.values;\n                    values = self.createDependencyRow(fieldName, '', values, false, true);\n                    $(this).find('[selected=\"selected\"]').removeAttr('selected');\n                    $(this).find('[value=\"' + $(this).val() + '\"]').attr('selected', true);\n                    if (selects.length > 1) {\n                        selects.last().replaceWith(values);\n                    } else {\n                        selects.last().after(values);\n                    }\n                } else {\n                    $(this).parent('li').find('select').last().remove();\n                }\n            });\n\n            if (self.options.showActionButtons) {\n                // View XML\n                var xmlButton = $(document.getElementById(formbId + '-view-data'));\n                xmlButton.click(function (e) {\n                    e.preventDefault();\n                    self.helpers.showData();\n                });\n\n                // Clear all fields in form editor\n                var clearButton = $(document.getElementById(formbId + '-clear-all'));\n                clearButton.click(function () {\n                    var fields = $('li.form-field');\n                    var buttonPosition = this.getBoundingClientRect(),\n                        bodyRect = document.body.getBoundingClientRect(),\n                        coords = {\n                            pageX: buttonPosition.left + buttonPosition.width / 2,\n                            pageY: buttonPosition.top - bodyRect.top - 12\n                        };\n\n                    if (fields.length) {\n                        self.helpers.confirm(self.options.messages.clearAllMessage, function () {\n                            self.helpers.removeAllfields();\n                            self.options.notify.success(self.options.messages.allFieldsRemoved);\n                            self.helpers.save();\n                        }, coords);\n                    } else {\n                        self.helpers.dialog('There are no fields to clear', {pageX: coords.pageX, pageY: coords.pageY});\n                    }\n                });\n            }\n        },\n\n        /**\n         * Remove cached wysiwyg content by wysiwyg name\n         *\n         * @param  {Object} target - DOM element, target of an event\n         * @returns {void}\n         */\n        removeWysiwygData: function (target) {\n            var selector = this.selectors.wysiwygContainer.replace('{id}', target.id.replace('del_', '')),\n                name = $(target).closest(selector).find(this.selectors.wysiwygField).attr('name');\n\n            if (name) {\n                this.helpers.removeWysiwygHtml(name);\n            }\n        },\n\n        fieldDependencyArea: function (values, name) {\n            var self = this,\n                optionActions = [this.utils.markup('a', this.options.messages.addOption, {className: 'add add-opt'})],\n                fieldOptions = ['<label class=\"false-label\">' + this.options.messages.dependencyTitle + '</label>'];\n\n            fieldOptions.push('<div class=\"sortable-options-wrap\">');\n\n            fieldOptions.push('<ol class=\"sortable-options\" dependent=\"true\">');\n\n            this.utils.forEach(values, function (i, dependency) {\n                fieldOptions.push(self.createDependencyRow(dependency.field, dependency.value, false, false, false));\n            });\n\n            fieldOptions.push('</ol>');\n            fieldOptions.push(this.utils.markup('div', optionActions, {className: 'option-actions'}).outerHTML);\n            fieldOptions.push('</div>');\n\n            return this.utils.markup('div', fieldOptions.join(''), {\n                className: 'form-group field-options',\n                name: name\n            }).outerHTML;\n        },\n\n        createDependencyRow: function (selectedField, selectedValue, value, currentField, onlyValueSelect) {\n            var optionInputs = [],\n                formData = this.getParsedFormData(),\n                self = this,\n                allowedDependencyTypes = ['no-select', 'dropdown', 'checkbox', 'radio', 'checkboxtwo', 'radiotwo', 'listbox'],\n                updateValues = function (index) {\n                    var label = index.label\n                        ? self.utils.cutJs(index.label)\n                        : '';\n                    var option = {\n                        selected: false,\n                        label: label,\n                        value: index.name || index.value,\n                        type: index.type\n                    };\n\n                    if (currentField && option.value == currentField) {\n                        return false;\n                    }\n\n                    if (selectedField && option.value == selectedField) {\n                        option.selected = 'selected';\n                    }\n\n                    return option;\n                };\n\n            optionInputs.push(\n                $(this.selectAttribute(\n                    'dependency-field',\n                    '',\n                    [{\n                        name: 'empty',\n                        label: 'Choose an Option...',\n                        type: 'no-select'\n                    }].concat(formData.map(updateValues)),\n                    allowedDependencyTypes\n                )).find('select')[0]\n            );\n\n            if (selectedField) {\n                selectedField = self.findField(selectedField);\n                if (selectedField && selectedField.values) {\n                    value = selectedField.values;\n                    selectedField = selectedValue;\n                    value = value.map(updateValues);\n                }\n            }\n\n            if (typeof value != 'undefined' && value) {\n                optionInputs.push($(this.selectAttribute('dependency-value', '', value)).find('select')[0]);\n            }\n\n            var removeAttrs = {\n                className: 'remove btn',\n                title: this.options.messages.removeMessage\n            };\n\n            optionInputs.push(this.utils.markup('a', this.options.messages.remove, removeAttrs));\n            var field = this.utils.markup('li', optionInputs, {className: 'dependent-field'});\n            if (onlyValueSelect) {\n                field = $(field).find('select').last()[0];\n            }\n\n            return field.outerHTML;\n        },\n\n        getParsedFormData: function () {\n            var formData = null;\n\n            try {\n                formData = JSON.parse(this.formData);\n            } catch (e) {\n                formData = this.formData;\n            }\n\n            return formData;\n        },\n\n        findField: function (name) {\n            var field = null;\n\n            this.getParsedFormData().forEach(function (element) {\n                if (element.name == name) {\n                    field = element;\n                }\n            });\n\n            return field;\n        }\n    });\n    return $.mage.customFormBuilder;\n});\n","Amasty_Customform/js/am-google-map.js":"define([\n    'jquery',\n    'Magento_Ui/js/modal/modal'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.amGoogleMap', {\n        options: {\n            defaultPosition: {\n                lat: 0,\n                lng: 0\n            },\n            position: null,\n            enabledMarker: true,\n            showFormattedAddress: false,\n            styles: null\n        },\n        zoom: 1,\n        map: null,\n\n        _create: function () {\n            this.mapInput = this.element.find('input').hide();\n            if (typeof google != 'undefined' && google.maps) {\n                if (!this.options.position) {\n                    this.options.position = this.options.defaultPosition;\n                }\n                if (this.options.zoom) {\n                    this.zoom = parseInt(this.options.zoom);\n                }\n\n                if (this.element.find('.map').length == 0) {\n                    this.element.prepend($('<div>',\n                        {\n                            'class': 'map'\n                        }\n                    ));\n                }\n                var map = new google.maps.Map(\n                    this.element.find('.map')[0], {zoom: this.zoom, center: this.options.position}\n                );\n                this.map = map;\n                if (this.options.styles) {\n                    var previousStyles = $(this.map.getDiv()).attr('style');\n                    if (!previousStyles) {\n                        previousStyles = '';\n                    }\n                    $(this.map.getDiv()).attr(\n                        'style',\n                        previousStyles + ' ' + this.options.styles\n                    );\n                }\n                this.mapInput.val(this.options.position);\n\n                this.currentMarker = new google.maps.Marker({position: this.options.position, map: map});\n\n                if (this.options.enabledMarker) {\n                    google.maps.event.addListener(map, 'click', function (event) {\n                        this.moveMarker(event.latLng);\n                    }.bind(this));\n                }\n\n                this.map.addListener('zoom_changed', function () {\n                    this.element.find('input.amform-googlemap').trigger('change');\n                }.bind(this));\n\n                if (this.options.showFormattedAddress) {\n                    this.showAddress();\n                }\n\n                var searchbox = this.searchBox();\n\n                google.maps.event.addListenerOnce(this.map, 'tilesloaded', function () {\n                    searchbox.show();\n                });\n            }\n        },\n\n        getPosition: function () {\n            return this.currentMarker.getPosition();\n        },\n\n        searchBox: function () {\n            this.element.prepend($('<input>',\n                {\n                    'class': 'searchbox'\n                }\n            ).hide());\n\n            var self = this,\n                input = this.element.find('.searchbox'),\n                searchBox = new google.maps.places.SearchBox(input[0]);\n            this.map.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(input[0]);\n\n            // disable submit from on search\n            input.onkeypress = function (e) {\n                var key = e.charCode || e.keyCode || 0;\n                if (key == 13) {\n                    e.preventDefault();\n                }\n            };\n            searchBox.addListener('places_changed', function (event) {\n                var places = searchBox.getPlaces();\n\n                if (places.length == 0) {\n                    return;\n                }\n\n                var bounds = new google.maps.LatLngBounds();\n                places.forEach(function (place) {\n                    if (!place.geometry) {\n                        return;\n                    }\n\n                    if (self.options.enabledMarker) {\n                        self.moveMarker(place.geometry.location);\n                    }\n\n                    if (place.geometry.viewport) {\n                        bounds.union(place.geometry.viewport);\n                    } else {\n                        bounds.extend(place.geometry.location);\n                    }\n                });\n                self.map.fitBounds(bounds);\n            });\n\n            return input;\n        },\n\n        moveMarker: function (location) {\n            if (this.currentMarker) {\n                this.currentMarker.setMap(null);\n            }\n            this.currentMarker = new google.maps.Marker({\n                position: location,\n                map: this.map\n            });\n            this.mapInput.val(location);\n            this.element.find('input.amform-googlemap').trigger('change');\n        },\n\n        showAddress: function () {\n            if (this.element.find('.am-address').length == 0) {\n                this.element.prepend($('<div>',\n                    {\n                        'class': 'am-address'\n                    }\n                ));\n            }\n            var geocoder = new google.maps.Geocoder(),\n                addressField = this.element.find('.am-address'),\n                position = this.getPosition();\n\n            geocoder.geocode({\n                'latLng': position\n            }, function (results, status) {\n                if (status == google.maps.GeocoderStatus.OK) {\n                    if (results[0]) {\n                        addressField.html(results[0].formatted_address);\n                    }\n                } else {\n                    addressField.html(position.toString());\n                }\n            });\n        },\n\n        getZoom: function () {\n            return this.map.getZoom();\n        }\n    });\n\n    return $.mage.amGoogleMap;\n});\n","Amasty_Customform/js/form-render.js":"// Element.remove() polyfill\n/* eslint-disable one-var, vars-on-top, max-depth, no-shadow */\n\ndefine([\n    'jquery',\n    'mage/url',\n    'mage/translate',\n    'mage/calendar',\n    'Magento_Ui/js/modal/modal'\n], function ($, urlBuilder) {\n    'use strict';\n\n    if (!('remove' in Element.prototype)) {\n        Element.prototype.remove = function () {\n            if (this.parentNode) {\n                this.parentNode.removeChild(this);\n            }\n        };\n    }\n\n    // Event polyfill\n    if (typeof Event !== 'function') {\n        (function () {\n            window.Event = function (evt) {\n                var event = document.createEvent('Event');\n\n                event.initEvent(evt, true, true);\n\n                return event;\n            };\n        })();\n    }\n\n    // Object.assign polyfill\n    if (typeof Object.assign != 'function') {\n        Object.assign = function (target) {\n            if (target == null) {\n                throw new TypeError('Cannot convert undefined or null to object');\n            }\n\n            target = Object(target);\n\n            for (var index = 1; index < arguments.length; index++) {\n                var source = arguments[index];\n\n                if (source !== null) {\n                    for (var key in source) {\n                        if (Object.prototype.hasOwnProperty.call(source, key)) {\n                            target[key] = source[key];\n                        }\n                    }\n                }\n            }\n\n            return target;\n        };\n    }\n\n    'use strict';\n\n\n    (function ($) {\n        var Toggle = function Toggle(element, options) {\n            var defaults = {\n                theme: 'fresh',\n                messages: {\n                    off: 'Off',\n                    on: 'On'\n                }\n            },\n            opts = $.extend(defaults, options),\n                $kcToggle = $('<div class=\"kc-toggle\"></div>').insertAfter(element).append(element);\n\n            $kcToggle.toggleClass('on', element.is(':checked'));\n\n            var kctOn = '<div class=\"kct-on\">' + opts.messages.on + '</div>',\n                kctOff = '<div class=\"kct-off\">' + opts.messages.off + '</div>',\n                kctHandle = '<div class=\"kct-handle\"></div>',\n                kctInner = '<div class=\"kct-inner\">' + kctOn + kctHandle + kctOff + '</div>';\n\n            $kcToggle.append(kctInner);\n\n            $kcToggle.click(function () {\n                element.attr('checked', !element.attr('checked'));\n                $(this).toggleClass('on');\n            });\n        };\n\n        $.fn.kcToggle = function (options) {\n            var toggle = this;\n\n            return toggle.each(function () {\n                var element = $(this),\n                    kcToggle;\n\n                if (element.data('kcToggle')) {\n                    return;\n                }\n\n                kcToggle = new Toggle(element, options);\n                element.data('kcToggle', kcToggle);\n            });\n        };\n    })($);\n\n    'use strict';\n\n    // eslint-disable-next-line newline-after-var\n    var _typeof = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol' ? function (obj) {\n        return typeof obj;\n    } : function (obj) {\n        return obj && typeof Symbol === 'function'\n            && obj.constructor === Symbol\n            && obj !== Symbol.prototype ? 'symbol' : typeof obj;\n    },\n\n    fbUtils = {};\n    fbUtils.amProgressId = 'form_submit_loading';\n    fbUtils.amImageContainerId = 'loading_image_container';\n    fbUtils.formOptions = [];\n\n    // cleaner syntax for testing indexOf element\n    fbUtils.inArray = function (needle, haystack) {\n        return haystack.indexOf(needle) !== -1;\n    };\n\n    /**\n     * Remove null or undefined values\n     * @param  {Object} attrs {attrName: attrValue}\n     * @return {Object}       Object trimmed of null or undefined values\n     */\n    fbUtils.trimObj = function (attrs) {\n        var xmlRemove = [null, undefined, '', false, 'false'];\n\n        for (var attr in attrs) {\n            if (fbUtils.inArray(attrs[attr], xmlRemove)) {\n                delete attrs[attr];\n            } else if (Array.isArray(attrs[attr])) {\n                if (!attrs[attr].length) {\n                    delete attrs[attr];\n                }\n            }\n        }\n\n        return attrs;\n    };\n\n    /**\n     * Test if attribute is a valid HTML attribute\n     * @param  {String} attr\n     * @return {Boolean}\n     */\n    fbUtils.validAttr = function (attr) {\n        var invalid = [\n            'values', 'enableOther', 'other', 'label',\n            'validation_fields', 'subtype', 'dependency',\n            'map_position'\n        ];\n\n        return !fbUtils.inArray(attr, invalid);\n    };\n\n    /**\n     * Convert an attrs object into a string\n     *\n     * @param  {Object} attrs object of attributes for markup\n     * @return {string}\n     */\n    fbUtils.attrString = function (attrs) {\n        var attributes = [];\n\n        for (var attr in attrs) {\n            if (attrs.hasOwnProperty(attr) && fbUtils.validAttr(attr)) {\n                if (attr === 'placeholder') {\n                    attributes.push(attr + '=\"' + attrs[attr] + '\"');\n                } else {\n                    attr = fbUtils.safeAttr(attr, attrs[attr]);\n                    attributes.push(attr.name + attr.value);\n                }\n            }\n        }\n\n        return attributes.join(' ');\n    };\n\n    /**\n     * Convert attributes to markup safe strings\n     * @param  {String} name  attribute name\n     * @param  {String} value attribute value\n     * @return {Object}       {attrName: attrValue}\n     */\n    fbUtils.safeAttr = function (name, value) {\n        var valString = void 0;\n\n        name = fbUtils.safeAttrName(name);\n\n        if (value) {\n            if (Array.isArray(value)) {\n                valString = fbUtils.escapeAttr(value.join(' '));\n            } else {\n                if (typeof value === 'boolean') {\n                    value = value.toString();\n                }\n\n                value = value.toString();\n                valString = fbUtils.escapeAttr(value.replace(',', ' ').trim());\n            }\n        }\n\n        value = value ? '=\"' + valString + '\"' : '';\n\n        return {\n            name: name,\n            value: value\n        };\n    };\n\n    fbUtils.safeAttrName = function (name) {\n        var safeAttr = {\n            className: 'class'\n        };\n\n        return safeAttr[name] || fbUtils.hyphenCase(name);\n    };\n\n    /**\n     * Convert strings into lowercase-hyphen\n     *\n     * @param  {String} str\n     * @return {String}\n     */\n    fbUtils.hyphenCase = function (str) {\n        str = str.replace(/[^\\w\\s\\-]/gi, '');\n        str = str.replace(/([A-Z])/g, function ($1) {\n            return '-' + $1.toLowerCase();\n        });\n\n        return str.replace(/\\s/g, '-').replace(/^-+/g, '');\n    };\n\n    /**\n     * convert a hyphenated string to camelCase\n     * @param  {String} str\n     * @return {String}\n     */\n    fbUtils.camelCase = function (str) {\n        return str.replace(/-([a-z])/g, function (m, w) {\n            return w.toUpperCase();\n        });\n    };\n\n    /**\n     * Generate markup wrapper where needed\n     *\n     * @param  {string} tag\n     * @return {String}\n     */\n    fbUtils.markup = function (tag) {\n        var content = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '',\n            attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n            contentType = void 0,\n            field = document.createElement(tag),\n\n            getContentType = function getContentType(content) {\n                return Array.isArray(content) ?\n                    'array' : typeof content === 'undefined' ? 'undefined' : _typeof(content);\n            },\n\n            appendContent = {\n                string: function string(content) {\n                    field.innerHTML = content;\n                },\n                object: function object(content) {\n                    return field.appendChild(content);\n                },\n                array: function array(content) {\n                    for (var i = 0; i < content.length; i++) {\n                        contentType = getContentType(content[i]);\n                        appendContent[contentType](content[i]);\n                    }\n                }\n            };\n\n        for (var attr in attrs) {\n            if (attrs.hasOwnProperty(attr)) {\n                var name = fbUtils.safeAttrName(attr);\n\n                field.setAttribute(name, attrs[attr]);\n            }\n        }\n\n        contentType = getContentType(content);\n\n        if (content) {\n            appendContent[contentType].call(this, content);\n        }\n\n        return field;\n    };\n\n    /**\n     * Convert html element attributes to key/value object\n     * @return {Object} ex: {attrName: attrValue}\n     * @param {object} elem\n     */\n    fbUtils.parseAttrs = function (elem) {\n        var attrs = elem.attributes,\n            data = {};\n\n        fbUtils.forEach(attrs, function (attr) {\n            var attrVal = attrs[attr].value;\n\n            if (attrVal.match(/false|true/g)) {\n                attrVal = attrVal === 'true';\n            } else if (attrVal.match(/undefined/g)) {\n                attrVal = undefined;\n            }\n\n            if (attrVal) {\n                data[attrs[attr].name] = attrVal;\n            }\n        });\n\n        return data;\n    };\n\n    /**\n     * Convert field options to optionData\n     * @return {Array} optionData array\n     * @param {object} field\n     */\n    fbUtils.parseOptions = function (field) {\n        var options = field.getElementsByTagName('option'),\n            optionData = {},\n            data = [];\n\n        if (options.length) {\n            for (var i = 0; i < options.length; i++) {\n                optionData = fbUtils.parseAttrs(options[i]);\n                optionData.label = options[i].textContent;\n                data.push(optionData);\n            }\n        }\n\n        return data;\n    };\n\n    /**\n     * Parse XML formData\n     * @param  {String} xmlString\n     * @return {Array} formData array\n     */\n    fbUtils.parseXML = function (xmlString) {\n        var parser = new window.DOMParser(),\n            xml = parser.parseFromString(xmlString, 'text/xml'),\n            formData = [];\n\n        if (xml) {\n            var fields = xml.getElementsByTagName('field');\n\n            for (var i = 0; i < fields.length; i++) {\n                var fieldData = fbUtils.parseAttrs(fields[i]);\n\n                if (fields[i].children.length) {\n                    fieldData.values = fbUtils.parseOptions(fields[i]);\n                }\n\n                formData.push(fieldData);\n            }\n        }\n\n        return formData;\n    };\n\n    /**\n     * Escape markup, so it can be displayed rather than rendered\n     * @param  {String} html markup\n     * @return {String} escaped html\n     */\n    fbUtils.escapeHtml = function (html) {\n        var escapeElement = document.createElement('textarea');\n\n        escapeElement.textContent = html;\n\n        return escapeElement.innerHTML;\n    };\n\n    // Escape an attribute\n    fbUtils.escapeAttr = function (str) {\n        var match = {\n            '\"': '&quot;',\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;'\n        };\n\n        function replaceTag(tag) {\n            return match[tag] || tag;\n        }\n\n        return typeof str === 'string' ? str.replace(/[\"&<>]/g, replaceTag) : str;\n    };\n\n    // Escape attributes\n    fbUtils.escapeAttrs = function (attrs) {\n        for (var attr in attrs) {\n            if (attrs.hasOwnProperty(attr)) {\n                attrs[attr] = fbUtils.escapeAttr(attrs[attr]);\n            }\n        }\n\n        return attrs;\n    };\n\n    // forEach that can be used on nodeList\n    fbUtils.forEach = function (array, callback, scope) {\n        for (var i = 0; i < array.length; i++) {\n            callback.call(scope, i, array[i]); // passes back stuff we need\n        }\n    };\n\n    /**\n     * Remove duplicates from an array of elements\n     * @return {Array} array with only unique values\n     * @param {array} array\n     */\n    fbUtils.unique = function (array) {\n        return array.filter(function (elem, pos, arr) {\n            return arr.indexOf(elem) === pos;\n        });\n    };\n\n    /**\n     * Generate preview markup\n     * @param  {object} fieldData\n     * @param {object} opts\n     * @return {string} preview markup for field\n     */\n    fbUtils.fieldRender = function (fieldData, opts) {\n        var preview = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false,\n            utils = fbUtils,\n            fieldMarkup = '',\n            fieldLabel = '',\n            optionsMarkup = '',\n            fieldLabelText = fieldData.label || '',\n            fieldDesc = fieldData.description || '',\n            fieldRequired = '',\n            fieldOptions = fieldData.values;\n\n        fieldData.name = preview ? fieldData.name + '-preview' : fieldData.name;\n        fieldData.id = fieldData.name;\n\n        if (\n            utils.inArray(\n                fieldData.type,\n                ['textinput', 'number', 'file', 'dropdown', 'listbox', 'textarea']\n            ) && fieldData.className.indexOf('form-control') === -1\n        ) {\n            fieldData.className += ' form-control';\n        }\n\n        if (fieldData.type === 'listbox') {\n            fieldData.multiple = true;\n        }\n\n        fieldData.name = fieldData.multiple ? fieldData.name + '[]' : fieldData.name;\n        fieldData.type = fieldData.subtype || fieldData.type;\n\n        var withoutLabel = false,\n            ratingClass = '',\n            withBr = true;\n\n        switch (fieldData.type) {\n            case 'textinput':\n                fieldData.type = 'text';\n                break;\n            case 'textarea':\n                fieldData.type = 'textarea';\n                break;\n            case 'hidden':\n                fieldData.type = 'hidden';\n                withoutLabel = true;\n                break;\n            case 'text':\n                fieldData.type = 'div';\n                withoutLabel = true;\n                break;\n            case 'hone':\n                fieldData.type = 'h1';\n                withoutLabel = true;\n                break;\n            case 'htwo':\n                fieldData.type = 'h2';\n                withoutLabel = true;\n                break;\n            case 'hthree':\n                fieldData.type = 'h3';\n                withoutLabel = true;\n                break;\n            case 'number':\n                fieldData.type = 'number';\n                break;\n            case 'rating':\n                ratingClass = 'amform-rating-container ';\n                withBr = false;\n            // eslint-disable-next-line no-fallthrough\n            case 'radiotwo':\n                withBr = false;\n            // eslint-disable-next-line no-fallthrough\n            case 'radio':\n                fieldData.type = 'radio-group';\n                break;\n            case 'checkboxtwo':\n                withBr = false;\n            // eslint-disable-next-line no-fallthrough\n            case 'checkbox':\n                fieldData.type = 'checkbox-group';\n                break;\n            case 'listbox':\n                fieldData.type = 'select';\n                break;\n            case 'dropdown':\n                fieldData.type = 'select';\n                break;\n            case 'daterange':\n                fieldData.type = 'date';\n                break;\n            case 'datetime':\n                fieldData.type = 'datetime-local';\n                break;\n            case 'wysiwyg':\n                fieldData.type = 'wysiwyg';\n                break;\n        }\n\n        fieldData['data-amcform-js'] = fieldData.id;\n\n        if (fieldData.required) {\n            delete fieldData.required;\n            fieldData['aria-required'] = 'true';\n            fieldData.className += ' required-entry';\n            fieldRequired = '<span class=\"required\">*</span>';\n        }\n\n        if (!withoutLabel) {\n            if (fieldDesc) {\n                fieldDesc = '<span class=\"tooltip-element\" tooltip=\"' + fieldDesc + '\">?</span>';\n            }\n\n            fieldLabel = '<label for=\"' + fieldData.id + '\" class=\"fb-' + fieldData.type + '-label label\">'\n                + fieldLabelText + ' ' + fieldRequired + ' ' + fieldDesc\n                + '</label>';\n        }\n\n        var fieldLabelVal = fieldData.label;\n\n        delete fieldData.label;\n        delete fieldData.description;\n\n        var fieldDataString = fbUtils.attrString(fieldData);\n\n        switch (fieldData.type) {\n            case 'wysiwyg':\n                fieldMarkup = '<div ' + fieldDataString + '>' + (fieldData.value || '') + '</div>';\n                break;\n            case 'textarea':\n            case 'rich-text':\n                delete fieldData.type;\n\n                var fieldVal = fieldData.value || '';\n\n                fieldMarkup = '<textarea ' + fieldDataString + '>' + fieldVal + '</textarea>';\n                break;\n            case 'select':\n                var optionAttrsString;\n\n                fieldData.type = fieldData.type.replace('-group', '');\n\n                if (fieldOptions) {\n                    if (fieldData.placeholder) {\n                        optionsMarkup += '<option disabled selected>' + fieldData.placeholder + '</option>';\n                    }\n\n                    for (var i = 0; i < fieldOptions.length; i++) {\n                        if (!fieldOptions[i].selected || fieldData.placeholder) {\n                            delete fieldOptions[i].selected;\n                        }\n\n                        if (!fieldOptions[i].label) {\n                            fieldOptions[i].label = '';\n                        }\n\n                        optionAttrsString = fbUtils.attrString(fieldOptions[i]);\n                        optionsMarkup += '<option ' + optionAttrsString + '>' + fieldOptions[i].label + '</option>';\n                    }\n                }\n\n                fieldMarkup = '<select ' + fieldDataString + '>' + optionsMarkup + '</select>';\n                break;\n            case 'checkbox-group':\n                if (fieldData.toggle === '1') {\n                    setTimeout(function () {\n                        $('[id^=\"' + fieldData.id + '\"]').kcToggle();\n                    }, 100);\n                }\n            // eslint-disable-next-line no-fallthrough\n            case 'rating':\n            case 'radio-group':\n                var optionAttrs = void 0;\n\n                fieldData.type = fieldData.type.replace('-group', '');\n\n                if (fieldData.type === 'checkbox') {\n                    fieldData.name += '[]';\n                }\n\n                if (ratingClass) {\n                    fieldOptions = fieldOptions.reverse();\n                }\n\n                if (fieldOptions) {\n                    var _optionAttrsString = void 0;\n\n                    for (var _i = 0; _i < fieldOptions.length; _i++) {\n                        optionAttrs = Object.assign({value: '', label: ''}, fieldData, fieldOptions[_i]);\n\n                        if (optionAttrs.selected) {\n                            delete optionAttrs.selected;\n                            optionAttrs.checked = null;\n                        }\n\n                        optionAttrs.id = fieldData.id + '-' + _i;\n                        _optionAttrsString = fbUtils.attrString(optionAttrs);\n\n                        var classNameLabel = ' class=\"amform-versiontwo-label\"',\n                            delimeter = '';\n\n                        if (withBr) {\n                            delimeter = '<br>';\n                            // eslint-disable-next-line no-use-before-define\n                            className = '';\n                        } else if (!ratingClass) {\n                            optionsMarkup += '<div class=\"amform-groupv2\">';\n                            delimeter = '</div>';\n                        }\n\n                        var labelText = ratingClass ? '' : optionAttrs.label;\n\n                        optionsMarkup += '<input ' + _optionAttrsString + ' /' + '> <label for=\"'\n                            + optionAttrs.id + '\" ' + classNameLabel + '>' + labelText + '</label>' + delimeter;\n                    }\n\n                    if (fieldData.other) {\n                        var otherOptionAttrs = {\n                            id: fieldData.id + '-' + 'other',\n                            className: fieldData.className + ' other-option',\n                            onclick: 'fbUtils.otherOptionCB(\\'' + fieldData.id + '-other\\')'\n                        };\n\n                        _optionAttrsString = fbUtils.attrString(Object.assign({}, fieldData, otherOptionAttrs));\n\n                        optionsMarkup += '<input ' + _optionAttrsString + ' /' + '>'\n                            + '<label for=\"' + otherOptionAttrs.id + '\">'\n                            + opts.messages.other + '</label> <input type=\"text\" name=\"'\n                            + fieldData.name + '\" id=\"' + otherOptionAttrs.id\n                            + '-value\" style=\"display:none;\"' + '/' + '>';\n                    }\n                }\n                fieldMarkup = '<div class=\"' + ratingClass + fieldData.type + '-group\">' + optionsMarkup + '</div>';\n                break;\n            case 'text':\n            case 'password':\n            case 'email':\n            case 'number':\n            case 'file':\n            case 'hidden':\n            case 'date':\n            case 'time':\n            case 'datetime-local':\n            case 'tel':\n            case 'autocomplete':\n                fieldMarkup = ' <input ' + fieldDataString + '>';\n                break;\n            case 'color':\n                fieldMarkup = ' <input ' + fieldDataString + '> ' + opts.messages.selectColor;\n                break;\n            case 'button':\n            case 'submit':\n                fieldMarkup = '<button ' + fieldDataString + '>' + fieldLabelVal + '</button>';\n                break;\n            case 'checkbox':\n                fieldMarkup = '<input ' + fieldDataString + '> ' + fieldLabel;\n            // eslint-disable-next-line no-fallthrough\n            case 'checkboxtwo':\n                if (fieldData.toggle) {\n                    setTimeout(function () {\n                        $('[id^=\"' + fieldData.id + '\"]').kcToggle();\n                    }, 100);\n                }\n                break;\n            case 'googlemap':\n                fieldMarkup = ' <input ' + fieldDataString + '><div class=\"map\"></div>';\n                break;\n            default:\n                fieldMarkup = '<' + fieldData.type + ' ' + fieldDataString + '>'\n                + fieldLabelVal + '</' + fieldData.type + '>';\n        }\n\n        fieldMarkup = fieldLabel + '<div class=\"control\">' + fieldMarkup + '</div>';\n\n        if (fieldData.type !== 'hidden') {\n            var className = fieldData.id ?\n                'field fb-' + fieldData.type + ' form-group field-' + fieldData.id.replace(/\\)|\\(/g, '-') :\n                '';\n\n            className += fieldData.dependency ? ' am-customform-depend' : '';\n\n            if (fieldData.layout) {\n                className += ' amform-layout-' + fieldData.layout;\n            }\n\n            fieldMarkup = fbUtils.markup('div', fieldMarkup, {\n                className: className\n            });\n        } else {\n            fieldMarkup = fbUtils.markup('input', null, fieldData);\n        }\n\n        switch (fieldData.type) {\n            case 'googlemap':\n                var position = null, zoom = 1;\n\n                if (fieldData.map_position.lat\n                    && fieldData.map_position.lng\n                    && typeof google !== 'undefined'\n                ) {\n                    position = new google.maps.LatLng(\n                        fieldData.map_position.lat,\n                        fieldData.map_position.lng\n                    );\n                    zoom = fieldData.zoom;\n                }\n\n                $(fieldMarkup).amGoogleMap({\n                    'position': position,\n                    'zoom': zoom,\n                    'styles': fieldData.style\n                });\n                break;\n            case 'date':\n                var dateInput = $(fieldMarkup).find('input');\n\n                dateInput.removeAttr('type');\n                dateInput.attr('readonly', 'readonly');\n                dateInput.datepicker({\n                    showOn: 'both',\n                    changeYear: true,\n                    yearRange: '1900:2100',\n                    autoSize: true,\n                    dateFormat: opts.dateFormat\n                });\n\n                if (fieldData.value) {\n                    dateInput.datepicker('setDate', fieldData.value);\n                }\n\n                dateInput.attr('placeholder', opts.placeholder);\n                dateInput.attr('size', 15);\n                $(fieldMarkup).find('button').html('');\n\n                var datepicker = $('#ui-datepicker-div');\n\n                if (!datepicker.hasClass('am-picker-year')) {\n                    datepicker.addClass('am-picker-year');\n                }\n                break;\n        }\n\n        return fieldMarkup;\n    };\n\n    /**\n     * Callback for other option.\n     * Toggles the hidden text area for \"other\" option.\n     * @param  {String} otherId id of the \"other\" option input\n     */\n    fbUtils.otherOptionCB = function (otherId) {\n        var otherInput = document.getElementById(otherId),\n            otherInputValue = document.getElementById(otherId + '-value');\n\n        if (otherInput.checked) {\n            otherInput.style.display = 'none';\n            otherInputValue.style.display = 'inline-block';\n        } else {\n            otherInput.style.display = 'inline-block';\n            otherInputValue.style.display = 'none';\n        }\n    };\n\n    /**\n     * Capitalizes a string\n     * @param  {String} str uncapitalized string\n     * @return {String} str capitalized string\n     */\n    fbUtils.capitalize = function (str) {\n        return str.replace(/\\b\\w/g, function (m) {\n            return m.toUpperCase();\n        });\n    };\n\n    /**\n     * Check if need show hidden fields\n     * @param {FormRenderFn} formRender\n     * @param {object} $\n     */\n    fbUtils.updateDependency = function (formRender, $) {\n        $.each(formRender.element.find('.am-customform-depend'), function ($, index, elem) {\n            var name = $(elem).find(\n                '.control input,' +\n                '.control [type=\"div\"],' +\n                '.control [type=\"h1\"],' +\n                '.control [type=\"h2\"],' +\n                '.control [type=\"h3\"],' +\n                '.control [type=\"wysiwyg\"],' +\n                '.form-control'\n            ).first().attr('name');\n\n            if (this.dependencyMap[name]) {\n                fbUtils.isFieldShowed(elem, name, this.dependencyMap);\n            }\n        }.bind(formRender, $));\n    };\n\n    fbUtils.isFieldShowed = function (checkedField, elementName, dependencyMap) {\n        var orFields = [],\n            orFieldsType = ['dropdown', 'radio', 'radiotwo'],\n            hiddenField = $(checkedField),\n            hiddenInput = hiddenField.find('input, textarea, select'),\n            validElems = 0;\n\n        $.each(dependencyMap[elementName], function (index, elem) {\n            var dependencyElem = null;\n\n            // check current dependency, only if dependency element showed\n            if (dependencyMap[elem.field] &&\n                !fbUtils.isFieldShowed($('.field-' + elem.field.replace(/\\)|\\(/g, '-')), elem.field, dependencyMap)\n            ) {\n                return false;\n            }\n\n            // find element and check value\n            // if ok - increment validElems\n            // dropdown&radio always increment validElems , checked for valid by orFieldsValid\n            switch (elem.type) {\n                case 'dropdown':\n                    dependencyElem = $('select[name=\"' + elem.field + '\"]');\n                    validElems++;\n\n                    if (typeof orFields[elem.field] == 'undefined') {\n                        orFields[elem.field] = false;\n                    }\n\n                    break;\n                case 'listbox':\n                    if ($('select[name=\"' + elem.field + '[]\"]').val().indexOf(elem.value) !== -1) {\n                        validElems++;\n                    }\n                    break;\n                case 'checkbox':\n                case 'checkboxtwo':\n                    var getCheckboxOptions = function (index, elem) {\n                        return elem.value;\n                    };\n\n                    dependencyElem = $('[name=\"' + elem.field + '[]\"]:checked');\n\n                    if (dependencyElem.map(getCheckboxOptions).toArray().indexOf(elem.value) !== -1) {\n                        validElems++;\n                    }\n\n                    dependencyElem = null;\n                    break;\n                case 'radio':\n                case 'radiotwo':\n                    validElems++;\n                    dependencyElem = $('input[name=\"' + elem.field + '\"]:checked');\n\n                    if (typeof orFields[elem.field] == 'undefined') {\n                        orFields[elem.field] = false;\n                    }\n\n                    break;\n                default:\n                    validElems++;\n            }\n\n            if (dependencyElem && dependencyElem.val() === elem.value) {\n                if (orFieldsType.indexOf(elem.type) !== -1) {\n                    orFields[elem.field] = true;\n                } else {\n                    validElems++;\n                }\n            }\n        });\n\n        var orFieldsValid = fbUtils.getEntries(orFields).map(function (pair) {\n            return pair[1];\n        }).indexOf(false) === -1;\n\n        // validElems - must be count all dependencies of element\n        // dropdown&radio validated with orFieldsValid - one suitable option must selected\n        if (dependencyMap[elementName].length === validElems && orFieldsValid) {\n            hiddenInput\n                .removeClass('amcform-hidden-field')\n                .removeAttr('disabled');\n            hiddenField.show();\n\n            return true;\n        }\n\n        hiddenInput\n            .addClass('amcform-hidden-field')\n            .attr('disabled', true);\n\n        hiddenField.hide();\n\n        return false;\n    };\n\n    fbUtils.getEntries = function (obj) {\n        return Object.entries\n            ? Object.entries(obj)\n            : Object.keys(obj).map(function (key) {\n                return [key, obj[key]];\n            });\n    };\n\n    fbUtils.showAnimation = function (loaderImage) {\n        var progress = $('<div></div>', {id: this.amProgressId}),\n            container = $('<div></div>', {id: this.amImageContainerId}),\n            img = $('<img>'),\n            width;\n\n        container.appendTo(progress);\n\n        img.attr('src', loaderImage);\n        img.appendTo(container);\n        container.width('150px');\n        width = container.width();\n        width = '-' + width / 2 + 'px';\n        container.css('margin-left', width);\n        progress.hide().appendTo($('body')).fadeIn();\n    };\n\n    fbUtils.hideAnimation = function () {\n        var element = $('#' + this.amProgressId);\n\n        if (element.length) {\n            element.fadeOut(function () {\n                $(this).remove();\n            });\n        }\n    };\n\n    fbUtils.submitForm = function (event) {\n        var form = this;\n\n        event.preventDefault();\n\n        if (form.valid()) {\n            form.find('[type=\"submit\"]').addClass('disabled');\n            if (form.has('input[type=\"file\"]').length && form.find('input[type=\"file\"]').val() !== '') {\n                form.off('submit');\n                form.submit();\n            } else {\n                var formId = form.attr('id').match(/\\d+/);\n\n                $.ajax({\n                    url: form.attr('action'),\n                    data: form.serialize(),\n                    type: 'post',\n                    dataType: 'json',\n\n                    beforeSend: function () {\n                        fbUtils.showAnimation(fbUtils.formOptions[formId].src_image_progress);\n                    },\n\n                    error: function () {\n                        fbUtils.hideAnimation();\n\n                        $('html, body').animate({\n                            scrollTop: $('body').offset().top\n                        }, 500);\n\n                        form.find('[type=\"submit\"]').removeClass('disabled');\n                    },\n\n                    success: function (response) {\n                        form.closest('.amcform-popup-block').removeClass('-active');\n                        form.find('[type=\"submit\"]').removeClass('disabled');\n                        fbUtils.hideAnimation();\n\n                        if (response.result === 'success') {\n                            var renderedForm = form.find('.insert-container'),\n                                opts = fbUtils.formOptions[formId],\n                                gdpr = form.find('[name=\"gdpr\"]');\n\n                            if (formId) {\n                                formId = parseInt(formId, 10);\n                                renderedForm.empty();\n                                renderedForm.formRender(formId, opts, form.find('[name=\"is_survey\"]').attr('value'));\n\n                                if (gdpr.length > 0) {\n                                    gdpr.removeAttr('checked');\n                                }\n\n                                if (form.parent().hasClass('amform-popup')) {\n                                    form.parent().hide();\n                                } else if (form.hasClass('amhideprice-form')) {\n                                    $.fancyambox.close();\n                                }\n                            }\n\n                            $(document).trigger('amcform-init-multipage', [renderedForm]);\n                        }\n                        window.scrollTo(0, 0);\n                    }\n                });\n            }\n        }\n    };\n\n    'use strict';\n\n    function FormRenderFn(formId, options, element) {\n        var utils = fbUtils;\n\n        fbUtils.formOptions[formId] = options;\n\n        var formRender = this,\n            defaults = {\n                destroyTemplate: true, // @todo\n                container: false,\n                dataType: 'xml',\n                formData: false,\n                messages: {\n                    formRendered: 'Form Rendered',\n                    noFormData: 'No form data.',\n                    other: 'Other',\n                    selectColor: 'Select Color'\n                },\n                onRender: function onRender() {\n                    $('.amform-hide-formload').removeClass('amform-hide-formload');\n                },\n                render: true,\n                notify: {\n                    error: function error(message) {\n                        return console.error(message);\n                    },\n                    success: function success(message) {\n                        return console.log(message);\n                    },\n                    warning: function warning(message) {\n                        return console.warn(message);\n                    }\n                }\n            },\n            opts = $.extend(true, defaults, options);\n\n        (function () {\n            if (!opts.formData) {\n                return false;\n            }\n\n            var setData = {\n                xml: function xml(formData) {\n                    return utils.parseXML(formData);\n                },\n                json: function json(formData) {\n                    return window.JSON.parse(formData);\n                }\n            };\n\n            opts.formData = setData[opts.dataType](opts.formData) || false;\n        })();\n\n        /**\n         * Extend Element prototype to allow us to append fields\n         *\n         * @param  {Object} fields Node elements\n         */\n        Element.prototype.appendFormFields = function (fields) {\n            var element = this;\n\n            fields.forEach(function (field) {\n                return element.appendChild(field);\n            });\n        };\n\n        /**\n         * Extend Element prototype to remove content\n         */\n        Element.prototype.emptyContainer = function () {\n            var element = this;\n\n            while (element.lastChild) {\n                element.removeChild(element.lastChild);\n            }\n        };\n\n        var runCallbacks = function runCallbacks() {\n            if (opts.onRender) {\n                opts.onRender();\n            }\n        },\n\n         santizeField = function santizeField(field) {\n            var sanitizedField = Object.assign({}, field);\n\n            sanitizedField.className = field.className || field.class || null;\n            delete sanitizedField.class;\n\n            if (field.values) {\n                field.values = field.values.map(function (option) {\n                    return utils.trimObj(option);\n                });\n            }\n\n            return utils.trimObj(sanitizedField);\n        },\n\n        // Render multiple page form\n         renderMultiPageForm = function (element, pages) {\n            if (opts.pageTitles) {\n                var pageTitles = JSON.parse(opts.pageTitles);\n            }\n\n            var multiPageWrap = $('<div data-amcform-js=\"multi-page\" class=\"amcform-multi-page fieldset\"></div>')\n                    .appendTo(element),\n                pageTitlesWrap = $('<ul data-amcform-js=\"page-titles\" class=\"amcform-page-titles\"></ul>')\n                    .appendTo(multiPageWrap);\n\n            if (typeof pageTitles != 'undefined') {\n                // Generate Titles\n                $.each(pageTitles, function (index, title) {\n                    var step = index + 1;\n\n                    pageTitlesWrap.append('<li class=\"amcform-title-wrap\"><a href=\"#page-' + index\n                        + '\" class=\"amcform-title\"><p class=\"amcform-step\">'\n                        + step + '</p><span class=\"amcform-label\">' + title + '</span></a></li>');\n                });\n            }\n\n            // Generate pages\n            for (var i = 0; i < pages.length; i++) {\n                var pageWrap = $('<div id=\"page-' + i + '\" class=\"amcform-page-wrap fields\"></div>')\n                        .appendTo(multiPageWrap)[0],\n                    toolbar = '<div class=\"amcform-toolbar\">';\n\n                pageWrap.appendFormFields(pages[i]);\n\n                if (i > 0) {\n                    toolbar += '<button type=\"button\" '\n                        + 'data-amcform-js=\"prev-button\" class=\"amcform-prev action submit primary \">'\n                        + $.mage.__('Previous') + '</button>';\n                }\n\n                if (i === pages.length - 1) {\n                    if ($('[data-amcform-js=\"gdpr\"]').length) {\n                        var gdpr =  $(element).next('[data-amcform-js=\"gdpr\"]').clone().appendTo(pageWrap),\n                            inputId = gdpr.find('input').attr('data-id');\n\n                        gdpr.find('input').prop('disabled', false).attr('id', inputId);\n                        gdpr.show();\n                    }\n                    var form = $(element).closest('.amform-form'),\n                        isSurvey = parseInt($(form).find('[name=\"is_survey\"]').attr('value'), 10),\n                        prompt = '';\n\n                    if (isSurvey) {\n                        prompt = 'data-mage-init=\\'{\"amcformPrompt\": {}}\\'';\n                    }\n                    toolbar += '<button type=\"submit\" data-amcform-js=\"submit-button\" '\n                        + prompt + ' class=\"amcform-submit action submit primary \">'\n                        + opts.submitButtonTitle + '</button>';\n                } else {\n                    toolbar += '<button type=\"button\" data-amcform-js=\"next-button\" '\n                        + 'class=\"amcform-next action submit primary \">' + $.mage.__('Next') + '</button>';\n                }\n\n                if (i > 0) {\n                    $(pageWrap).find('input, textarea').addClass('amcform-hidden-page');\n                }\n\n                $(toolbar + '</div>').appendTo(pageWrap);\n            }\n\n             window.dispatchEvent(new CustomEvent('amform-elements-rendered', {\n                 detail: {\n                     form: $(element).closest('form')\n                 }\n             }));\n        },\n\n        // Begin the core plugin\n         page,\n            pages = [],\n            rendered,\n            dependencyFields = [],\n            dependencyMap = [];\n\n        // generate field markup if we have fields\n        if (opts.formData) {\n            if (!Array.isArray(opts.formData[0])) {\n                var createPage = [];\n\n                createPage.push(opts.formData);\n                opts.formData = createPage;\n            }\n            // Pages\n            for (var i = 0; i < opts.formData.length; i++) {\n                rendered = [];\n                page = opts.formData[i];\n                // Forms\n                for (var j = 0; j < page.length; j++) {\n                    var sanitizedField = santizeField(page[j]);\n\n                    switch (sanitizedField.type) {\n                        case 'textinput':\n                            try {\n                                var validation = sanitizedField.validation_fields;\n\n                                if (!validation) {\n                                    validation = JSON.parse(sanitizedField.validation);\n                                }\n                            } catch (e) {\n                                validation = {};\n                            }\n                            var resultStr = '',\n                                begStr = '{',\n                                endStr = '}';\n\n                            resultStr = begStr + resultStr;\n\n                            if (validation.hasOwnProperty('validation')) {\n                                switch (validation.validation) {\n                                    case 'None':\n                                    case ' ':\n                                        break;\n                                    case 'pattern':\n                                        if (sanitizedField.regexp) {\n                                            var validationName = validation.validation + Math.random(),\n                                                errorMessage = sanitizedField.errorMessage || 'Invalid format.';\n\n                                            $.validator.addMethod(\n                                                validationName,\n                                                function (value, element, param) {\n                                                    return this.optional(element) || new RegExp(param).test(value);\n                                                },\n                                                $.mage.__(errorMessage)\n                                            );\n\n                                            resultStr = resultStr + '\\'' +\n                                                validationName + '\\':' + sanitizedField.regexp;\n                                        }\n                                        break;\n                                    default:\n                                        resultStr = resultStr + '\\'' + validation.validation + '\\':true';\n                                }\n                            }\n\n                            resultStr += endStr;\n                            sanitizedField['data-validate'] = resultStr;\n                            delete sanitizedField.validation;\n                            break;\n                    }\n                    if (sanitizedField.dependency) {\n                        // eslint-disable-next-line no-loop-func\n                        $.each(sanitizedField.dependency, function (index, elem) {\n                            var name = sanitizedField.name;\n\n                            dependencyFields.push(elem.field);\n\n                            if (\n                                ['checkbox', 'checkboxtwo', 'listbox'].indexOf(sanitizedField.type) !== -1\n                                || ['file'].indexOf(sanitizedField.type) !== -1\n                                && ['1'].indexOf(sanitizedField.multiple) !== -1\n                            ) {\n                                name += '[]';\n                            }\n\n                            if (!dependencyMap[name]) {\n                                dependencyMap[name] = [];\n                            }\n\n                            dependencyMap[name].push(elem);\n                        });\n                    }\n\n                    rendered.push(utils.fieldRender(sanitizedField, opts));\n                }\n\n                pages.push(rendered);\n            }\n\n            if (opts.render) {\n                if (opts.container) {\n                    opts.container = opts.container instanceof jQuery ? opts.container[0] : opts.container;\n                    opts.container.emptyContainer();\n                    renderMultiPageForm(opts.container, pages);\n                } else if (element) {\n                    element.emptyContainer();\n                    renderMultiPageForm(element, pages);\n                }\n\n                runCallbacks();\n                opts.notify.success(opts.messages.formRendered);\n            } else {\n                $.each(pages, function (index, page) {\n                    formRender.markup = rendered.map(function (page) {\n                        return elem.innerHTML;\n                    }).join('');\n                });\n            }\n        } else {\n            var noData = utils.markup('div', opts.messages.noFormData, {\n                className: 'no-form-data'\n            });\n\n            pages.push(noData);\n            opts.notify.error(opts.messages.noFormData);\n        }\n        this.dependencyMap = dependencyMap;\n        this.dependencyFileds = dependencyFields;\n        this.element = $(element);\n        this.form = this.element.parents('form');\n        this.element.on('click change', 'input, select', function ($, fbUtils, event) {\n            var target = event.currentTarget;\n\n            if (this.dependencyFileds.indexOf(target.name.replace('[]', '')) !== -1) {\n                fbUtils.updateDependency(this, $);\n            }\n        }.bind(this, $, fbUtils));\n\n        fbUtils.updateDependency(this, $);\n\n        if (opts.ajax_submit === 1) {\n            var form = this.form;\n\n            form.unbind('submit');\n            form.on('submit', fbUtils.submitForm.bind(form));\n            form.trigger('ajaxFormLoaded');\n        }\n\n        return formRender;\n    }\n\n    (function ($) {\n        $.fn.formRender = function (formId, options, isSurvey, callback) {\n            var self = this,\n                componentOptions = {\n                    classes: {\n                        active: '-active',\n                        formEdit: '-form-edit',\n                        grid: '-grid',\n                        title: 'amcform-title'\n                    },\n                    selectors: {\n                        formParent: '.amform-parent',\n                        popupBlock: '.amcform-popup-block',\n                        closeButton: '[data-amcform-js=\"close\"]',\n                        map: '.map',\n                        showPopupButton: '[data-amform-show={formId}]',\n                        popupCloseException: '.amcform-popup, .amform-show-popup, .modals-overlay, ' +\n                            '.modal-inner-wrap, .ui-datepicker-next, .ui-datepicker-prev, .am-picker-year',\n                        popupBlockId: '.amcform-popup-block[data-form-id={formId}]',\n                        form: '.amform-form[data-amform-id={id}]',\n                        insertContainer: '.insert-container'\n                    }\n                };\n\n            if (parseInt(isSurvey, 10)) {\n                $.ajax({\n                    url: urlBuilder.build(window.location.origin + '/amasty_customform/form/survey'),\n                    dataType: 'json',\n                    type: 'post',\n                    data: {'form_id': formId},\n                    success: function (response) {\n                        if (response.isSurveyAvailable) {\n                            // eslint-disable-next-line no-use-before-define\n                            generateBegin(formId, options, callback);\n                        } else {\n                            // eslint-disable-next-line no-use-before-define\n                            renderMessage(\n                                $(componentOptions.selectors.form.replace('{id}', formId)),\n                                'Thank you for participating in this survey!'\n                            );\n                        }\n                    },\n                    error: function (error) {\n                        console.log(error);\n                    }\n                });\n            } else {\n                // eslint-disable-next-line no-use-before-define\n                generateBegin(formId, options, callback);\n            }\n\n            // eslint-disable-next-line no-use-before-define\n            addShowPopupButtonListener();\n\n            /**\n             * @param {Object} target - jQuery node/nodes-list\n             * @param {String} message\n             * @returns {void}\n             */\n            function renderMessage(target, message) {\n                if (!target.length) {\n                    return;\n                }\n\n                target.each(function (index, item) {\n                    $(item)\n                        .find(componentOptions.selectors.insertContainer)\n                        .html($('<h3>', {\n                            text: $.mage.__(message),\n                            class: componentOptions.classes.title\n                        }));\n                });\n            }\n\n            function generateBegin(formId, options, callback) {\n                // eslint-disable-next-line no-use-before-define\n                generateForm(formId, options);\n                if (callback) {\n                    callback();\n                }\n            }\n\n            function generateForm(formId, options) {\n                self.each(function () {\n                    var formRender = new FormRenderFn(formId, options, this);\n\n                    $(window).trigger('amform-form-' + formId, [\n                        formRender.form[0],\n                        formRender.form.find('[type=\"submit\"]')[0]\n                    ]);\n\n                    return formRender;\n                });\n            }\n\n            function addShowPopupButtonListener() {\n                var buttonBlock = $(componentOptions.selectors.showPopupButton.replace('{formId}', formId)),\n                    _formId,\n                    popupWrapper,\n                    popupBlock,\n                    googleMaps;\n\n                buttonBlock.on('click', function () {\n                    _formId = $(this).attr('data-amform-show');\n                    popupWrapper = $(this).closest(componentOptions.selectors.formParent);\n                    popupBlock = popupWrapper\n                        .find(componentOptions.selectors.popupBlockId\n                        .replace('{formId}', _formId));\n                    googleMaps = popupBlock.find(componentOptions.selectors.map);\n\n                    if (!popupBlock.length) {\n                        return;\n                    }\n\n                    popupBlock.addClass(componentOptions.classes.active);\n\n                    if (googleMaps.width()) {\n                        // trigger resize for prevent grey map\n                        googleMaps.width(googleMaps.width() + 1);\n                    }\n\n                    $(document).on('click', function (event) {\n                        if (!$(event.target).closest(componentOptions.selectors.popupCloseException).length) {\n                            if (buttonBlock.hasClass(componentOptions.classes.formEdit)) {\n                                popupWrapper.remove();\n                            }\n\n                            popupBlock.removeClass(componentOptions.classes.active);\n                        }\n                    });\n\n                    popupBlock.find(componentOptions.selectors.closeButton).on('click', function () {\n                        if (buttonBlock.hasClass(componentOptions.classes.formEdit)) {\n                            popupWrapper.remove();\n                        }\n\n                        popupBlock.removeClass(componentOptions.classes.active);\n                    });\n                });\n\n                if (buttonBlock.hasClass(componentOptions.classes.formEdit)) {\n                    // eslint-disable-next-line no-use-before-define\n                    formEditEvents(buttonBlock);\n                }\n            }\n\n            function formEditEvents(buttonBlock) {\n                var popupWrapper = buttonBlock.closest(componentOptions.selectors.formParent),\n                    popupBlock = popupWrapper.find(componentOptions.selectors.popupBlock),\n                    dataProvider = require('amcformGridDataProvider'),\n                    messageList = require('amcformMessageList'),\n                    notifications = require('amcformNotifications'),\n                    gridData = dataProvider().itemStorage.get();\n\n                buttonBlock.trigger('click');\n\n                buttonBlock.closest(componentOptions.selectors.formParent).find('form').submit(function (event) {\n                    event.preventDefault();\n\n                    // eslint-disable-next-line no-use-before-define\n                    submitEditedForm($(this), function (response) {\n                        if (!response.messages.length) {\n                            notifications().setMessageType('edited', 1);\n\n                            if (buttonBlock.hasClass(componentOptions.classes.grid)) {\n                                dataProvider().getForms(gridData.currentPage, gridData.pageSize);\n                                notifications('showSuccessMessage');\n                            } else {\n                                window.location.reload();\n                            }\n                        } else if (messageList) {\n                            response.messages.forEach(function (message) {\n                                messageList.addErrorMessage({message: message});\n                            });\n                        }\n\n                        popupBlock.removeClass(componentOptions.classes.active);\n                        popupWrapper.remove();\n                    });\n                });\n            }\n\n            function submitEditedForm(target, callback) {\n                var formData;\n\n                if (target.length) {\n                    formData = new FormData(target.get(0));\n\n                    $.ajax({\n                        type: 'POST',\n                        url: target.attr('action'),\n                        data: formData,\n                        contentType: false,\n                        processData:false,\n                        dataType: 'json'\n                    }).done(callback);\n                }\n            }\n        };\n    })($);\n});\n","Amasty_Customform/js/google-map-loader.js":"define([\n    'jquery'\n], function ($) {\n    'use_strict';\n\n    /**\n     * @param {string} googleKey\n     *\n     * @return {jQuery.Deferred}\n     */\n    return function (googleKey) {\n        var result = $.Deferred();\n\n        try {\n            require(\n                ['https://maps.googleapis.com/maps/api/js?libraries=places&key=' + googleKey],\n                result.resolve.bind(result)\n            );\n        } catch (e) {\n            result.reject();\n        }\n\n        return result;\n    }\n})\n","Amasty_Customform/js/form/provider.js":"define([\n    'Magento_Ui/js/form/provider'\n], function (Provider) {\n    return Provider.extend({\n        save: function () {\n            document.dispatchEvent(new Event('customFormSaveBefore'));\n\n            return this._super();\n        }\n    });\n});\n","Amasty_Customform/js/form/elements/form_builder.js":"define([\n    'jquery',\n    'Magento_Ui/js/form/components/html',\n    'Amasty_Customform/js/form-builder-helper'\n], function ($, HTMLComponent, helpers) {\n    'use strict';\n\n    return HTMLComponent.extend({\n        /**\n         * @return {Object} - reference to instance\n         */\n        initObservable: function () {\n            this._super();\n            $(document).on('customFormSaveBefore', this.saveFormConfig.bind(this));\n\n            return this;\n        },\n\n        saveFormConfig: function () {\n            var formBuilderWidget,\n                formTitles,\n                formConfig;\n\n            if ($.mage.customFormBuilder) {\n                formBuilderWidget = $.mage.customFormBuilder.prototype;\n\n                if (!formBuilderWidget.helpers) {\n                    formBuilderWidget.helpers = helpers[1]({}, formBuilderWidget);\n                }\n\n                formTitles = formBuilderWidget.getPageTitles();\n                formConfig = formBuilderWidget.getSerializedFormConfig();\n                this.source.set('data.form_json', JSON.stringify(formConfig));\n                this.source.set('data.form_title', JSON.stringify(formTitles));\n                delete formBuilderWidget.helpers;\n            }\n        }\n    });\n});\n","Amasty_Customform/js/grid/export.js":"define([\n    'jquery',\n    'Magento_Ui/js/grid/export',\n    'Magento_Ui/js/modal/alert',\n    'mage/translate'\n], function ($, mageExport, alert) {\n    'use strict';\n\n    return mageExport.extend({\n        defaults: {\n            emptySelectionProcess: [\n                'individual_pdfs'\n            ]\n        },\n\n        /**\n         *\n         * @param {object} option\n         * @return string|null\n         */\n        buildOptionUrl: function (option) {\n            var params,\n                emptySelection;\n\n            if (this.emptySelectionProcess.indexOf(option.value) !== -1) {\n                params = this.getParams();\n\n                if (Boolean(params['empty_selection'])) {\n                    alert({\n                        title: $.mage.__('Attention'),\n                        content: $.mage.__('You haven\u2019t selected any items!')\n                    });\n\n                    return null;\n                }\n            }\n\n            return this._super();\n        },\n\n        /**\n         * @return {object}\n         */\n        getParams: function () {\n            var params = this._super(),\n                hasSelected = Array.isArray(params.selected) && params.selected.length > 0,\n                hasExcluded = (Array.isArray(params.excluded) && params.excluded.length) || params.excluded === false;\n\n            params.empty_selection = !hasSelected && !hasExcluded;\n\n            return params;\n        },\n\n        applyOption: function () {\n            var option = this.getActiveOption(),\n                url = this.buildOptionUrl(option);\n\n            if (url !== null) {\n                window.open(url);\n            }\n        }\n    });\n});\n","Amasty_Customform/js/grid/columns/select.js":"define([\n    'jquery',\n    'underscore',\n    'Magento_Ui/js/grid/columns/select',\n    'mage/translate'\n], function ($, _, Select) {\n    'use strict';\n\n    return Select.extend({\n        /**\n         * Retrieves label associated with a provided value.\n         *\n         * @returns {String}\n         */\n        getLabel: function (record) {\n            var label = this._super(record);\n\n            if (!label) {\n                label = record.form_name ? record.form_name : $.mage.__(' Form#') + record.form_id\n                label = label + $.mage.__(' (removed)');\n            }\n\n            return label;\n        }\n    });\n});\n","Amasty_PromoCountdown/js/countdown.js":"define([\n    'uiComponent',\n    'mage/storage'\n], function (Component, storage) {\n    'use strict';\n\n    var xhr = {};\n\n    return Component.extend({\n        defaults: {\n            template: 'Amasty_PromoCountdown/countdown',\n            serviceUrl: false,\n            firstRun: true,\n\n            days: 0,\n            hours: 0,\n            min: 0,\n            sec: 0,\n\n            link: null,\n            targetTime: false,\n            startTime: false,\n            isVisible: false,\n            secondsLeft: false\n        },\n\n        initObservable: function () {\n            this._super().observe('days hours min sec isVisible secondsLeft');\n\n            return this;\n        },\n\n        updateValues: function () {\n            this.sec(Math.floor((this.secondsLeft() % 60)));\n\n            if (this.firstRun || this.sec() === 59) {\n                this.min(Math.floor((this.secondsLeft() % (60 * 60)) / 60));\n\n                if (this.firstRun || this.min() === 59) {\n                    this.hours(Math.floor((this.secondsLeft() % (60 * 60 * 24)) / (60 * 60)));\n\n                    if (this.firstRun || this.hours() === 23) {\n                        this.days(Math.floor(this.secondsLeft() / (60 * 60 * 24)));\n                    }\n                }\n            }\n\n            if (this.firstRun) {\n                this.firstRun = false;\n                this.isVisible(true);\n            }\n        },\n\n        parseResult: function (result) {\n            if (result) {\n                this.secondsLeft(result);\n\n                var x = setInterval(function () {\n                    this.secondsLeft(this.secondsLeft() - 1);\n                    this.updateValues();\n\n                    if (this.secondsLeft() === 0) {\n                        clearInterval(x);\n                        this.isVisible(false);\n                    }\n                }.bind(this), 1000);\n            }\n        },\n\n        setupTimer: function () {\n            if (!this.firstRun) {\n                return true;\n            }\n\n            if (xhr.hasOwnProperty(this.targetTime)) {\n                xhr[this.targetTime].done(this.parseResult.bind(this));\n\n                return true;\n            }\n\n            xhr[this.targetTime] = storage.post(this.serviceUrl,\n                JSON.stringify({\n                    start: this.startTime,\n                    end: this.targetTime\n                }),\n                false\n            ).done(\n                this.parseResult.bind(this)\n            ).always(\n                function () {\n                    delete xhr[this.targetTime];\n                }.bind(this)\n            );\n\n            return true;\n        }\n    });\n});\n","Amasty_PromoCountdown/js/validation.js":"require([\n        'jquery',\n        'mage/translate',\n        'jquery/validate'\n    ],\n    function ($) {\n        $('.validate-date-period-min').change(function () {\n            $(this).validation().validation('isValid');\n        });\n\n        $('.validate-date-period-max').change(function () {\n            $('.validate-date-period-min').validation().validation('isValid');\n        });\n\n        $.validator.addMethod(\n            'validate-date-period-min',\n            function (minValue) {\n                var max = $('.validate-date-period-max');\n\n                if (max && max.length && max.first().val()) {\n                    var startDate = new Date(minValue);\n                    var endDate = new Date(max.first().val());\n\n                    return startDate < endDate;\n                }\n\n                return true;\n            },\n            $.mage.__('The Start Time can not be more or equal than the End Time')\n        );\n    }\n);\n","Amasty_PromoCountdown/js/color.js":"define([\n    \"jquery\",\n    \"jquery/colorpicker/js/colorpicker\"\n], function ($) {\n    'use strict';\n\n    return function (config) {\n        var input = $(\"#\" + config.htmlId);\n\n        function inverse(color) {\n            return (0xFFFFFF - (\"0x\" + color)).toString(16).padStart(6, \"0\").toUpperCase();\n        }\n\n        if (config.inverseHex !== '') {\n            input.css({\"backgroundColor\": config.value, \"color\": config.inverseHex});\n        }\n\n        input.ColorPicker({\n            color: config.value,\n\n            onChange: function (hsb, hex) {\n                input.css({\"backgroundColor\": \"#\" + hex, \"color\": \"#\" + inverse(hex)}).val(\"#\" + hex);\n            },\n\n            onShow: function () {\n                $(\".colorpicker\").css(\"z-index\", 903);\n            }\n        });\n    };\n});\n","Amasty_PromoCountdown/js/design/round.js":"define([\n    'uiComponent'\n], function (Component) {\n    'use strict';\n    return Component.extend({\n        defaults: {\n            maxRound: 628,\n            modules: {\n                parent: \"${$.parentName}\"\n            }\n        },\n\n        getLinearGradient: function () {\n            return this.parent().widgetId + '-circle-gradient';\n        },\n\n        offsetDays: function (maxValue) {\n            var totalDays = Math.floor((this.parent().targetTime - this.parent().startTime) / (60 * 60 * 24));\n            return maxValue * (totalDays - this.parent().days()) / totalDays;\n        },\n\n        offsetHour: function (maxValue) {\n            return maxValue * (24 - this.parent().hours()) / 24;\n        },\n\n        offsetMin: function (maxValue) {\n            return maxValue * (60 - this.parent().min()) / 60;\n        },\n\n        offsetSec: function (maxValue) {\n            return maxValue * (60 - this.parent().sec()) / 60;\n        },\n\n        getRotate: function (value) {\n            return ('rotate(' + Math.floor(360 - value) + 'deg').toString();\n        }\n    });\n});\n","Amasty_PromoCountdown/js/design/progress.js":"define([\n    'uiComponent'\n], function (Component) {\n    'use strict';\n    return Component.extend({\n        defaults: {\n            modules: {\n                parent: \"${$.parentName}\"\n            }\n        },\n\n        getCurrentPercent: function () {\n            var totalSeconds = this.parent().targetTime - this.parent().startTime;\n\n            return (1 - this.parent().secondsLeft() / totalSeconds) * 100;\n        },\n\n        getCurrentPercentString: function () {\n            return this.getCurrentPercent() + '%';\n        }\n    });\n});\n","Amasty_PromoCountdown/js/design/circle.js":"define([\n    'uiComponent'\n], function (Component) {\n    'use strict';\n    return Component.extend({\n        defaults: {\n            maxRound: 157,\n            modules: {\n                parent: \"${$.parentName}\"\n            }\n        },\n\n        offsetDays: function () {\n            var totalDays = Math.floor((this.parent().targetTime - this.parent().startTime) / (60 * 60 * 24));\n            return this.maxRound * (totalDays - this.parent().days()) / totalDays;\n        },\n\n        offsetHour: function () {\n            return this.maxRound * (24 - this.parent().hours()) / 24;\n        },\n\n        offsetMin: function () {\n            return this.maxRound * (60 - this.parent().min()) / 60;\n        },\n\n        offsetSec: function () {\n            return this.maxRound * (60 - this.parent().sec()) / 60;\n        }\n    });\n});\n","Amasty_ShippingBar/js/validation.js":"require([\n    'Magento_Ui/js/lib/validation/validator',\n    'mage/translate'\n], function (validator, $t) {\n    'use strict';\n\n    validator.addRule(\n        'validate-length-of-numbers-after-comma',\n        function (value) {\n            return /^\\d+(\\.\\d{0,2})?$/.test(value);\n        },\n        $t('The field should contain no more than 2 decimal places.')\n    );\n\n    validator.addRule(\n        'validate-no-html-tags',\n        function (value) {\n            return !/<+\\w+((\\s+\\w+(\\s*=\\s*(?:\".*?\"|'.*?'|[^'\">\\s]+))?)+\\s*|\\s*)?\\/?>/gm.test(value);\n        },\n        $t('The field should contain no html tags.')\n    );\n});\n","Amasty_ShippingBar/js/form/element/select-with-info.js":"define([\n    'Magento_Ui/js/form/element/select'\n], function (Element) {\n    'use strict';\n\n    return Element.extend({\n        noticeStorage: '',\n\n        initialize: function () {\n            this._super();\n\n            this.noticeStorage = this.additionalInfo();\n\n            return this;\n        },\n\n        initObservable: function () {\n            this._super();\n\n            this.observe('additionalInfo');\n\n            return this;\n        },\n\n        hideInfo: function () {\n            this.additionalInfo(false);\n        },\n\n        showInfo: function () {\n            this.additionalInfo(this.noticeStorage);\n        }\n    });\n});\n","Amasty_ShippingBar/js/form/element/color-select.js":"define([\n    'jquery',\n    'Magento_Ui/js/form/element/abstract',\n    'jquery/colorpicker/js/colorpicker',\n], function ($, Element) {\n    'use strict';\n\n    return Element.extend({\n        defaults: {\n            visible: true,\n            elementTmpl: 'Amasty_ShippingBar/form/element/color-select',\n            color: false\n        },\n\n        bindColorPicker: function(element) {\n            $(element).ColorPicker({\n                color: this.value(),\n                onChange: function (hsb, hex) {\n                    this.value('#' + hex);\n                }.bind(this)\n            });\n        },\n\n        initObservable: function () {\n            this._super().observe('color');\n\n            this.value.subscribe(function () {\n               this.color(this.inverseColor(this.value()));\n            }.bind(this));\n\n            return this;\n        },\n\n        inverseColor: function (color) {\n            color = color.replace('#', '');\n            return (0xFFFFFF - (\"0x\" + color))\n                .toString(16)\n                .padStart(6, \"0\")\n                .toUpperCase().\n                replace('', '#');\n        },\n    });\n});\n","Amasty_ShippingBar/js/form/element/preview.js":"define([\n    'uiComponent',\n], function (Element) {\n    'use strict';\n\n    return Element.extend({\n        defaults: {\n            helpFlag: false,\n            contentVisibility: true,\n            additionalClass: false,\n            isVisible: true,\n            imports: {\n                actionClickable: '${$.provider}:data.action_clickable',\n                isCarVisibleToggle: '${$.provider}:data.car_icon_visible',\n                closeable: '${$.provider}:data.closeable',\n                textSize: '${$.provider}:data.text_size',\n                fontFamily: '${$.provider}:data.text_font',\n                barBackground: '${$.provider}:data.background_color',\n                extraColor: '${$.provider}:data.extra_color',\n                textColor: '${$.provider}:data.text_color',\n                actionLink: '${$.provider}:data.action_link',\n                goal: '${$.provider}:data.goal',\n                goalLeft: '${$.provider}:data.goal_left',\n                goalSource: '${$.provider}:data.goal_source',\n                currencySymbol: '${$.provider}:data.currency_symbol',\n                customStyle: '${$.provider}:data.custom_style',\n            },\n            modules: {\n                initMessage: 'amasty_shipbar_profile_form.amasty_shipbar_profile_form.content.init_message',\n                progressMessage: 'amasty_shipbar_profile_form.amasty_shipbar_profile_form.content.progress_message',\n                achievedMessage: 'amasty_shipbar_profile_form.amasty_shipbar_profile_form.content.achieved_message',\n                termsMessage: 'amasty_shipbar_profile_form.amasty_shipbar_profile_form.content.terms_message'\n            }\n        },\n\n        initObservable: function () {\n            this._super().observe([\n                'helpFlag',\n                'contentVisibility',\n                'actionClickable',\n                'isCarVisibleToggle',\n                'closeable',\n                'textSize',\n                'fontFamily',\n                'barBackground',\n                'extraColor',\n                'textColor',\n                'actionLink',\n                'goal',\n                'goalLeft',\n                'goalSource',\n                'customStyle'\n            ]);\n\n            return this;\n        },\n\n        isCarVisible: function () {\n            return this.isCarVisibleToggle() === \"1\" || !this.contentVisibility();\n        },\n\n        hasTermContent: function () {\n            var result = this.getMessageByFieldset(this.termsMessage()).length > 0;\n\n            if (!result) {\n                this.helpFlag(result);\n            }\n\n            return result;\n        },\n\n        initMoving: function () {\n        },\n\n        haveAction: function () {\n            return this.actionClickable() === \"1\" && this.actionLink().length > 0;\n        },\n\n        isCloseable: function () {\n            return this.closeable() === \"1\";\n        },\n\n        haveCustomStyle: function () {\n            return this.customStyle().length > 0;\n        },\n\n        getLabelContent: function () {\n            var text = this.getRawLabelContent();\n\n            if (this.goalSource() == 0) {\n                text = text.replace('{{ruleGoal}}', this.addExtraColor(Math.round(this.goal() * 100) / 100));\n                text = text.replace('{{ruleGoalLeft}}', this.addExtraColor(Math.round(this.goal() * this.goalLeft()) / 100));\n            } else {\n                text = text.replace('{{ruleGoal}}', this.addExtraColor('{Free Shipping Amount}'));\n                text = text.replace('{{ruleGoalLeft}}', this.addExtraColor('{Free Shipping Amount}'));\n            }\n\n            return text;\n        },\n\n        getFontSize: function () {\n            return this.textSize() + 'px';\n        },\n\n        getMessageByFieldset: function (element) {\n            return element._elems[10]._elems[10]._elems[10].value();\n        },\n\n        getRawLabelContent: function () {\n            if (this.helpFlag()) {\n                return this.getMessageByFieldset(this.termsMessage());\n            }\n\n            switch (this.goalLeft()) {\n                case \"100\":\n                    return this.getMessageByFieldset(this.initMessage());\n                case \"50\":\n                    return this.getMessageByFieldset(this.progressMessage());\n                case \"0\":\n                    return this.getMessageByFieldset(this.achievedMessage());\n            }\n\n            return this.getMessageByFieldset(this.initMessage());\n        },\n\n        addExtraColor: function (data) {\n            return \"<b style=\\\"color: \" + this.extraColor() + \"\\\">\" + this.currencySymbol + data  + \"</b>\";\n        },\n    });\n});\n","Amasty_CustomTabs/js/grid/columns/checkbox.js":"define([\n    'underscore',\n    'mage/translate',\n    'Magento_Ui/js/grid/columns/column',\n    'jquery'\n], function (_, $t, Column, jQuery) {\n    'use strict';\n\n    return Column.extend({\n        defaults: {\n            bodyTmpl: 'Amasty_CustomTabs/grid/cells/checkbox',\n            draggable: false,\n            sortable: false\n        },\n\n        /**\n         * Remove disable class from Insert Attribute button after Attribute has been chosen.\n         *\n         * @return {Boolean}\n         */\n        selectAttribute: function () {\n            if (jQuery('#insert_attribute').hasClass('disabled')) {\n                jQuery('#insert_attribute').removeClass('disabled');\n            }\n\n            return true;\n        }\n    });\n});\n","Amasty_CustomTabs/js/wysiwyg/tiny_mce/plugins/editor_plugin.js":"/* global tinymce, varienGlobalEvents, Base64 */\n/* eslint-disable strict */\ndefine('customTabEditorPlugin', [\n    'Amasty_CustomTabs/js/variable/attribute-directive-generator',\n    'wysiwygAdapter',\n    'jquery'\n], function (attributeDirectiveGenerator, wysiwyg, jQuery) {\n    return function (config) {\n        tinymce.create('tinymce.plugins.amcustomtabs_attribute', {\n\n            /**\n             * Initialize editor plugin.\n             *\n             * @param {tinymce.editor} editor - Editor instance that the plugin is initialized in.\n             * @param {String} url - Absolute URL to where the plugin is located.\n             */\n            init: function (editor, url) {\n                var self = this;\n\n                /**\n                 * Add new command to open attributes selector slideout.\n                 */\n                editor.addCommand('openAttributesSlideout', function (commandConfig) {\n                    var selectedElement;\n\n                    if (commandConfig) {\n                        selectedElement = commandConfig.selectedElement;\n                    } else {\n                        selectedElement = tinymce.activeEditor.selection.getNode();\n                    }\n                    AmastyProductTabsAttributePlugin.setEditor(editor);\n                    AmastyProductTabsAttributePlugin.loadChooser(\n                        config.url,\n                        wysiwyg.getId(),\n                        selectedElement\n                    );\n                });\n\n                /**\n                 * Add button to the editor toolbar.\n                 */\n                editor.addButton('amcustomtabs_attribute', {\n                    title: jQuery.mage.__('Insert Attribute'),\n                    tooltip: jQuery.mage.__('Insert Attribute'),\n                    cmd: 'openAttributesSlideout',\n                    image: url + '/img/icon.png',\n\n                    /**\n                     * Highlight or dismiss Insert Attribute button when attribute is selected or deselected.\n                     */\n                    onPostRender: function () {\n                        var _this = this,\n\n                        /**\n                         * Toggle active state of Insert Attribute button.\n                         *\n                         * @param {Object} e\n                         */\n                        toggleAttributeButton = function (e) {\n                            _this.active(false);\n\n                            if (jQuery(e.target).hasClass('amcustomtabs-attribute')) {\n                                _this.active(true);\n                            }\n                        };\n\n                        editor.on('click', toggleAttributeButton);\n                        editor.on('change', toggleAttributeButton);\n                    }\n                });\n\n                /**\n                 * Double click handler on the editor to handle dbl click on attribute placeholder.\n                 */\n                editor.on('dblclick', function (evt) {\n                    if (jQuery(evt.target).hasClass('amcustomtabs-attribute')) {\n                        editor.selection.collapse(false);\n                        editor.execCommand('openAttributesSlideout', {\n                            ui: true,\n                            selectedElement: evt.target\n                        });\n                    }\n                });\n\n                /**\n                 * Attach event handler for when wysiwyg editor is about to encode its content\n                 */\n                varienGlobalEvents.attachEventHandler('wysiwygEncodeContent', function (content) {\n                    content = self.encodeAttributes(content);\n\n                    return content;\n                });\n\n                /**\n                 * Attach event handler for when wysiwyg editor is about to decode its content\n                 */\n                varienGlobalEvents.attachEventHandler('wysiwygDecodeContent', function (content) {\n                    content = self.decodeAttributes(content);\n\n                    return content;\n                });\n            },\n\n            /**\n             * Encode attributes in content\n             *\n             * @param {String} content\n             * @returns {*}\n             */\n            encodeAttributes: function (content) {\n                content = content.gsub(/\\{\\{amcustomtabs_attribute code=\\\"([^\\\"]+)\\\"\\}\\}/i, function (match) {\n                    var path = match[1],\n                        amAttributes,\n                        imageHtml;\n\n                    amAttributes = JSON.parse(config.placeholders);\n\n                    if (amAttributes[match[1]]) {\n                        imageHtml = '<span id=\"%id\" class=\"amcustomtabs-attribute magento-placeholder mceNonEditable\">' +\n                            '%s</span>';\n                        imageHtml = imageHtml.replace('%s', amAttributes[match[1]]['label']);\n                    } else {\n                        imageHtml = '<span id=\"%id\" class=\"' +\n                            'amcustomtabs-attribute magento-placeholder magento-placeholder-error ' +\n                            'mceNonEditable' +\n                            '\">' +\n                            'Not found' +\n                            '</span>';\n                    }\n\n                    return imageHtml.replace('%id', Base64.idEncode(path));\n                });\n\n                return content;\n            },\n\n            /**\n             * Decode attributes in content.\n             *\n             * @param {String} content\n             * @returns {String}\n             */\n            decodeAttributes: function (content) {\n                var doc = (new DOMParser()).parseFromString(content.replace(/&quot;/g, '&amp;quot;'), 'text/html');\n\n                [].forEach.call(doc.querySelectorAll('span.amcustomtabs-attribute'), function (el) {\n                    var $el = jQuery(el);\n\n                    $el.replaceWith(\n                        attributeDirectiveGenerator.processConfig(\n                            Base64.idDecode(\n                                $el.attr('id')\n                            )\n                        )\n                    );\n                });\n\n                return doc.body ? doc.body.innerHTML.replace(/&amp;quot;/g, '&quot;') : content;\n            },\n\n            /**\n             * @return {Object}\n             */\n            getInfo: function () {\n                return {\n                    longname: 'Amasty Product Tab Attribute Manager Plugin',\n                    author: 'Amasty Team',\n                    authorurl: 'http://amasty.com',\n                    infourl: 'http://amasty.com',\n                    version: '1.0'\n                };\n            }\n        });\n\n        /**\n         * Register plugin\n         */\n        tinymce.PluginManager.add('amcustomtabs_attribute', tinymce.plugins.amcustomtabs_attribute);\n    };\n});\n","Amasty_CustomTabs/js/variable/attribute-directive-generator.js":"define([\n    'underscore'\n], function (_) {\n    'use strict';\n\n    return _.extend({\n        directiveTemplate: '{{amcustomtabs_attribute code=\"%s\"}}',\n\n        /**\n         * @param {String} path\n         * @return {String}\n         */\n        processConfig: function (path) {\n            return this.directiveTemplate.replace('%s', path);\n\n        }\n\n    });\n});\n","Amasty_CustomTabs/js/variable/editor.js":"require([\n    'Amasty_CustomTabs/js/variable/attributes'\n]);\n","Amasty_CustomTabs/js/variable/attributes.js":"define([\n    'jquery',\n    'mage/backend/notification',\n    'mage/translate',\n    'uiRegistry',\n    'mage/apply/main',\n    'mageUtils',\n    'Amasty_CustomTabs/js/variable/attribute-directive-generator',\n    'Magento_Ui/js/lib/spinner',\n    'jquery/ui',\n    'prototype'\n], function (jQuery, notification, $t, registry, mageApply, utils, attributeDirectiveGenerator, loader) {\n    'use strict';\n\n    window.AmastyProductTabsAttribute = {\n        textareaElementId: null,\n        attributesContent: null,\n        dialogWindow: null,\n        dialogWindowId: 'attributes-chooser',\n        overlayShowEffectOptions: null,\n        overlayHideEffectOptions: null,\n        insertFunction: 'Attributes.insertAttribute',\n        selectedPlaceholder: null,\n        isEditMode: null,\n        editor: null,\n\n        /**\n         * Initialize Attributes handler.\n         *\n         * @param {*} textareaElementId\n         * @param {Function} insertFunction\n         * @param {Object} editor\n         * @param {Object} selectedPlaceholder\n         */\n        init: function (textareaElementId, insertFunction, editor, selectedPlaceholder) {\n            if ($(textareaElementId)) {\n                this.textareaElementId = textareaElementId;\n            }\n\n            if (insertFunction) {\n                this.insertFunction = insertFunction;\n            }\n\n            if (selectedPlaceholder) {\n                this.selectedPlaceholder = selectedPlaceholder;\n            }\n\n            if (editor) {\n                this.editor = editor;\n            }\n        },\n\n        /**\n         * Reset data.\n         */\n        resetData: function () {\n            this.attributesContent = null;\n            this.dialogWindow = null;\n        },\n\n        /**\n         * Open attributes chooser slideout.\n         *\n         * @param {Object} attributes\n         */\n        openAttributeChooser: function (attributes) {\n            if (attributes) {\n                this.openDialogWindow(attributes);\n            }\n        },\n\n        /**\n         * Close attributes chooser slideout dialog window.\n         */\n        closeDialogWindow: function () {\n            jQuery('#' + this.dialogWindowId).modal('closeModal');\n        },\n\n        /**\n         * Init ui component grid on the form\n         *\n         * @return void\n         */\n        initUiGrid: function () {\n            mageApply.apply(document.getElementById(this.dialogWindow));\n            jQuery('#' + this.dialogWindowId).applyBindings();\n            loader.get('amcustomtabs_attributes_modal.amcustomtabs_attributes_modal.attributes').hide();\n        },\n\n        /**\n         * Open slideout dialog window.\n         *\n         * @param {*} attributesContent\n         * @param {Object} selectedElement\n         */\n        openDialogWindow: function (attributesContent, selectedElement) {\n\n            var html = utils.copy(attributesContent),\n                self = this;\n\n            jQuery('<div id=\"' + this.dialogWindowId + '\">' + html + '</div>').modal({\n                title: self.isEditMode ? $t('Edit Attribute') : $t('Insert Attribute'),\n                type: 'slide',\n                buttons: self.getButtonsConfig(self.isEditMode),\n\n                /**\n                 * @param {jQuery.Event} e\n                 * @param {Object} modal\n                 */\n                closed: function (e, modal) {\n                    modal.modal.remove();\n                }\n            });\n\n            this.selectedPlaceholder = selectedElement;\n\n            this.addNotAvailableMessage(selectedElement);\n\n            jQuery('#' + this.dialogWindowId).modal('openModal');\n        },\n\n        /**\n         * Add message to slide out that attribute is no longer available\n         *\n         * @param {Object} selectedElement\n         */\n        addNotAvailableMessage: function (selectedElement) {\n            var name,\n                msg,\n                attributePath,\n                $wrapper,\n                lostAttributeClass = 'magento-placeholder-error';\n\n            if (\n                this.isEditMode &&\n                typeof selectedElement !== 'undefined' &&\n                jQuery(selectedElement).hasClass(lostAttributeClass)\n            ) {\n\n                attributePath = AmastyProductTabsAttributePlugin.getElementAttributePath(selectedElement);\n                name = attributePath.split(':');\n                msg = $t('The attribute %1 is no longer available. Select a different attribute.')\n                    .replace('%1', name[1]);\n\n                jQuery('body').notification('clear')\n                    .notification('add', {\n                        error: true,\n                        message: msg,\n\n                        /**\n                         * @param {String} message\n                         */\n                        insertMethod: function (message) {\n                            $wrapper = jQuery('<div/>').html(message);\n\n                            jQuery('.modal-header .page-main-actions').after($wrapper);\n                        }\n                    });\n            }\n        },\n\n        /**\n         * Get selected attribute directive.\n         *\n         * @returns {*}\n         */\n        getSelectedCheckboxes: function () {\n            return jQuery('[name=\"attribute-select\"]:checked');\n        },\n\n        /**\n         * Get buttons configuration for slideout dialog.\n         *\n         * @param {Boolean} isEditMode\n         *\n         * @returns {Array}\n         */\n        getButtonsConfig: function (isEditMode) {\n\n            var self = this,\n                buttonsData;\n\n            buttonsData = [\n                {\n\n                    text: $t('Cancel'),\n                    'class': 'action-scalable cancel',\n\n                    /**\n                     * @param {jQuery.Event} event\n                     */\n                    click: function (event) {\n                        this.closeModal(event);\n                    }\n                },\n                {\n\n                    text: isEditMode ? $t('Save') : $t('Insert Attribute'),\n                    class: 'action-primary ' + (isEditMode ? '' : 'disabled'),\n                    attr: {\n                        'id': 'insert_attribute'\n                    },\n\n                    /**\n                     * Insert Attribute\n                     */\n                    click: function () {\n                        self.insertAttribute(self.getSelectedCheckboxes());\n                    }\n                }\n            ];\n\n            return buttonsData;\n        },\n\n        /**\n         * Prepare attributes row.\n         *\n         * @param {String} varValue\n         * @param {*} varLabel\n         * @return {String}\n         * @deprecated This method isn't relevant after ui changes\n         */\n        prepareAttributeRow: function (varValue, varLabel) {\n            var value = varValue.replace(/\"/g, '&quot;').replace(/'/g, '\\\\&#39;');\n\n            return '<a href=\"#\" onclick=\"' +\n                this.insertFunction +\n                '(\\'' +\n                value +\n                '\\');return false;\">' +\n                varLabel +\n                '</a>';\n        },\n\n        /**\n         * Insert attribute into WYSIWYG editor.\n         *\n         * @param selected\n         * @return {Object}\n         */\n        insertAttribute: function (selected) {\n            var windowId = this.dialogWindowId,\n                textareaElm;\n\n            jQuery('#' + windowId).modal('closeModal');\n            textareaElm = $(this.textareaElementId);\n            if (require.defined('wysiwygAdapter')) {\n                require(['wysiwygAdapter'], function (wysiwyg) {\n                    //to support switching between wysiwyg editors\n                    var wysiwygEditorFocused = wysiwyg && wysiwyg.activeEditor();\n\n                    if (wysiwygEditorFocused && wysiwyg.get(this.textareaElementId)) {\n                        if (jQuery(this.selectedPlaceholder).hasClass('magento-placeholder')) {\n                            wysiwyg.setCaretOnElement(this.selectedPlaceholder, 1);\n                        }\n                        selected.each(function () {\n                            wysiwyg.insertContent(attributeDirectiveGenerator.processConfig(this.value), false);\n                        });\n\n                        if (this.selectedPlaceholder\n                            && jQuery(this.selectedPlaceholder).hasClass('magento-placeholder')\n                        ) {\n                            this.selectedPlaceholder.remove();\n                        }\n                    } else if (textareaElm) {\n                        var shouldToggle = textareaElm.visible() === false;\n                        if (shouldToggle) {\n                            wysiwygamcustomtabs_tabs_form_content.toggle.bind(wysiwygamcustomtabs_tabs_form_content)();\n                        }\n\n                        this.insertAttributeViaTextarea(textareaElm, selected);\n                        if (shouldToggle) {\n                            wysiwygamcustomtabs_tabs_form_content.toggle.bind(wysiwygamcustomtabs_tabs_form_content)();\n                        }\n                    }\n                }.bind(this));\n            } else if (textareaElm) {\n                var shouldToggle = textareaElm.visible() === false;\n                if (shouldToggle) {\n                    wysiwygamcustomtabs_tabs_form_content.toggle.bind(wysiwygamcustomtabs_tabs_form_content)();\n                }\n                this.insertAttributeViaTextarea(textareaElm, selected);\n                if (shouldToggle) {\n                    wysiwygamcustomtabs_tabs_form_content.toggle.bind(wysiwygamcustomtabs_tabs_form_content)();\n                }\n            }\n\n            return this;\n        },\n\n        insertAttributeViaTextarea: function (textareaElm, selected) {\n            var scrollPos = textareaElm.scrollTop;\n            selected.each(function () {\n                updateElementAtCursor(textareaElm, attributeDirectiveGenerator.processConfig(this.value));\n            });\n            textareaElm.focus();\n            textareaElm.scrollTop = scrollPos;\n            jQuery(textareaElm).change();\n            textareaElm = null;\n        }\n    };\n\n    window.AmastyProductTabsAttributePlugin = {\n        editor: null,\n        attributes: null,\n        textareaId: null,\n\n        /**\n         * Bind editor.\n         *\n         * @param {*} editor\n         */\n        setEditor: function (editor) {\n            this.editor = editor;\n        },\n\n        /**\n         * Load attributes chooser.\n         *\n         * @param {String} url\n         * @param {*} textareaId\n         * @param {Object} selectedElement\n         *\n         * @return {Object}\n         */\n        loadChooser: function (url, textareaId, selectedElement) {\n            this.textareaId = textareaId;\n\n            new Ajax.Request(url, {\n                parameters: {},\n                onComplete: function (transport) {\n                    AmastyProductTabsAttribute.init(this.textareaId, 'AmastyProductTabsAttributePlugin.insertAttribute', this.editor);\n                    AmastyProductTabsAttribute.isEditMode = !!this.getElementAttributePath(selectedElement);\n                    this.attributesContent = transport.responseText;\n                    AmastyProductTabsAttribute.openDialogWindow(this.attributesContent, selectedElement);\n                    AmastyProductTabsAttribute.initUiGrid();\n                }.bind(this)\n            });\n\n            return this;\n        },\n\n        /**\n         * Open attributes chooser window.\n         *\n         * @param {*} attributes\n         * @deprecated This method isn't relevant after ui changes\n         */\n        openChooser: function (attributes) {\n            AmastyProductTabsAttribute.openAttributeChooser(attributes);\n        },\n\n        /**\n         * Insert Attribute.\n         *\n         * @param {*} value\n         *\n         * @return {Object}\n         */\n        insertAttribute: function (value) {\n            if (this.textareaId) {\n                AmastyProductTabsAttribute.init(this.textareaId);\n                AmastyProductTabsAttribute.insertAttribute(value);\n            } else {\n                AmastyProductTabsAttribute.closeDialogWindow();\n                AmastyProductTabsAttribute.insertAttribute(value);\n            }\n\n            return this;\n        },\n\n        /**\n         * Get element Attribute path.\n         *\n         * @param {Object} element\n         * @returns {String}\n         */\n        getElementAttributePath: function (element) {\n            var type, code;\n\n            if (!element || !jQuery(element).hasClass('amcustomtabs-attribute')) {\n                return '';\n            }\n            code = Base64.idDecode(element.getAttribute('id'));\n\n            return code;\n        }\n    };\n});\n","Amasty_CustomTabs/js/form/element/type.js":"define([\n    'Magento_Ui/js/form/element/select'\n], function (select) {\n    return select.extend({\n        getOption: function () {\n            var option = this._super(this.source.data.type),\n                newOption = {\n                    'value': option.value,\n                    'label': option.label\n                };\n            if (this.source.data.type == 2) {\n                newOption.label += ' ' + this.source.data.module_name;\n            }\n\n            return newOption;\n        }\n    });\n});\n","WolfSellers_AmastyLabel/js/initLabel-mixin.js":"define([\n    'jquery',\n    'jquery/ui'\n], function (\n    $\n) {\n   'use strict';\n   var initLabelWidgetMixin = {\n       /**\n        * Exec Amasty Label widget\n        * @public\n        * @returns {void}\n        */\n       execLabel: function () {\n           if (this._isFromAmastySearch()) {\n               return; // No renderizamos el label si viene de Amasty_Xsearch\n           }\n           this.element.amShowLabel(this.options.config);\n       },\n\n       /**\n        * Verificar si el elemento est\u00e1 dentro de un bloque de Amasty_Xsearch\n        * @private\n        * @returns {Boolean}\n        */\n       _isFromAmastySearch: function () {\n           return this.element.closest('.amsearch-products-section').length > 0;\n       }\n   };\n\n    return function (initLabelWidget) {\n        $.widget('mage.amInitLabel', initLabelWidget, initLabelWidgetMixin);\n        return $.mage.amInitLabel;\n    };\n\n});\n","WolfSellers_SkinCare/js/label-mixin.js":"define([\n    'jquery',\n    'jquery/ui'\n], function ($) {\n    'use strict';\n\n    var labelWidgetMixin = {\n        setLabelPosition: function () {\n            var className = 'amlabel-position-' + this.options.position\n                    + '-' + this.options.product+ '-' + this.options.mode + this.getWidgetLabelCode(),\n                wrapper = this.parent.find('.' + className);\n\n            if (wrapper.length) {\n                var labelOrderMatch = false;\n\n                $.each(wrapper.find('.amasty-label-container'), function (index, prevLabel) {\n                    var nextLabel = $(prevLabel).next(),\n                        currentOrder = parseInt(this.options.order);\n                    if (typeof $(prevLabel).data('mageAmShowLabel') !== \"undefined\"){\n                        var prevOrder = parseInt($(prevLabel).data('mageAmShowLabel').options.order),\n                            nextOrder = null;\n\n                        if (nextLabel.length) {\n                            nextOrder = parseInt(nextLabel.data('mageAmShowLabel').options.order);\n                        }\n\n                        if (currentOrder >= prevOrder && (!nextOrder || currentOrder <= nextOrder)) {\n                            labelOrderMatch = true;\n                            $(prevLabel).after(this.element);\n                            return false;\n                        }\n                    }\n                }.bind(this));\n\n                if (!labelOrderMatch) {\n                    wrapper.prepend(this.element);\n                }\n            } else {\n                var parent = this.element.parent();\n                if (parent.hasClass(this.positionWrapper)) {\n                    parent.parent().append(this.element);\n                }\n\n                this.element.wrap('<div class=\"' + className + ' ' + this.positionWrapper + '\"></div>');\n                wrapper = this.element.parent();\n            }\n\n            if (this.options.alignment === 1) {\n                wrapper.children(':not(:first-child)').each(function (index, element) {\n                    this.setStyleIfNotExist(\n                        $(element),\n                        {\n                            'marginLeft': this.options.margin + 'px'\n                        }\n                    );\n                }.bind(this));\n\n            } else {\n                wrapper.children(':not(:first-child)').each(function (index, element) {\n                    this.setStyleIfNotExist(\n                        $(element),\n                        {\n                            'marginTop': this.options.margin + 'px'\n                        }\n                    );\n                }.bind(this));\n            }\n\n            //clear styles before changing\n            wrapper.css({\n                'top'  : \"\",\n                'left' : \"\",\n                'right' : \"\",\n                'bottom' : \"\",\n                'margin-top' : \"\",\n                'margin-bottom' : \"\",\n                'margin-left' : \"\",\n                'margin-right' : \"\"\n            });\n\n            switch (this.options.position) {\n                case 'top-left':\n                    wrapper.css({\n                        'top'  : 0,\n                        'left' : 0\n                    });\n                    break;\n                case 'top-center':\n                    wrapper.css({\n                        'top': 0,\n                        'left': 0,\n                        'right': 0,\n                        'margin-left': 'auto',\n                        'margin-right': 'auto'\n                    });\n                    break;\n                case 'top-right':\n                    wrapper.css({\n                        'top'   : 0,\n                        'right' : 0,\n                        'text-align' : 'right'\n                    });\n                    break;\n\n                case 'middle-left':\n                    wrapper.css({\n                        'left' : 0,\n                        'top'   : 0,\n                        'bottom'  : 0,\n                        'margin-top': 'auto',\n                        'margin-bottom': 'auto'\n                    });\n                    break;\n                case 'middle-center':\n                    wrapper.css({\n                        'top'   : 0,\n                        'bottom'  : 0,\n                        'margin-top': 'auto',\n                        'margin-bottom': 'auto',\n                        'left': 0,\n                        'right': 0,\n                        'margin-left': 'auto',\n                        'margin-right': 'auto'\n                    });\n                    break;\n                case 'middle-right':\n                    wrapper.css({\n                        'top'   : 0,\n                        'bottom'  : 0,\n                        'margin-top': 'auto',\n                        'margin-bottom': 'auto',\n                        'right' : 0,\n                        'text-align' : 'right'\n                    });\n                    break;\n\n                case 'bottom-left':\n                    wrapper.css({\n                        'bottom'  : 0,\n                        'left'    : 0\n                    });\n                    break;\n                case 'bottom-center':\n                    wrapper.css({\n                        'bottom': 0,\n                        'left': 0,\n                        'right': 0,\n                        'margin-left': 'auto',\n                        'margin-right': 'auto'\n                    });\n                    break;\n                case 'bottom-right':\n                    wrapper.css({\n                        'bottom'   : 0,\n                        'right'    : 0,\n                        'text-align' : 'right'\n                    });\n                    break;\n            }\n        },\n    };\n    return function (labelWidget) {\n        $.widget('mage.amShowLabel', labelWidget, labelWidgetMixin);\n        return $.mage.amShowLabel;\n    };\n});\n","Magento_AsynchronousOperations/js/insert-form.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/components/insert-form',\n    'uiRegistry'\n], function (Insert, registry) {\n    'use strict';\n\n    return Insert.extend({\n        defaults: {\n            modalProvider: '${ $.parentName }',\n            titlePrefix: '',\n            imports: {\n                changeModalTitle: '${ $.modalProvider }:state'\n            },\n            listens: {\n                responseData: 'afterRetry'\n            },\n            modules: {\n                modal: '${ $.modalProvider }',\n                notificationListing: '${ $.columnsProvider }'\n            }\n        },\n\n        /** @inheritdoc */\n        initConfig: function () {\n            var modalTitleProvider;\n\n            this._super();\n            modalTitleProvider = this.modalTitleProvider.split(':');\n            this.modalTitleTarget = modalTitleProvider[0];\n            this.modalTitlePath = modalTitleProvider[1];\n        },\n\n        /**\n         * Change modal title.\n         *\n         * @param {Boolean} change\n         */\n        changeModalTitle: function (change) {\n            if (change) {\n                registry.get(this.modalTitleTarget, function (target) {\n                    this.modal().setTitle(this.titlePrefix + target.get(this.modalTitlePath));\n                }.bind(this));\n            } else {\n                this.modal().setTitle('');\n            }\n        },\n\n        /**\n         * Action after retry operation.\n         *\n         * @param {Object} data\n         */\n        afterRetry: function (data) {\n            if (!data.error) {\n                this.modal().closeModal();\n                this.notificationListing().reload();\n            }\n        }\n    });\n});\n","Magento_AsynchronousOperations/js/form/error.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/element/abstract'\n], function (Abstract) {\n    'use strict';\n\n    return Abstract.extend({\n        /** @inheritdoc */\n        onUpdate: function () {\n            this.bubble('update', this.hasChanged());\n        }\n    });\n});\n","Magento_AsynchronousOperations/js/grid/listing.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_AdminNotification/js/grid/listing',\n    'Magento_Ui/js/modal/alert',\n    'mage/translate',\n    'underscore',\n    'jquery'\n], function (Listing, uiAlert, $t, _, $) {\n    'use strict';\n\n    return Listing.extend({\n        defaults: {\n            isAllowed: true,\n            ajaxSettings: {\n                method: 'POST',\n                data: {},\n                url: '${ $.dismissUrl }'\n            }\n        },\n\n        /** @inheritdoc */\n        initialize: function () {\n            _.bindAll(this, 'reload', 'onError');\n\n            return this._super();\n        },\n\n        /**\n         * Dismiss all items.\n         */\n        dismissAll: function () {\n            var toDismiss = [];\n\n            _.each(this.rows, function (row) {\n                if (row.dismiss) {\n                    toDismiss.push(row.uuid);\n                }\n            });\n            toDismiss.length && this.dismiss(toDismiss);\n        },\n\n        /**\n         * Dismiss action.\n         *\n         * @param {Array} items\n         */\n        dismiss: function (items) {\n            var config = _.extend({}, this.ajaxSettings);\n\n            config.data.uuid = items;\n            this.showLoader();\n\n            $.ajax(config)\n                .done(this.reload)\n                .fail(this.onError);\n        },\n\n        /**\n         * Success callback for dismiss request.\n         */\n        reload: function () {\n            this.source.reload({\n                refresh: true\n            });\n        },\n\n        /**\n         * Error callback for dismiss request.\n         *\n         * @param {Object} xhr\n         */\n        onError: function (xhr) {\n            this.hideLoader();\n\n            if (xhr.statusText === 'abort') {\n                return;\n            }\n\n            uiAlert({\n                content: $t('Something went wrong.')\n            });\n        }\n    });\n});\n","Magento_Backend/js/delete-with-confirm.js":"/**\n *\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'Magento_Backend/js/validate-store'\n], function ($, validateStore) {\n    'use strict';\n\n    $.widget('mage.deleteWithConfirm', validateStore, {});\n\n    return $.mage.deleteWithConfirm;\n});\n","Magento_Backend/js/media-uploader.js":"/**\n *\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\n\n/*global byteConvert*/\ndefine([\n    'jquery',\n    'mage/template',\n    'Magento_Ui/js/modal/alert',\n    'Magento_Ui/js/form/element/file-uploader',\n    'mage/translate',\n    'jquery/file-uploader'\n], function ($, mageTemplate, alert, FileUploader) {\n    'use strict';\n\n    var fileUploader = new FileUploader({\n        dataScope: '',\n        isMultipleFiles: true\n    });\n\n    fileUploader.initUploader();\n\n    $.widget('mage.mediaUploader', {\n\n        /**\n         *\n         * @private\n         */\n        _create: function () {\n            var self = this,\n                progressTmpl = mageTemplate('[data-template=\"uploader\"]'),\n                isResizeEnabled = this.options.isResizeEnabled,\n                resizeConfiguration = {\n                    action: 'resizeImage',\n                    maxWidth: this.options.maxWidth,\n                    maxHeight: this.options.maxHeight\n                };\n\n            if (!isResizeEnabled) {\n                resizeConfiguration = {\n                    action: 'resizeImage'\n                };\n            }\n\n            this.element.find('input[type=file]').fileupload({\n                dataType: 'json',\n                formData: {\n                    'form_key': window.FORM_KEY\n                },\n                dropZone: '[data-tab-panel=image-management]',\n                sequentialUploads: true,\n                acceptFileTypes: /(\\.|\\/)(gif|jpe?g|png)$/i,\n                maxFileSize: this.options.maxFileSize,\n\n                /**\n                 * @param {Object} e\n                 * @param {Object} data\n                 */\n                add: function (e, data) {\n                    var fileSize,\n                        tmpl;\n\n                    $.each(data.files, function (index, file) {\n                        fileSize = typeof file.size == 'undefined' ?\n                            $.mage.__('We could not detect a size.') :\n                            byteConvert(file.size);\n\n                        data.fileId = Math.random().toString(33).substr(2, 18);\n\n                        tmpl = progressTmpl({\n                            data: {\n                                name: file.name,\n                                size: fileSize,\n                                id: data.fileId\n                            }\n                        });\n\n                        $(tmpl).appendTo(self.element);\n                    });\n\n                    $(this).fileupload('process', data).done(function () {\n                        data.submit();\n                    });\n                },\n\n                /**\n                 * @param {Object} e\n                 * @param {Object} data\n                 */\n                done: function (e, data) {\n                    if (data.result && !data.result.error) {\n                        self.element.trigger('addItem', data.result);\n                    } else {\n                        fileUploader.aggregateError(data.files[0].name, data.result.error);\n                    }\n\n                    self.element.find('#' + data.fileId).remove();\n                },\n\n                /**\n                 * @param {Object} e\n                 * @param {Object} data\n                 */\n                progress: function (e, data) {\n                    var progress = parseInt(data.loaded / data.total * 100, 10),\n                        progressSelector = '#' + data.fileId + ' .progressbar-container .progressbar';\n\n                    self.element.find(progressSelector).css('width', progress + '%');\n                },\n\n                /**\n                 * @param {Object} e\n                 * @param {Object} data\n                 */\n                fail: function (e, data) {\n                    var progressSelector = '#' + data.fileId;\n\n                    self.element.find(progressSelector).removeClass('upload-progress').addClass('upload-failure')\n                        .delay(2000)\n                        .hide('highlight')\n                        .remove();\n                },\n\n                stop: fileUploader.uploaderConfig.stop\n            });\n\n            this.element.find('input[type=file]').fileupload('option', {\n                processQueue: [{\n                    action: 'loadImage',\n                    fileTypes: /^image\\/(gif|jpeg|png)$/\n                },\n                resizeConfiguration,\n                {\n                    action: 'saveImage'\n                }]\n            });\n        }\n    });\n\n    return $.mage.mediaUploader;\n});\n","Magento_Backend/js/save-with-confirm.js":"/**\n *\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'Magento_Backend/js/validate-store'\n], function ($, validateStore) {\n    'use strict';\n\n    $.widget('mage.saveWithConfirm', validateStore, {\n\n        /**\n         * Check is it need to show confirmation popup\n         *\n         * @returns {Boolean}\n         */\n        _needConfirm: function () {\n\n            var storeData = this.settings.storeData,\n\n            /* edit store view*/\n                storeViewEdit = $('[name=\"store[store_id]\"]').length,\n                groupId = $('[name=\"store[group_id]\"]').val(),\n                isNewStoreView = !$('[name=\"store[store_id]\"]').val(),\n\n            /* edit store */\n                storeEdit = $('[name=\"group[group_id]\"]').length,\n                storeId = $('[name=\"group[group_id]\"]').val(),\n                rootCategoryId = $('[name=\"group[root_category_id]\"]').val(),\n                defaultStoreView = $('[name=\"group[default_store_id]\"]').val(),\n\n            /* edit website */\n                websiteEdit = $('[name=\"website[website_id]\"]').length,\n                defaultStore = $('[name=\"website[default_group_id]\"]').val(),\n\n            /* conditions */\n                storeViewUpdated = storeViewEdit && (isNewStoreView || storeData['group_id'] !== groupId),\n                storeUpdated = storeEdit && storeId &&\n                    (rootCategoryId !== null  && storeData['root_category_id'] !== rootCategoryId ||\n                    defaultStoreView !== null && storeData['default_store_id'] !== defaultStoreView),\n                websiteUpdated = websiteEdit && defaultStore !== null && storeData['default_group_id'] !== defaultStore;\n\n            return storeViewUpdated || storeUpdated || websiteUpdated;\n        }\n    });\n\n    return $.mage.saveWithConfirm;\n});\n","Magento_Backend/js/store-switcher.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    /**\n     * @param {Object} storeSwitchConfig\n     */\n    return function (storeSwitchConfig) {\n        var scopeSwitcherHandler;\n\n        (function () {\n            var storesList = $('[data-role=stores-list]');\n\n            storesList.on('click', '[data-value]', function (event) {\n                var val = $(event.target).data('value'),\n                    role = $(event.target).data('role'),\n                    switcher = $('[data-role=' + role + ']');\n\n                event.preventDefault();\n\n                if (!switcher.val() || val !== switcher.val()) {\n\n                    /* Set the value & trigger event */\n                    switcher.val(val).trigger('change');\n                }\n            });\n        })($);\n\n        /**\n         * Switch store scope\n         *\n         * @param {Object} obj\n         * @return void\n         */\n        function switchScope(obj) {\n            var switcher = $(obj),\n                scopeId = switcher.val(),\n                scopeParams = '',\n                switcherParams = {};\n\n            if (scopeId) {\n                scopeParams = switcher.data('param') + '/' + scopeId + '/';\n            }\n\n            if (obj.switchParams) {\n                scopeParams += obj.switchParams;\n            }\n\n            /**\n             * Reload function for switcher\n             */\n            function reload() {\n                var url;\n\n                if (!storeSwitchConfig.isUsingIframe) {\n\n                    if (storeSwitchConfig.switchUrl && storeSwitchConfig.switchUrl.length > 0) {\n                        url = storeSwitchConfig.switchUrl + scopeParams;\n\n                        /* eslint-disable no-undef */\n                        setLocation(url);\n                    }\n\n                } else {\n                    $('#preview_selected_store').val(scopeId);\n                    $('#preview_form').trigger('submit');\n\n                    $('.store-switcher .dropdown-menu li a').each(function () {\n                        var $this = $(this);\n\n                        if ($this.data('role') === 'store-view-id' && $this.data('value') === scopeId) {\n                            $('#store-change-button').html($this.text());\n                        }\n                    });\n\n                    $('#store-change-button').trigger('click');\n                }\n            }\n\n            if (typeof scopeSwitcherHandler !== 'undefined') {\n                switcherParams = {\n                    scopeId: scopeId,\n                    scopeParams: scopeParams,\n                    useConfirm: storeSwitchConfig.useConfirm\n                };\n\n                scopeSwitcherHandler(switcherParams);\n            } else if (storeSwitchConfig.useConfirm) {\n                require([\n                    'Magento_Ui/js/modal/confirm',\n                    'mage/translate'\n                ], function (confirm, $t) {\n                    confirm({\n                        content: $t('Please confirm scope switching. All data that hasn\\'t been saved will be lost.'),\n                        actions: {\n\n                            /**\n                             * Confirm action\n                             */\n                            confirm: function () {\n                                reload();\n                            },\n\n                            /**\n                             * Cancel action\n                             */\n                            cancel: function () {\n                                obj.value = storeSwitchConfig.storeId ? storeSwitchConfig.storeId : '';\n                            }\n                        }\n                    });\n                });\n            } else {\n                reload();\n            }\n        }\n\n        window.scopeSwitcherHandler = scopeSwitcherHandler;\n        window.switchScope = switchScope;\n    };\n});\n","Magento_Backend/js/translate.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* eslint-disable strict */\ndefine([\n    'jquery',\n    'mage/mage'\n], function ($) {\n    $.extend(true, $, {\n        mage: {\n            translate: (function () {\n                /**\n                 * Key-value translations storage\n                 * @type {Object}\n                 * @private\n                 */\n                var _data = {};\n\n                /**\n                 * Add new translation (two string parameters) or several translations (object)\n                 */\n                this.add = function () {\n                    if (arguments.length > 1) {\n                        _data[arguments[0]] = arguments[1];\n                    } else if (typeof arguments[0] === 'object') {\n                        $.extend(_data, arguments[0]);\n                    }\n                };\n\n                /**\n                 * Make a translation with parsing (to handle case when _data represents tuple)\n                 * @param {String} text\n                 * @return {String}\n                 */\n                this.translate = function (text) {\n                    return typeof _data[text] === 'string' ? _data[text] : text;\n                };\n\n                return this;\n            }())\n        }\n    });\n    $.mage.__ = $.proxy($.mage.translate.translate, $.mage.translate);\n\n    return $.mage.__;\n});\n","Magento_Backend/js/validate-store.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'jquery/ui',\n    'mage/dataPost',\n    'mage/backend/validation',\n    'Magento_Ui/js/modal/confirm'\n], function ($, jqueryUi, dataPost, validation, modalConfirm) {\n    'use strict';\n\n    $.widget('mage.storeValidation', {\n\n        /**\n         * Validation creation\n         * @protected\n         */\n        _create: function () {\n            var form = this.element[0],\n                validator = $.data(form, 'validator');\n\n            if (validator && validator.settings) {\n                validator.settings.submitHandler = this._saveHandler;\n                validator.settings.confirmCallback = this._needConfirm;\n                $.extend(validator.settings, this.options);\n                $.data(form, 'validator', validator);\n            }\n        },\n\n        /**\n         * Check is it need to show confirmation popup\n         *\n         * @returns {Boolean}\n         */\n        _needConfirm: function () {\n            return true;\n        },\n\n        /**\n         * Save form with confirmation if needed\n         *\n         * @param {Object} form\n         * @private\n         */\n        _saveHandler: function (form) {\n            var formData = {},\n                requestData = {},\n                options = $.data(form, 'validator').settings;\n\n            if ($(form).validation('isValid')) {\n                $.each($(form).serializeArray(), function () {\n                    formData[this.name] = this.value || '';\n                });\n                requestData = {\n                    action: $(form).attr('action'),\n                    data: formData\n                };\n\n                if (options.confirmCallback.call(this)) {\n                    modalConfirm({\n                        title: $.mage.__('Warning message'),\n                        content: $.mage.__('This operation can take a long time'),\n                        actions: {\n                            /**\n                             * 'Confirm' action handler.\n                             */\n                            confirm: function () {\n                                $('body').trigger('processStart');\n                                dataPost().postData(requestData);\n                            }\n                        }\n                    });\n                } else {\n                    dataPost().postData(requestData);\n                }\n            }\n        }\n    });\n\n    return $.mage.storeValidation;\n});\n","Magento_Backend/js/bootstrap/editor.js":"/**\n *\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\nrequire([\n    'Magento_Variable/variables',\n    'mage/adminhtml/browser'\n]);\n","Magento_Backend/js/dashboard/chart.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/*global FORM_KEY*/\ndefine([\n    'jquery',\n    'chartJs',\n    'jquery-ui-modules/widget',\n    'chartjs/chartjs-adapter-moment',\n    'moment'\n], function ($, Chart) {\n    'use strict';\n\n    $.widget('mage.dashboardChart', {\n        options: {\n            updateUrl: '',\n            periodSelect: null,\n            periodUnits: [],\n            precision: 0,\n            type: ''\n        },\n        chart: null,\n\n        /**\n         * @private\n         */\n        _create: function () {\n            this.createChart();\n\n            if (this.options.periodSelect) {\n                $(document).on('change', this.options.periodSelect, this.refreshChartData.bind(this));\n\n                this.period = $(this.options.periodSelect).val();\n            }\n        },\n\n        /**\n         * @public\n         */\n        createChart: function () {\n            this.chart = new Chart(this.element, this.getChartSettings());\n            this.refreshChartData();\n        },\n\n        /**\n         * @public\n         */\n        refreshChartData: function () {\n            var data = {\n                'form_key': FORM_KEY\n            };\n\n            if (this.options.periodSelect) {\n                this.period = data.period = $(this.options.periodSelect).val();\n            }\n\n            $.ajax({\n                url: this.options.updateUrl,\n                showLoader: true,\n                data: data,\n                dataType: 'json',\n                type: 'POST',\n                success: this.updateChart.bind(this)\n            });\n        },\n\n        /**\n         * @public\n         * @param {Object} response\n         */\n        updateChart: function (response) {\n            $(this.element).toggle(response.data.length > 0);\n            $(this.element).next('.dashboard-diagram-nodata').toggle(response.data.length === 0);\n\n            this.chart.options.scales.xAxis.time.unit = this.options.periodUnits[this.period] ?\n                this.options.periodUnits[this.period] : 'hour';\n            this.chart.data.datasets[0].data = response.data;\n            this.chart.data.datasets[0].label = response.label;\n            this.chart.update();\n        },\n\n        /**\n         * @returns {Object} chart object configuration\n         */\n        getChartSettings: function () {\n            return {\n                type: 'bar',\n                data: {\n                    datasets: [{\n                        yAxisID: 'yAxis',\n                        xAxisID: 'xAxis',\n                        data: [],\n                        backgroundColor: '#f1d4b3',\n                        borderColor: '#eb5202',\n                        borderWidth: 1\n                    }]\n                },\n                options: {\n                    legend: {\n                        onClick: this.handleChartLegendClick,\n                        position: 'bottom'\n                    },\n                    scales: {\n                        xAxis: {\n                            offset: true,\n                            type: 'time',\n                            ticks: {\n                                source: 'data'\n                            }\n                        },\n                        yAxis: {\n                            ticks: {\n                                beginAtZero: true,\n                                precision: this.options.precision\n                            }\n                        }\n                    }\n                }\n            };\n        },\n\n        /**\n         * @public\n         */\n        handleChartLegendClick: function () {\n            // don't hide dataset on clicking into legend item\n        }\n    });\n\n    return $.mage.dashboardChart;\n});\n","Magento_Backend/js/dashboard/totals.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/*global FORM_KEY*/\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.dashboardTotals', {\n        options: {\n            updateUrl: '',\n            periodSelect: null\n        },\n        elementId: null,\n\n        /**\n         * @private\n         */\n        _create: function () {\n            this.elementId = $(this.element).attr('id');\n\n            if (this.options.periodSelect) {\n                $(document).on('change', this.options.periodSelect, $.proxy(function () {\n                    this.refreshTotals();\n                }, this));\n            }\n        },\n\n        /**\n         * @public\n         */\n        refreshTotals: function () {\n            var periodParam = '';\n\n            if (this.options.periodSelect && $(this.options.periodSelect).val()) {\n                periodParam = 'period/' + $(this.options.periodSelect).val() + '/';\n            }\n\n            $.ajax({\n                url: this.options.updateUrl + periodParam,\n                showLoader: true,\n                data: {\n                    'form_key': FORM_KEY\n                },\n                dataType: 'html',\n                type: 'POST',\n                success: $.proxy(function (response) {\n                    $('#' + this.elementId).replaceWith(response);\n                }, this)\n            });\n        }\n    });\n\n    return $.mage.dashboardTotals;\n});\n","Magento_Sales/js/bootstrap/order-create-index.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\nrequire([\n    'Magento_Sales/order/create/giftmessage'\n]);\n","Magento_Sales/js/bootstrap/order-post-action.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\nrequire([\n    'Magento_Sales/order/view/post-wrapper'\n]);\n","Magento_Sales/js/grid/tree-massactions.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'underscore',\n    'mageUtils',\n    'Magento_Ui/js/grid/tree-massactions'\n], function (_, utils, Massactions) {\n    'use strict';\n\n    return Massactions.extend({\n        /**\n         * Overwrite Default action callback.\n         * Sends selections data with ids\n         * via POST request.\n         *\n         * @param {Object} action - Action data.\n         * @param {Object} data - Selections data.\n         */\n        defaultCallback: function (action, data) {\n            var itemsType = 'selected',\n                selections = {};\n\n            selections[itemsType] = data[itemsType];\n            _.extend(selections, data.params || {});\n            utils.submit({\n                url: action.url,\n                data: selections\n            });\n        }\n    });\n});\n","Magento_Sales/order/giftoptions_tooltip.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'prototype'\n], function () {\n    'use strict';\n\n    var GiftOptionsTooltip = Class.create();\n\n    GiftOptionsTooltip.prototype = {\n        _tooltipLines: [],\n        _tooltipWindow: null,\n        _tooltipWindowContent: null,\n        _targetLinks: [],\n        _eventMouseOver: null,\n        _eventMouseOut: null,\n        _styleOptions: null,\n        _tooltipContentLoaderFunction: null,\n\n        /**\n         * Initialize tooltip object\n         */\n        initialize: function () {\n            var options = Object.extend({\n                'delta_x': 30,\n                'delta_y': 0,\n                zindex: 1000\n            });\n\n            this._styleOptions = options;\n            this._eventMouseOver = this.showTooltip.bindAsEventListener(this);\n            this._eventMouseOut = this.hideTooltip.bindAsEventListener(this);\n        },\n\n        /**\n         * Set gift options tooltip window\n         *\n         * @param {String} windowId\n         * @param {String} contentId\n         *\n         * @return boolean success\n         */\n        setTooltipWindow: function (windowId, contentId) {\n            if (!$(windowId) || !$(contentId)) {\n                return false;\n            }\n            this._tooltipWindow = $(windowId);\n            this._tooltipWindowContent = $(contentId);\n            $(document.body).insert({\n                bottom: this._tooltipWindow\n            });\n            this.hideTooltip();\n\n            return true;\n        },\n\n        /**\n         * Add tooltip to specified link\n         *\n         * @param {String} linkId\n         * @param {String} itemId - identifier of the item related to link\n         *\n         * @return boolean success\n         */\n        addTargetLink: function (linkId, itemId) {\n            if ($(linkId)) {\n                this._targetLinks[linkId] = [];\n                this._targetLinks[linkId].object = $(linkId);\n                this._targetLinks[linkId].itemId = itemId;\n                this._registerEvents(this._targetLinks[linkId].object);\n\n                return true;\n            }\n\n            return false;\n        },\n\n        /**\n         * Detach event listeners from target links when tooltip is destroyed\n         */\n        destroy: function () {\n            var linkId;\n\n            for (linkId in this._targetLinks) { //eslint-disable-line guard-for-in\n                Event.stopObserving(this._targetLinks[linkId].object, 'mouseover', this._eventMouseOver);\n                Event.stopObserving(this._targetLinks[linkId].object, 'mouseout', this._eventMouseOut);\n            }\n        },\n\n        /**\n         *  Register event listeners\n         *\n         *  @param {HTMLElement} element\n         */\n        _registerEvents: function (element) {\n            Event.observe(element, 'mouseover', this._eventMouseOver);\n            Event.observe(element, 'mouseout', this._eventMouseOut);\n        },\n\n        /**\n         * Move tooltip to mouse position\n         *\n         * @param {Prototype.Event} event\n         */\n        _moveTooltip: function (event) {\n            var mouseX, mouseY;\n\n            Event.stop(event);\n            mouseX = Event.pointerX(event);\n            mouseY = Event.pointerY(event);\n\n            this.setStyles(mouseX, mouseY);\n        },\n\n        /**\n         * Show tooltip\n         *\n         * @param {Object} event\n         *\n         * @return boolean success\n         */\n        showTooltip: function (event) {\n            var link, itemId, tooltipContent;\n\n            Event.stop(event);\n\n            if (this._tooltipWindow) {\n                link = Event.element(event);\n                itemId = this._targetLinks[link.id].itemId;\n                tooltipContent = '';\n\n                if (Object.isFunction(this._tooltipContentLoaderFunction)) {\n                    tooltipContent = this._tooltipContentLoaderFunction(itemId);\n                }\n\n                if (tooltipContent != '') { //eslint-disable-line eqeqeq\n                    this._updateTooltipWindowContent(tooltipContent);\n                    this._moveTooltip(event);\n                    new Element.show(this._tooltipWindow);\n\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        /**\n         * Set tooltip window styles\n         *\n         * @param {Number} x\n         * @param {Number} y\n         */\n        setStyles: function (x, y) {\n            Element.setStyle(this._tooltipWindow, {\n                position: 'absolute',\n                top: y + this._styleOptions['delta_y'] + 'px',\n                left: x + this._styleOptions['delta_x'] + 'px',\n                zindex: this._styleOptions.zindex\n            });\n        },\n\n        /**\n         * Hide tooltip\n         */\n        hideTooltip: function () {\n            if (this._tooltipWindow) {\n                new Element.hide(this._tooltipWindow);\n            }\n        },\n\n        /**\n         * Set gift options tooltip content loader function\n         * This function should accept at least one parameter that will serve as an item ID\n         *\n         * @param {Function} loaderFunction - loader function\n         */\n        setTooltipContentLoaderFunction: function (loaderFunction) {\n            this._tooltipContentLoaderFunction = loaderFunction;\n        },\n\n        /**\n         * Update tooltip window content\n         *\n         * @param {String} content\n         */\n        _updateTooltipWindowContent: function (content) {\n            this._tooltipWindowContent.update(content);\n        }\n    };\n\n    window.giftOptionsTooltip = new GiftOptionsTooltip();\n});\n","Magento_Sales/order/create/form.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* global AdminOrder */\ndefine([\n    'jquery',\n    'Magento_Sales/order/create/scripts'\n], function (jQuery) {\n    'use strict';\n\n    var $el = jQuery('#edit_form'),\n        config,\n        baseUrl,\n        order,\n        payment;\n\n    if (!$el.length || !$el.data('order-config')) {\n        return;\n    }\n\n    config = $el.data('order-config');\n    baseUrl = $el.data('load-base-url');\n\n    order = new AdminOrder(config);\n    order.setLoadBaseUrl(baseUrl);\n\n    payment = {\n        switchMethod: order.switchPaymentMethod.bind(order)\n    };\n\n    window.order = order;\n    window.payment = payment;\n});\n","Magento_Sales/order/create/giftmessage.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/********************* GIFT OPTIONS POPUP ***********************/\n/********************* GIFT OPTIONS SET ***********************/\n\ndefine([\n    'jquery',\n    'jquery/ui',\n    'mage/translate',\n    'mage/validation',\n    'prototype'\n], function (jQuery) {\n\n    window.giftMessagesController = {\n        toogleRequired: function (source, objects) {\n            if (!$(source).value.blank()) {\n                objects.each(function (item) {\n                    $(item).addClassName('required-entry');\n                    var label = findFieldLabel($(item));\n\n                    if (label) {\n                        var span = label.down('span');\n\n                        if (!span) {\n                            Element.insert(label, {\n                                bottom: '&nbsp;<span class=\"required\">*</span>'\n                            });\n                        }\n                    }\n                });\n            } else {\n                objects.each(function (item) {\n                    if ($(source).formObj && $(source).formObj.validator) {\n                        $(source).formObj.validator.reset(item);\n                    }\n                    $(item).removeClassName('required-entry');\n                    var label = findFieldLabel($(item));\n\n                    if (label) {\n                        var span = label.down('span');\n\n                        if (span) {\n                            Element.remove(span);\n                        }\n                    }\n                    // Hide validation advices if exist\n                    if ($(item) && $(item).advices) {\n                        $(item).advices.each(function (pair) {\n                            if (pair.value != null) pair.value.hide();\n                        });\n                    }\n                });\n            }\n        },\n        toogleGiftMessage: function (container) {\n            if (!$(container).toogleGiftMessage) {\n                $(container).toogleGiftMessage = true;\n                $(this.getFieldId(container, 'edit')).show();\n                $(container).down('.action-link').addClassName('open');\n                $(container).down('.default-text').hide();\n                $(container).down('.close-text').show();\n            } else {\n                $(container).toogleGiftMessage = false;\n                $(this.getFieldId(container, 'message')).formObj = $(this.getFieldId(container, 'form'));\n                var form = jQuery('#' + this.getFieldId(container, 'form'));\n\n                jQuery('#' + this.getFieldId(container, 'form')).validate({\n                    errorClass: 'mage-error'\n                });\n\n                if (!form.valid()) {\n                    return false;\n                }\n\n                new Ajax.Request($(this.getFieldId(container, 'form')).action, {\n                    parameters: Form.serialize($(this.getFieldId(container, 'form')), true),\n                    loaderArea: container,\n                    onComplete: function (transport) {\n\n                        $(container).down('.action-link').removeClassName('open');\n                        $(container).down('.default-text').show();\n                        $(container).down('.close-text').hide();\n                        $(this.getFieldId(container, 'edit')).hide();\n\n                        if (transport.responseText.match(/YES/g)) {\n                            $(container).down('.default-text').down('.edit').show();\n                            $(container).down('.default-text').down('.add').hide();\n                        } else {\n                            $(container).down('.default-text').down('.add').show();\n                            $(container).down('.default-text').down('.edit').hide();\n                        }\n\n                    }.bind(this)\n                });\n            }\n\n            return false;\n        },\n        saveGiftMessage: function (container) {\n            $(this.getFieldId(container, 'message')).formObj = $(this.getFieldId(container, 'form'));\n\n            var form = jQuery('#' + this.getFieldId(container, 'form'));\n\n            form.validate({\n                errorClass: 'mage-error'\n            });\n\n            if (!form.valid()) {\n                return;\n            }\n\n            new Ajax.Request($(this.getFieldId(container, 'form')).action, {\n                parameters: Form.serialize($(this.getFieldId(container, 'form')), true),\n                loaderArea: container,\n                onSuccess: function (response) {\n                    var message = '<div class=\"messages\"><div class=\"message message-success success\">' +\n                        response.responseText +\n                        '<div data-ui-id=\"messages-message-success\"></div></div></div>';\n\n                    jQuery('#messages').html(message);\n                    jQuery(document).scrollTop(0);\n                }\n            });\n        },\n        getFieldId: function (container, name) {\n            return container + '_' + name;\n        }\n    };\n\n    function findFieldLabel(field) {\n        var tdField = $(field).up('td');\n\n        if (tdField) {\n            var tdLabel = tdField.previous('td');\n\n            if (tdLabel) {\n                var label = tdLabel.down('label');\n\n                if (label) {\n                    return label;\n                }\n            }\n        }\n\n        return false;\n    }\n\n    window.findFieldLabel = findFieldLabel;\n\n    window.GiftOptionsPopup = Class.create();\n    GiftOptionsPopup.prototype = {\n        //giftOptionsWindowMask: null,\n        giftOptionsWindow: null,\n\n        initialize: function () {\n            $$('.action-link').each(function (el) {\n                Event.observe(el, 'click', this.showItemGiftOptions.bind(this));\n            }, this);\n\n            // Move gift options popup to start of body, because soon it will contain FORM tag that can break DOM layout if within other FORM\n            var oldPopupContainer = $('gift_options_configure');\n\n            if (oldPopupContainer) {\n                oldPopupContainer.remove();\n            }\n\n            var newPopupContainer = $('gift_options_configure_new');\n\n            $(document.body).insert({\n                top: newPopupContainer\n            });\n            newPopupContainer.id = 'gift_options_configure';\n\n            // Put controls container inside a FORM tag so we can use Validator\n            var form = new Element('form', {\n                action: '#', id: 'gift_options_configuration_form', method: 'post'\n            });\n            var formContents = $('gift_options_form_contents');\n\n            if (formContents) {\n                formContents.parentNode.appendChild(form);\n                form.appendChild(formContents);\n            }\n\n            this.giftOptionsWindow = $('gift_options_configure');\n\n            jQuery(this.giftOptionsWindow).dialog({\n                autoOpen:   false,\n                modal:      true,\n                resizable:  false,\n                dialogClass: 'gift-options-popup',\n                minWidth:   500,\n                width:      '75%',\n                position: {\n                    my: 'left+12.5% top',\n                    at: 'center top',\n                    of: 'body'\n                },\n                open: function () {\n                    jQuery(this).closest('.ui-dialog').addClass('ui-dialog-active');\n\n                    var topMargin = jQuery(this).closest('.ui-dialog').children('.ui-dialog-titlebar').outerHeight() + 30;\n\n                    jQuery(this).closest('.ui-dialog').css({\n                        'margin-top' : topMargin,\n                        'z-index': 1000\n                    });\n                    jQuery(this).closest('.ui-dialog').nextAll('.ui-widget-overlay').css('z-index', 999);\n                },\n                close: function () {\n                    jQuery(this).closest('.ui-dialog').removeClass('ui-dialog-active');\n                }\n            });\n        },\n\n        showItemGiftOptions: function (event) {\n            var element = Event.element(event).id;\n            var itemId = element.sub('gift_options_link_', '');\n\n            jQuery(this.giftOptionsWindow).dialog('open');\n\n            this.setTitle(itemId);\n\n            Event.observe($('gift_options_cancel_button'), 'click', this.onCloseButton.bind(this));\n            Event.observe($('gift_options_ok_button'), 'click', this.onOkButton.bind(this));\n            Event.stop(event);\n        },\n\n        setTitle: function (itemId) {\n            var productTitleElement = $('order_item_' + itemId + '_title');\n            var productTitle = '';\n\n            if (productTitleElement) {\n                productTitle = productTitleElement.innerHTML;\n            }\n            jQuery(this.giftOptionsWindow).dialog({\n                title: jQuery.mage.__('Gift Options for ') + productTitle\n            });\n        },\n\n        onOkButton: function () {\n            var giftOptionsForm = jQuery('#gift_options_configuration_form');\n\n            if (!giftOptionsForm.validate({\n                errorClass: 'mage-error'\n            }).valid()) {\n                return false;\n            }\n\n            if (typeof (giftOptionsForm[0].reset) === 'function') {\n                giftOptionsForm[0].reset();\n            }\n            this.closeWindow();\n\n            return true;\n        },\n\n        onCloseButton: function () {\n            this.closeWindow();\n        },\n\n        closeWindow: function () {\n            jQuery(this.giftOptionsWindow).dialog('close');\n        }\n    };\n\n    window.GiftMessageSet = Class.create();\n\n    GiftMessageSet.prototype = {\n        destPrefix: 'current_item_giftmessage_',\n        sourcePrefix: 'giftmessage_',\n        fields: ['sender', 'recipient', 'message'],\n        isObserved: false,\n        callback: null,\n\n        initialize: function () {\n            $$('.action-link').each(function (el) {\n                Event.observe(el, 'click', this.setData.bind(this));\n            }, this);\n        },\n\n        setData: function (event) {\n            var element = Event.element(event).id;\n\n            this.id = element.sub('gift_options_link_', '');\n\n            if ($('gift-message-form-data-' + this.id)) {\n                this.fields.each(function (el) {\n                    if ($(this.sourcePrefix + this.id + '_' + el) && $(this.destPrefix + el)) {\n                        $(this.destPrefix + el).value = $(this.sourcePrefix + this.id + '_' + el).value;\n                    }\n                }, this);\n                $('gift_options_giftmessage').show();\n            } else if ($('gift_options_giftmessage')) {\n                $('gift_options_giftmessage').hide();\n            }\n\n            if (!this.isObserved) {\n                Event.observe('gift_options_ok_button', 'click', this.saveData.bind(this));\n                this.isObserved = true;\n            }\n        },\n\n        prepareSaveData: function () {\n            var hash = $H();\n\n            $$('div[id^=gift_options_data_]').each(function (el) {\n                var fields = el.select('input', 'select', 'textarea');\n                var data = Form.serializeElements(fields, true);\n\n                hash.update(data);\n            });\n\n            return hash;\n        },\n\n        setSaveCallback: function (callback) {\n            if (typeof callback == 'function') {\n                this.callback = callback;\n            }\n        },\n\n        saveData: function (event) {\n            this.fields.each(function (el) {\n                if ($(this.sourcePrefix + this.id + '_' + el) && $(this.destPrefix + el)) {\n                    $(this.sourcePrefix + this.id + '_' + el).value = $(this.destPrefix + el).value;\n                }\n            }, this);\n\n            if ($(this.sourcePrefix + this.id + '_form')) {\n                $(this.sourcePrefix + this.id + '_form').request();\n            } else if (typeof order != 'undefined') {\n                var data = this.prepareSaveData();\n                var self = this;\n\n                jQuery.when(order.loadArea(['items'], true, data.toObject())).done(function () {\n                    if (self.callback !== null) {\n                        self.callback();\n                    }\n                });\n            }\n        }\n    };\n\n});\n","Magento_Sales/order/create/scripts.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Ui/js/modal/confirm',\n    'Magento_Ui/js/modal/alert',\n    'mage/template',\n    'text!Magento_Sales/templates/order/create/shipping/reload.html',\n    'text!Magento_Sales/templates/order/create/payment/reload.html',\n    'mage/translate',\n    'prototype',\n    'Magento_Catalog/catalog/product/composite/configure',\n    'Magento_Ui/js/lib/view/utils/async'\n], function (jQuery, confirm, alert, template, shippingTemplate, paymentTemplate) {\n\n    window.AdminOrder = new Class.create();\n\n    AdminOrder.prototype = {\n        initialize: function (data) {\n            if (!data) data = {};\n            this.loadBaseUrl = false;\n            this.customerId = data.customer_id ? data.customer_id : false;\n            this.storeId = data.store_id ? data.store_id : false;\n            this.quoteId = data['quote_id'] ? data['quote_id'] : false;\n            this.currencyId = false;\n            this.currencySymbol = data.currency_symbol ? data.currency_symbol : '';\n            this.addresses = data.addresses ? data.addresses : $H({});\n            this.shippingAsBilling = data.shippingAsBilling ? data.shippingAsBilling : false;\n            this.gridProducts = $H({});\n            this.gridProductsGift = $H({});\n            this.billingAddressContainer = '';\n            this.shippingAddressContainer = '';\n            this.isShippingMethodReseted = data.shipping_method_reseted ? data.shipping_method_reseted : false;\n            this.overlayData = $H({});\n            this.giftMessageDataChanged = false;\n            this.productConfigureAddFields = {};\n            this.productPriceBase = {};\n            this.collectElementsValue = true;\n            this.isOnlyVirtualProduct = false;\n            this.excludedPaymentMethods = [];\n            this.summarizePrice = true;\n            this.selectAddressEvent = false;\n            this.shippingTemplate = template(shippingTemplate, {\n                data: {\n                    title: jQuery.mage.__('Shipping Method'),\n                    linkText: jQuery.mage.__('Get shipping methods and rates')\n                }\n            });\n            this.paymentTemplate = template(paymentTemplate, {\n                data: {\n                    title: jQuery.mage.__('Payment Method'),\n                    linkText: jQuery.mage.__('Get available payment methods')\n                }\n            });\n\n            jQuery.async('#order-items', (function () {\n                this.dataArea = new OrderFormArea('data', $(this.getAreaId('data')), this);\n                this.itemsArea = Object.extend(new OrderFormArea('items', $(this.getAreaId('items')), this), {\n                    addControlButton: function (button) {\n                        var controlButtonArea = $(this.node).select('.actions')[0];\n                        if (typeof controlButtonArea != 'undefined') {\n                            var buttons = controlButtonArea.childElements();\n                            for (var i = 0; i < buttons.length; i++) {\n                                if (buttons[i].innerHTML.include(button.getLabel())) {\n                                    return;\n                                }\n                            }\n                            button.insertIn(controlButtonArea, 'top');\n                        }\n                    }\n                });\n\n                var searchButtonId = 'add_products',\n                    searchButton = new ControlButton(jQuery.mage.__('Add Products'), searchButtonId),\n                    searchAreaId = this.getAreaId('search');\n                searchButton.onClick = function () {\n                    $(searchAreaId).show();\n                    var el = this;\n                    window.setTimeout(function () {\n                        el.remove();\n                    }, 10);\n                };\n\n                jQuery.async('#order-items .admin__page-section-title', (function () {\n                    this.dataArea.onLoad = this.dataArea.onLoad.wrap(function (proceed) {\n                        proceed();\n                        this._parent.itemsArea.setNode($(this._parent.getAreaId('items')));\n                        this._parent.itemsArea.onLoad();\n                    });\n\n                    this.itemsArea.onLoad = this.itemsArea.onLoad.wrap(function (proceed) {\n                        proceed();\n                        if ($(searchAreaId) && !jQuery('#' + searchAreaId).is(':visible') && !$(searchButtonId)) {\n                            this.addControlButton(searchButton);\n                        }\n                    });\n                    this.areasLoaded();\n                    this.itemsArea.onLoad();\n\n                }).bind(this));\n\n            }).bind(this));\n\n            jQuery('#edit_form')\n                .on('submitOrder', function () {\n                    jQuery(this).trigger('realOrder');\n                })\n                .on('realOrder', this._realSubmit.bind(this));\n        },\n\n        areasLoaded: function () {\n        },\n\n        itemsLoaded: function () {\n        },\n\n        dataLoaded: function () {\n            this.dataShow();\n        },\n\n        setLoadBaseUrl: function (url) {\n            this.loadBaseUrl = url;\n        },\n\n        setAddresses: function (addresses) {\n            this.addresses = addresses;\n        },\n\n        addExcludedPaymentMethod: function (method) {\n            this.excludedPaymentMethods.push(method);\n        },\n\n        setCustomerId: function (id) {\n            this.customerId = id;\n            this.loadArea('header', true);\n            $(this.getAreaId('header')).callback = 'setCustomerAfter';\n            $('back_order_top_button').hide();\n            $('reset_order_top_button').show();\n        },\n\n        setCustomerAfter: function () {\n            this.customerSelectorHide();\n            if (this.storeId) {\n                $(this.getAreaId('data')).callback = 'dataLoaded';\n                this.loadArea(['data'], true);\n            } else {\n                this.storeSelectorShow();\n            }\n        },\n\n        setStoreId: function (id) {\n            this.storeId = id;\n            this.storeSelectorHide();\n            this.sidebarShow();\n            //this.loadArea(['header', 'sidebar','data'], true);\n            this.dataShow();\n            this.loadArea(['header', 'data'], true);\n        },\n\n        setCurrencyId: function (id) {\n            this.currencyId = id;\n            //this.loadArea(['sidebar', 'data'], true);\n            this.loadArea(['data'], true);\n        },\n\n        setCurrencySymbol: function (symbol) {\n            this.currencySymbol = symbol;\n        },\n\n        selectAddress: function (el, container) {\n            var id = el.value;\n            if (id.length == 0) {\n                id = '0';\n            }\n\n            this.selectAddressEvent = true;\n            if (this.addresses[id]) {\n                this.fillAddressFields(container, this.addresses[id]);\n            } else {\n                this.fillAddressFields(container, {});\n            }\n            this.selectAddressEvent = false;\n\n            var data = this.serializeData(container);\n            data[el.name] = id;\n\n            this.resetPaymentMethod();\n            if (this.isShippingField(container) && !this.isShippingMethodReseted) {\n                this.resetShippingMethod(data);\n            } else {\n                this.saveData(data);\n            }\n        },\n\n        /**\n         * Checks if the field belongs to the shipping address.\n         *\n         * @param {String} fieldId\n         * @return {Boolean}\n         */\n        isShippingField: function (fieldId) {\n            if (this.shippingAsBilling) {\n                return fieldId.include('billing');\n            }\n\n            return fieldId.include('shipping');\n        },\n\n        /**\n         * Checks if the field belongs to the billing address.\n         *\n         * @param {String} fieldId\n         * @return {Boolean}\n         */\n        isBillingField: function (fieldId) {\n            return fieldId.include('billing');\n        },\n\n        /**\n         * Binds events on container form fields.\n         *\n         * @param {String} container\n         */\n        bindAddressFields: function (container) {\n            var fields = $(container).select('input', 'select', 'textarea'),\n                i;\n\n            for (i = 0; i < fields.length; i++) {\n                jQuery(fields[i]).change(this.changeAddressField.bind(this));\n            }\n        },\n\n        /**\n         * Triggers on each form's element changes.\n         *\n         * @param {Event} event\n         */\n        changeAddressField: function (event) {\n            var field = Event.element(event),\n                re = /[^\\[]*\\[([^\\]]*)_address\\]\\[([^\\]]*)\\](\\[(\\d)\\])?/,\n                matchRes = field.name.match(re),\n                type,\n                name,\n                data,\n                resetShipping = false;\n\n            if (!matchRes) {\n                return;\n            }\n\n            type = matchRes[1];\n            name = matchRes[2];\n\n            if (this.isBillingField(field.id)) {\n                data = this.serializeData(this.billingAddressContainer);\n            } else {\n                data = this.serializeData(this.shippingAddressContainer);\n            }\n            data = data.toObject();\n\n            if (type === 'billing' && this.shippingAsBilling) {\n                this.syncAddressField(this.shippingAddressContainer, field.name, field);\n                resetShipping = true;\n            }\n\n            if (type === 'shipping' && !this.shippingAsBilling) {\n                resetShipping = true;\n            }\n\n            if (resetShipping) {\n                data['reset_shipping'] = true;\n            }\n\n            if (name !== 'customer_address_id' && this.selectAddressEvent === false) {\n                if (this.shippingAsBilling) {\n                    $('order-shipping_address_customer_address_id').value = '';\n                }\n\n                $('order-' + type + '_address_customer_address_id').value = '';\n            }\n\n            data['order[' + type + '_address][customer_address_id]'] = null;\n            data['shipping_as_billing'] = +this.shippingAsBilling;\n\n            if (name === 'customer_address_id') {\n                data['order[' + type + '_address][customer_address_id]'] =\n                    $('order-' + type + '_address_customer_address_id').value;\n            }\n\n            if (name === 'country_id' && this.selectAddressEvent === false) {\n                $('order-' + type + '_address_customer_address_id').value = '';\n            }\n\n            this.resetPaymentMethod();\n\n            if (data['reset_shipping']) {\n                this.resetShippingMethod();\n            } else {\n                this.saveData(data);\n\n                if (name === 'country_id' || name === 'customer_address_id') {\n                    this.loadArea(['shipping_method', 'billing_method', 'totals', 'items'], true, data);\n                }\n            }\n        },\n\n        /**\n         * Set address container form field value.\n         *\n         * @param {String} container - container ID\n         * @param {String} fieldName - form field name\n         * @param {*} fieldValue - form field value\n         */\n        syncAddressField: function (container, fieldName, fieldValue) {\n            var syncName;\n\n            if (this.isBillingField(fieldName)) {\n                syncName = fieldName.replace('billing', 'shipping');\n            }\n\n            $(container).select('[name=\"' + syncName + '\"]').each(function (element) {\n                if (~['input', 'textarea', 'select'].indexOf(element.tagName.toLowerCase())) {\n                    if (element.type === \"checkbox\") {\n                        element.checked = fieldValue.checked;\n                    } else {\n                        element.value = fieldValue.value;\n                    }\n                }\n            });\n        },\n\n        fillAddressFields: function (container, data) {\n            var regionIdElem = false;\n            var regionIdElemValue = false;\n\n            var fields = $(container).select('input', 'select', 'textarea');\n            var re = /[^\\[]*\\[[^\\]]*\\]\\[([^\\]]*)\\](\\[(\\d)\\])?/;\n            for (var i = 0; i < fields.length; i++) {\n                // skip input type file @Security error code: 1000\n                if (fields[i].tagName.toLowerCase() == 'input' && fields[i].type.toLowerCase() == 'file') {\n                    continue;\n                }\n                var matchRes = fields[i].name.match(re);\n                if (matchRes === null) {\n                    continue;\n                }\n                var name = matchRes[1];\n                var index = matchRes[3];\n\n                if (index) {\n                    // multiply line\n                    if (data[name]) {\n                        var values = data[name].split(\"\\n\");\n                        fields[i].value = values[index] ? values[index] : '';\n                    } else {\n                        fields[i].value = '';\n                    }\n                } else if (fields[i].tagName.toLowerCase() == 'select' && fields[i].multiple) {\n                    // multiselect\n                    if (data[name]) {\n                        values = [''];\n                        if (Object.isString(data[name])) {\n                            values = data[name].split(',');\n                        } else if (Object.isArray(data[name])) {\n                            values = data[name];\n                        }\n                        fields[i].setValue(values);\n                    }\n                } else {\n                    fields[i].setValue(data[name] ? data[name] : '');\n                }\n\n                if (fields[i].changeUpdater) {\n                    fields[i].changeUpdater();\n                }\n\n                if (name == 'region' && data['region_id'] && !data['region']) {\n                    fields[i].value = data['region_id'];\n                }\n\n                jQuery(fields[i]).trigger('change');\n            }\n        },\n\n        disableShippingAddress: function (flag) {\n            this.shippingAsBilling = flag;\n            if ($('order-shipping_address_customer_address_id')) {\n                $('order-shipping_address_customer_address_id').disabled = flag;\n            }\n            if ($(this.shippingAddressContainer)) {\n                var dataFields = $(this.shippingAddressContainer).select('input', 'select', 'textarea');\n                for (var i = 0; i < dataFields.length; i++) {\n                    dataFields[i].disabled = flag;\n\n                    if (this.isOnlyVirtualProduct) {\n                        dataFields[i].setValue('');\n                    }\n                }\n                var buttons = $(this.shippingAddressContainer).select('button');\n                // Add corresponding class to buttons while disabling them\n                for (i = 0; i < buttons.length; i++) {\n                    buttons[i].disabled = flag;\n                    if (flag) {\n                        buttons[i].addClassName('disabled');\n                    } else {\n                        buttons[i].removeClassName('disabled');\n                    }\n                }\n            }\n        },\n\n        /**\n         * Equals shipping and billing addresses.\n         *\n         * @param {Boolean} flag\n         */\n        setShippingAsBilling: function (flag) {\n            var data,\n                areasToLoad = ['billing_method', 'shipping_address', 'shipping_method', 'totals', 'giftmessage'];\n\n            this.disableShippingAddress(flag);\n            data = this.serializeData(flag ? this.billingAddressContainer : this.shippingAddressContainer);\n            data = data.toObject();\n            data['shipping_as_billing'] = flag ? 1 : 0;\n            data['reset_shipping'] = 1;\n            // set customer_address_id to null for shipping address in order to treat it as new from backend\n            // Checkbox(Same As Billing Address) uncheck event\n            data['order[shipping_address][customer_address_id]'] = null;\n            this.loadArea(areasToLoad, true, data);\n        },\n\n        /**\n         * Replace shipping method area.\n         */\n        resetShippingMethod: function () {\n            if (!this.isOnlyVirtualProduct) {\n                $(this.getAreaId('shipping_method')).update(this.shippingTemplate);\n            }\n        },\n\n        /**\n         * Replace payment method area.\n         */\n        resetPaymentMethod: function () {\n            $(this.getAreaId('billing_method')).update(this.paymentTemplate);\n        },\n\n        /**\n         * Loads shipping options according to address data.\n         *\n         * @return {Boolean}\n         */\n        loadShippingRates: function () {\n            var addressContainer = this.shippingAsBilling ?\n                'billingAddressContainer' :\n                'shippingAddressContainer',\n                data = this.serializeData(this[addressContainer]).toObject();\n\n            data['collect_shipping_rates'] = 1;\n            this.isShippingMethodReseted = false;\n            this.loadArea(['shipping_method', 'totals'], true, data);\n\n            return false;\n        },\n\n        setShippingMethod: function (method) {\n            var data = {};\n\n            data['order[shipping_method]'] = method;\n            this.loadArea([\n                'shipping_method',\n                'totals',\n                'billing_method'\n            ], true, data);\n        },\n\n        /**\n         * Updates available payment\n         * methods list according to order data.\n         *\n         * @return boolean\n         */\n        loadPaymentMethods: function () {\n            var data = this.serializeData(this.billingAddressContainer).toObject();\n\n            this.loadArea(['billing_method', 'totals'], true, data);\n\n            return false;\n        },\n\n        switchPaymentMethod: function(method){\n            if (this.paymentMethod !== method) {\n                jQuery('#edit_form')\n                    .off('submitOrder')\n                    .on('submitOrder', function(){\n                        jQuery(this).trigger('realOrder');\n                    });\n            }\n            jQuery('#edit_form').trigger('changePaymentMethod', [method]);\n            this.setPaymentMethod(method);\n            var data = {};\n            data['order[payment_method]'] = method;\n            this.loadArea(['card_validation'], true, data);\n        },\n\n        setPaymentMethod: function (method) {\n            if (this.paymentMethod && $('payment_form_' + this.paymentMethod)) {\n                var form = 'payment_form_' + this.paymentMethod;\n                [form + '_before', form, form + '_after'].each(function (el) {\n                    var block = $(el);\n                    if (block) {\n                        block.hide();\n                        block.select('input', 'select', 'textarea').each(function (field) {\n                            field.disabled = true;\n                        });\n                    }\n                });\n            }\n\n            if (!this.paymentMethod || method) {\n                $('order-billing_method_form').select('input', 'select', 'textarea').each(function (elem) {\n                    if (elem.type != 'radio') elem.disabled = true;\n                })\n            }\n\n            if ($('payment_form_' + method)) {\n                jQuery('#' + this.getAreaId('billing_method')).trigger('contentUpdated');\n                this.paymentMethod = method;\n                var form = 'payment_form_' + method;\n                [form + '_before', form, form + '_after'].each(function (el) {\n                    var block = $(el);\n                    if (block) {\n                        block.show();\n                        block.select('input', 'select', 'textarea').each(function (field) {\n                            field.disabled = false;\n                            if (!el.include('_before') && !el.include('_after') && !field.bindChange) {\n                                field.bindChange = true;\n                                field.paymentContainer = form;\n                                field.method = method;\n                                field.observe('change', this.changePaymentData.bind(this))\n                            }\n                        }, this);\n                    }\n                }, this);\n            }\n        },\n\n        changePaymentData: function (event) {\n            var elem = Event.element(event);\n            if (elem && elem.method) {\n                var data = this.getPaymentData(elem.method);\n                if (data) {\n                    this.loadArea(['card_validation'], true, data);\n                } else {\n                    return;\n                }\n            }\n        },\n\n        getPaymentData: function (currentMethod) {\n            if (typeof (currentMethod) == 'undefined') {\n                if (this.paymentMethod) {\n                    currentMethod = this.paymentMethod;\n                } else {\n                    return false;\n                }\n            }\n            if (this.isPaymentValidationAvailable() == false) {\n                return false;\n            }\n            var data = {};\n            var fields = $('payment_form_' + currentMethod).select('input', 'select');\n            for (var i = 0; i < fields.length; i++) {\n                data[fields[i].name] = fields[i].getValue();\n            }\n            if ((typeof data['payment[cc_type]']) != 'undefined' && (!data['payment[cc_type]'] || !data['payment[cc_number]'])) {\n                return false;\n            }\n            return data;\n        },\n\n        applyCoupon: function (code) {\n            this.loadArea(['items', 'shipping_method', 'totals', 'billing_method'], true, {\n                'order[coupon][code]': code,\n                reset_shipping: 0\n            });\n            this.orderItemChanged = false;\n            jQuery('html, body').animate({\n                scrollTop: 0\n            });\n        },\n\n        addProduct: function (id) {\n            this.loadArea(['items', 'shipping_method', 'totals', 'billing_method'], true, {\n                add_product: id,\n                reset_shipping: true\n            });\n        },\n\n        removeQuoteItem: function (id) {\n            this.loadArea(['items', 'shipping_method', 'totals', 'billing_method'], true,\n                {remove_item: id, from: 'quote', reset_shipping: true});\n        },\n\n        moveQuoteItem: function (id, to) {\n            this.loadArea(['sidebar_' + to, 'items', 'shipping_method', 'totals', 'billing_method'], this.getAreaId('items'),\n                {move_item: id, to: to, reset_shipping: true});\n        },\n\n        productGridShow: function (buttonElement) {\n            this.productGridShowButton = buttonElement;\n            Element.hide(buttonElement);\n            this.showArea('search');\n        },\n\n        productGridRowInit: function (grid, row) {\n            var checkbox = $(row).select('.checkbox')[0];\n            var inputs = $(row).select('.input-text');\n            if (checkbox && inputs.length > 0) {\n                checkbox.inputElements = inputs;\n                for (var i = 0; i < inputs.length; i++) {\n                    var input = inputs[i];\n                    input.checkboxElement = checkbox;\n\n                    var product = this.gridProducts.get(checkbox.value);\n                    if (product) {\n                        var defaultValue = product[input.name];\n                        if (defaultValue) {\n                            if (input.name == 'giftmessage') {\n                                input.checked = true;\n                            } else {\n                                input.value = defaultValue;\n                            }\n                        }\n                    }\n\n                    input.disabled = !checkbox.checked || input.hasClassName('input-inactive');\n\n                    Event.observe(input, 'keyup', this.productGridRowInputChange.bind(this));\n                    Event.observe(input, 'change', this.productGridRowInputChange.bind(this));\n                }\n            }\n        },\n\n        productGridRowInputChange: function (event) {\n            var element = Event.element(event);\n            if (element && element.checkboxElement && element.checkboxElement.checked) {\n                if (element.name != 'giftmessage' || element.checked) {\n                    this.gridProducts.get(element.checkboxElement.value)[element.name] = element.value;\n                } else if (element.name == 'giftmessage' && this.gridProducts.get(element.checkboxElement.value)[element.name]) {\n                    delete (this.gridProducts.get(element.checkboxElement.value)[element.name]);\n                }\n            }\n        },\n\n        productGridRowClick: function (grid, event) {\n            var trElement = Event.findElement(event, 'tr');\n            var qtyElement = trElement.select('input[name=\"qty\"]')[0];\n            var eventElement = Event.element(event);\n\n            if (eventElement.tagName === 'LABEL'\n                && trElement.querySelector('#' + eventElement.htmlFor)\n                && trElement.querySelector('#' + eventElement.htmlFor).type === 'checkbox'\n            ) {\n                event.stopPropagation();\n                trElement.querySelector('#' + eventElement.htmlFor).trigger('click');\n                return;\n            }\n\n            var isInputCheckbox = (eventElement.tagName === 'INPUT' && eventElement.type === 'checkbox');\n            var isInputQty = grid.targetElement && grid.targetElement.tagName === 'INPUT' && grid.targetElement.name === 'qty';\n            if (trElement && !isInputQty) {\n                var checkbox = Element.select(trElement, 'input[type=\"checkbox\"]')[0];\n                var confLink = Element.select(trElement, 'a')[0];\n                var priceColl = Element.select(trElement, '.price')[0];\n                if (checkbox) {\n                    // processing non composite product\n                    if (confLink.readAttribute('disabled')) {\n                        var checked = isInputCheckbox ? checkbox.checked : !checkbox.checked;\n                        grid.setCheckboxChecked(checkbox, checked);\n                        // processing composite product\n                    } else if (isInputCheckbox && !checkbox.checked) {\n                        grid.setCheckboxChecked(checkbox, false);\n                        // processing composite product\n                    } else if (!isInputCheckbox || (isInputCheckbox && checkbox.checked)) {\n                        var listType = confLink.readAttribute('list_type');\n                        var productId = confLink.readAttribute('product_id');\n                        if (typeof this.productPriceBase[productId] == 'undefined') {\n                            var priceBase = priceColl.innerHTML.match(/.*?([\\d,]+\\.?\\d*)/);\n                            if (!priceBase) {\n                                this.productPriceBase[productId] = 0;\n                            } else {\n                                this.productPriceBase[productId] = parseFloat(priceBase[1].replace(/,/g, ''));\n                            }\n                        }\n                        productConfigure.setConfirmCallback(listType, function () {\n                            // sync qty of popup and qty of grid\n                            var confirmedCurrentQty = productConfigure.getCurrentConfirmedQtyElement();\n                            if (qtyElement && confirmedCurrentQty && !isNaN(confirmedCurrentQty.value)) {\n                                qtyElement.value = confirmedCurrentQty.value;\n                            }\n                            // calc and set product price\n                            var productPrice = this._calcProductPrice();\n                            if (this._isSummarizePrice()) {\n                                productPrice += this.productPriceBase[productId];\n                            }\n                            productPrice = parseFloat(Math.round(productPrice + \"e+2\") + \"e-2\");\n                            priceColl.innerHTML = this.currencySymbol + productPrice.toFixed(2);\n                            // and set checkbox checked\n                            grid.setCheckboxChecked(checkbox, true);\n                        }.bind(this));\n                        productConfigure.setCancelCallback(listType, function () {\n                            if (!$(productConfigure.confirmedCurrentId) || !$(productConfigure.confirmedCurrentId).innerHTML) {\n                                grid.setCheckboxChecked(checkbox, false);\n                            }\n                        });\n                        productConfigure.setShowWindowCallback(listType, function () {\n                            // sync qty of grid and qty of popup\n                            var formCurrentQty = productConfigure.getCurrentFormQtyElement();\n                            if (formCurrentQty && qtyElement && !isNaN(qtyElement.value)) {\n                                formCurrentQty.value = qtyElement.value;\n                            }\n                        }.bind(this));\n                        productConfigure.showItemConfiguration(listType, productId);\n                    }\n                }\n            }\n        },\n\n        /**\n         * Is need to summarize price\n         */\n        _isSummarizePrice: function (elm) {\n            if (elm && elm.hasAttribute('summarizePrice')) {\n                this.summarizePrice = parseInt(elm.readAttribute('summarizePrice'));\n            }\n            return this.summarizePrice;\n        },\n        /**\n         * Calc product price through its options\n         */\n        _calcProductPrice: function () {\n            var productPrice = 0;\n            var getPriceFields = function (elms) {\n                var productPrice = 0;\n                var getPrice = function (elm) {\n                    var optQty = 1;\n                    if (elm.hasAttribute('qtyId')) {\n                        if (!$(elm.getAttribute('qtyId')).value) {\n                            return 0;\n                        } else {\n                            optQty = parseFloat($(elm.getAttribute('qtyId')).value);\n                        }\n                    }\n                    if (elm.hasAttribute('price') && !elm.disabled) {\n                        return parseFloat(elm.readAttribute('price')) * optQty;\n                    }\n                    return 0;\n                };\n                for (var i = 0; i < elms.length; i++) {\n                    if (elms[i].type == 'select-one' || elms[i].type == 'select-multiple') {\n                        for (var ii = 0; ii < elms[i].options.length; ii++) {\n                            if (elms[i].options[ii].selected) {\n                                if (this._isSummarizePrice(elms[i].options[ii])) {\n                                    productPrice += getPrice(elms[i].options[ii]);\n                                } else {\n                                    productPrice = getPrice(elms[i].options[ii]);\n                                }\n                            }\n                        }\n                    } else if (((elms[i].type == 'checkbox' || elms[i].type == 'radio') && elms[i].checked)\n                        || ((elms[i].type == 'file' || elms[i].type == 'text' || elms[i].type == 'textarea' || elms[i].type == 'hidden')\n                            && Form.Element.getValue(elms[i]))\n                    ) {\n                        if (this._isSummarizePrice(elms[i])) {\n                            productPrice += getPrice(elms[i]);\n                        } else {\n                            productPrice = getPrice(elms[i]);\n                        }\n                    }\n                }\n                return productPrice;\n            }.bind(this);\n            productPrice += getPriceFields($(productConfigure.confirmedCurrentId).getElementsByTagName('input'));\n            productPrice += getPriceFields($(productConfigure.confirmedCurrentId).getElementsByTagName('select'));\n            productPrice += getPriceFields($(productConfigure.confirmedCurrentId).getElementsByTagName('textarea'));\n            return productPrice;\n        },\n\n        productGridCheckboxCheck: function (grid, element, checked) {\n            if (checked) {\n                if (element.inputElements) {\n                    this.gridProducts.set(element.value, {});\n                    var product = this.gridProducts.get(element.value);\n                    for (var i = 0; i < element.inputElements.length; i++) {\n                        var input = element.inputElements[i];\n                        if (!input.hasClassName('input-inactive')) {\n                            input.disabled = false;\n                            if (input.name == 'qty' && !input.value) {\n                                input.value = 1;\n                            }\n                        }\n\n                        if (input.checked || input.name != 'giftmessage') {\n                            product[input.name] = input.value;\n                        } else if (product[input.name]) {\n                            delete (product[input.name]);\n                        }\n                    }\n                }\n            } else {\n                if (element.inputElements) {\n                    for (var i = 0; i < element.inputElements.length; i++) {\n                        element.inputElements[i].disabled = true;\n                    }\n                }\n                this.gridProducts.unset(element.value);\n            }\n            grid.reloadParams = {'products[]': this.gridProducts.keys()};\n        },\n\n        productGridFilterKeyPress: function (grid, event) {\n            var returnKey = parseInt(Event.KEY_RETURN || 13, 10);\n\n            if (event.keyCode === returnKey) {\n                if (typeof event.stopPropagation === 'function') {\n                    event.stopPropagation();\n                }\n\n                if (typeof event.preventDefault === 'function') {\n                    event.preventDefault();\n                }\n            }\n        },\n\n        /**\n         * Submit configured products to quote\n         */\n        productGridAddSelected: function () {\n            if (this.productGridShowButton) Element.show(this.productGridShowButton);\n            var area = ['search', 'items', 'shipping_method', 'totals', 'giftmessage', 'billing_method'];\n            // prepare additional fields and filtered items of products\n            var fieldsPrepare = {};\n            var itemsFilter = [];\n            var products = this.gridProducts.toObject();\n            for (var productId in products) {\n                itemsFilter.push(productId);\n                var paramKey = 'item[' + productId + ']';\n                for (var productParamKey in products[productId]) {\n                    paramKey += '[' + productParamKey + ']';\n                    fieldsPrepare[paramKey] = products[productId][productParamKey];\n                }\n            }\n            this.productConfigureSubmit('product_to_add', area, fieldsPrepare, itemsFilter);\n            productConfigure.clean('quote_items');\n            this.hideArea('search');\n            this.gridProducts = $H({});\n        },\n\n        selectCustomer: function (grid, event) {\n            var element = Event.findElement(event, 'tr');\n            if (element.title) {\n                this.setCustomerId(element.title);\n            }\n        },\n\n        customerSelectorHide: function () {\n            this.hideArea('customer-selector');\n        },\n\n        customerSelectorShow: function () {\n            this.showArea('customer-selector');\n        },\n\n        storeSelectorHide: function () {\n            this.hideArea('store-selector');\n        },\n\n        storeSelectorShow: function () {\n            this.showArea('store-selector');\n        },\n\n        dataHide: function () {\n            this.hideArea('data');\n        },\n\n        dataShow: function () {\n            if ($('submit_order_top_button')) {\n                $('submit_order_top_button').show();\n            }\n            this.showArea('data');\n        },\n\n        clearShoppingCart: function (confirmMessage) {\n            var self = this;\n\n            confirm({\n                content: confirmMessage,\n                actions: {\n                    confirm: function () {\n                        self.collectElementsValue = false;\n                        order.sidebarApplyChanges({'sidebar[empty_customer_cart]': 1});\n                        self.collectElementsValue = true;\n                    }\n                }\n            });\n        },\n\n        sidebarApplyChanges: function (auxiliaryParams) {\n            if ($(this.getAreaId('sidebar'))) {\n                var data = {};\n                if (this.collectElementsValue) {\n                    var elems = $(this.getAreaId('sidebar')).select('input');\n                    for (var i = 0; i < elems.length; i++) {\n                        if (elems[i].getValue()) {\n                            data[elems[i].name] = elems[i].getValue();\n                        }\n                    }\n                }\n                if (auxiliaryParams instanceof Object) {\n                    for (var paramName in auxiliaryParams) {\n                        data[paramName] = String(auxiliaryParams[paramName]);\n                    }\n                }\n                data.reset_shipping = true;\n                this.loadArea(['sidebar', 'items', 'shipping_method', 'billing_method', 'totals', 'giftmessage'], true, data);\n            }\n        },\n\n        sidebarHide: function () {\n            if (this.storeId === false && $('page:left') && $('page:container')) {\n                $('page:left').hide();\n                $('page:container').removeClassName('container');\n                $('page:container').addClassName('container-collapsed');\n            }\n        },\n\n        sidebarShow: function () {\n            if ($('page:left') && $('page:container')) {\n                $('page:left').show();\n                $('page:container').removeClassName('container-collapsed');\n                $('page:container').addClassName('container');\n            }\n        },\n\n        /**\n         * Show configuration of product and add handlers on submit form\n         *\n         * @param productId\n         */\n        sidebarConfigureProduct: function (listType, productId, itemId) {\n            // create additional fields\n            var params = {},\n                isWishlist = !!itemId;\n            params.reset_shipping = true;\n            params.add_product = productId;\n            this.prepareParams(params);\n            for (var i in params) {\n                if (params[i] === null) {\n                    unset(params[i]);\n                } else if (typeof (params[i]) == 'boolean') {\n                    params[i] = params[i] ? 1 : 0;\n                }\n            }\n            var fields = [];\n            for (var name in params) {\n                fields.push(new Element('input', {type: 'hidden', name: name, value: params[name]}));\n            }\n            // add additional fields before triggered submit\n            productConfigure.setBeforeSubmitCallback(listType, function () {\n                productConfigure.addFields(fields);\n            }.bind(this));\n            // response handler\n            productConfigure.setOnLoadIFrameCallback(listType, function (response) {\n                var areas = ['items', 'shipping_method', 'billing_method', 'totals', 'giftmessage'];\n\n                if (!response.ok) {\n                    return;\n                }\n                if (isWishlist) {\n                    this.removeSidebarItem(itemId, 'wishlist').done(function () {\n                        this.loadArea(areas, true);\n                    }.bind(this));\n                } else {\n                    this.loadArea(areas, true);\n                }\n            }.bind(this));\n            // show item configuration\n            itemId = itemId ? itemId : productId;\n            productConfigure.showItemConfiguration(listType, itemId);\n            return false;\n        },\n\n        removeSidebarItem: function (id, from) {\n            return this.loadArea(['sidebar_' + from], 'sidebar_data_' + from, {\n                remove_item: id,\n                from: from\n            });\n        },\n\n        itemsUpdate: function () {\n            var area = ['sidebar', 'items', 'shipping_method', 'billing_method', 'totals', 'giftmessage'];\n            // prepare additional fields\n            var fieldsPrepare = {update_items: 1};\n            var info = $('order-items_grid').select('input', 'select', 'textarea');\n            for (var i = 0; i < info.length; i++) {\n                if (!info[i].disabled && (info[i].type != 'checkbox' || info[i].checked)) {\n                    fieldsPrepare[info[i].name] = info[i].getValue();\n                }\n            }\n            fieldsPrepare = Object.extend(fieldsPrepare, this.productConfigureAddFields);\n            this.productConfigureSubmit('quote_items', area, fieldsPrepare);\n            this.orderItemChanged = false;\n        },\n\n        itemsOnchangeBind: function () {\n            var elems = $('order-items_grid').select('input', 'select', 'textarea');\n            for (var i = 0; i < elems.length; i++) {\n                if (!elems[i].bindOnchange) {\n                    elems[i].bindOnchange = true;\n                    elems[i].observe('change', this.itemChange.bind(this))\n                }\n            }\n        },\n\n        itemChange: function (event) {\n            this.giftmessageOnItemChange(event);\n            this.orderItemChanged = true;\n        },\n\n        /**\n         * Submit batch of configured products\n         *\n         * @param listType\n         * @param area\n         * @param fieldsPrepare\n         * @param itemsFilter\n         */\n        productConfigureSubmit: function (listType, area, fieldsPrepare, itemsFilter) {\n            // prepare loading areas and build url\n            area = this.prepareArea(area);\n            this.loadingAreas = area;\n            var url = this.loadBaseUrl + 'block/' + area + '?isAjax=true';\n\n            // prepare additional fields\n            fieldsPrepare = this.prepareParams(fieldsPrepare);\n            fieldsPrepare.reset_shipping = 1;\n            fieldsPrepare.json = 1;\n\n            // create fields\n            var fields = [];\n            for (var name in fieldsPrepare) {\n                fields.push(new Element('input', {type: 'hidden', name: name, value: fieldsPrepare[name]}));\n            }\n            productConfigure.addFields(fields);\n\n            // filter items\n            if (itemsFilter) {\n                productConfigure.addItemsFilter(listType, itemsFilter);\n            }\n\n            // prepare and do submit\n            productConfigure.addListType(listType, {urlSubmit: url});\n            productConfigure.setOnLoadIFrameCallback(listType, function (response) {\n                this.loadAreaResponseHandler(response);\n            }.bind(this));\n            productConfigure.submit(listType);\n            // clean\n            this.productConfigureAddFields = {};\n        },\n\n        /**\n         * Show configuration of quote item\n         *\n         * @param itemId\n         */\n        showQuoteItemConfiguration: function (itemId) {\n            var listType = 'quote_items';\n            var qtyElement = $('order-items_grid').select('input[name=\"item\\[' + itemId + '\\]\\[qty\\]\"]')[0];\n            productConfigure.setConfirmCallback(listType, function () {\n                // sync qty of popup and qty of grid\n                var confirmedCurrentQty = productConfigure.getCurrentConfirmedQtyElement();\n                if (qtyElement && confirmedCurrentQty && !isNaN(confirmedCurrentQty.value)) {\n                    qtyElement.value = confirmedCurrentQty.value;\n                }\n                this.productConfigureAddFields['item[' + itemId + '][configured]'] = 1;\n                this.itemsUpdate();\n\n            }.bind(this));\n            productConfigure.setShowWindowCallback(listType, function () {\n                // sync qty of grid and qty of popup\n                var formCurrentQty = productConfigure.getCurrentFormQtyElement();\n                if (formCurrentQty && qtyElement && !isNaN(qtyElement.value)) {\n                    formCurrentQty.value = qtyElement.value;\n                }\n            }.bind(this));\n            productConfigure.showItemConfiguration(listType, itemId);\n        },\n\n        accountFieldsBind: function (container) {\n            if ($(container)) {\n                var fields = $(container).select('input', 'select', 'textarea');\n                for (var i = 0; i < fields.length; i++) {\n                    if (fields[i].id == 'group_id') {\n                        fields[i].observe('change', this.accountGroupChange.bind(this))\n                    } else {\n                        fields[i].observe('change', this.accountFieldChange.bind(this))\n                    }\n                }\n            }\n        },\n\n        accountGroupChange: function () {\n            this.loadArea(['data'], true, this.serializeData('order-form_account').toObject());\n        },\n\n        accountFieldChange: function () {\n            this.saveData(this.serializeData('order-form_account'));\n        },\n\n        commentFieldsBind: function (container) {\n            if ($(container)) {\n                var fields = $(container).select('input', 'textarea');\n                for (var i = 0; i < fields.length; i++)\n                    fields[i].observe('change', this.commentFieldChange.bind(this))\n            }\n        },\n\n        commentFieldChange: function () {\n            this.saveData(this.serializeData('order-comment'));\n        },\n\n        giftmessageFieldsBind: function (container) {\n            if ($(container)) {\n                var fields = $(container).select('input', 'textarea');\n                for (var i = 0; i < fields.length; i++)\n                    fields[i].observe('change', this.giftmessageFieldChange.bind(this))\n            }\n        },\n\n        giftmessageFieldChange: function () {\n            this.giftMessageDataChanged = true;\n        },\n\n        giftmessageOnItemChange: function (event) {\n            var element = Event.element(event);\n            if (element.name.indexOf(\"giftmessage\") != -1 && element.type == \"checkbox\" && !element.checked) {\n                var messages = $(\"order-giftmessage\").select('textarea');\n                var name;\n                for (var i = 0; i < messages.length; i++) {\n                    name = messages[i].id.split(\"_\");\n                    if (name.length < 2) continue;\n                    if (element.name.indexOf(\"[\" + name[1] + \"]\") != -1 && messages[i].value != \"\") {\n                        alert({\n                            content: \"First, clean the Message field in Gift Message form\"\n                        });\n                        element.checked = true;\n                    }\n                }\n            }\n        },\n\n        loadArea: function (area, indicator, params) {\n            var deferred = new jQuery.Deferred();\n            var url = this.loadBaseUrl;\n            if (area) {\n                area = this.prepareArea(area);\n                url += 'block/' + area;\n            }\n            if (indicator === true) indicator = 'html-body';\n            params = this.prepareParams(params);\n            params.json = true;\n            if (!this.loadingAreas) this.loadingAreas = [];\n            if (indicator) {\n                this.loadingAreas = area;\n                new Ajax.Request(url, {\n                    parameters: params,\n                    loaderArea: indicator,\n                    onSuccess: function (transport) {\n                        var response = transport.responseText.evalJSON();\n                        this.loadAreaResponseHandler(response);\n                        deferred.resolve();\n                    }.bind(this)\n                });\n            } else {\n                new Ajax.Request(url, {\n                    parameters: params,\n                    loaderArea: indicator,\n                    onSuccess: function (transport) {\n                        deferred.resolve();\n                    }\n                });\n            }\n            if (typeof productConfigure != 'undefined' && area instanceof Array && area.indexOf('items') != -1) {\n                productConfigure.clean('quote_items');\n            }\n            return deferred.promise();\n        },\n\n        loadAreaResponseHandler: function (response) {\n            if (response.error) {\n                alert({\n                    content: response.message\n                });\n            }\n            if (response.ajaxExpired && response.ajaxRedirect) {\n                setLocation(response.ajaxRedirect);\n            }\n            if (!this.loadingAreas) {\n                this.loadingAreas = [];\n            }\n            if (typeof this.loadingAreas == 'string') {\n                this.loadingAreas = [this.loadingAreas];\n            }\n            if (this.loadingAreas.indexOf('message') == -1) {\n                this.loadingAreas.push('message');\n            }\n            if (response.header) {\n                jQuery('.page-actions-inner').attr('data-title', response.header);\n            }\n\n            for (var i = 0; i < this.loadingAreas.length; i++) {\n                var id = this.loadingAreas[i];\n                if ($(this.getAreaId(id))) {\n                    if ((id in response) && id !== 'message' || response[id]) {\n                        $(this.getAreaId(id)).update(response[id]);\n                    }\n                    if ($(this.getAreaId(id)).callback) {\n                        this[$(this.getAreaId(id)).callback]();\n                    }\n                }\n            }\n        },\n\n        prepareArea: function (area) {\n            if (this.giftMessageDataChanged) {\n                return area.without('giftmessage');\n            }\n            return area;\n        },\n\n        saveData: function (data) {\n            this.loadArea(false, false, data);\n        },\n\n        showArea: function (area) {\n            var id = this.getAreaId(area);\n            if ($(id)) {\n                $(id).show();\n                this.areaOverlay();\n            }\n        },\n\n        hideArea: function (area) {\n            var id = this.getAreaId(area);\n            if ($(id)) {\n                $(id).hide();\n                this.areaOverlay();\n            }\n        },\n\n        areaOverlay: function () {\n            $H(order.overlayData).each(function (e) {\n                e.value.fx();\n            });\n        },\n\n        getAreaId: function (area) {\n            return 'order-' + area;\n        },\n\n        prepareParams: function (params) {\n            if (!params) {\n                params = {};\n            }\n            if (!params.customer_id) {\n                params.customer_id = this.customerId;\n            }\n            if (!params.store_id) {\n                params.store_id = this.storeId;\n            }\n            if (!params.currency_id) {\n                params.currency_id = this.currencyId;\n            }\n            if (!params.form_key) {\n                params.form_key = FORM_KEY;\n            }\n\n            if (this.isPaymentValidationAvailable()) {\n                var data = this.serializeData('order-billing_method');\n                if (data) {\n                    data.each(function (value) {\n                        params[value[0]] = value[1];\n                    });\n                }\n            } else {\n                params['payment[method]'] = this.paymentMethod;\n            }\n            return params;\n        },\n\n        /**\n         * Prevent from sending credit card information to server for some payment methods\n         *\n         * @returns {boolean}\n         */\n        isPaymentValidationAvailable: function () {\n            return ((typeof this.paymentMethod) == 'undefined'\n                || this.excludedPaymentMethods.indexOf(this.paymentMethod) == -1);\n        },\n\n        /**\n         * Serializes container form elements data.\n         *\n         * @param {String} container\n         * @return {Object}\n         */\n        serializeData: function (container) {\n            var fields = $(container).select('input', 'select', 'textarea'),\n                data = Form.serializeElements(fields, true);\n\n            return $H(data);\n        },\n\n        toggleCustomPrice: function (checkbox, elemId, tierBlock) {\n            if (checkbox.checked) {\n                $(elemId).disabled = false;\n                $(elemId).show();\n                if ($(tierBlock)) $(tierBlock).hide();\n            } else {\n                $(elemId).disabled = true;\n                $(elemId).hide();\n                if ($(tierBlock)) $(tierBlock).show();\n            }\n        },\n\n        submit: function () {\n            var $editForm = jQuery('#edit_form'),\n                beforeSubmitOrderEvent;\n\n            if ($editForm.valid()) {\n                $editForm.trigger('processStart');\n                beforeSubmitOrderEvent = jQuery.Event('beforeSubmitOrder');\n                $editForm.trigger(beforeSubmitOrderEvent);\n                if (beforeSubmitOrderEvent.result !== false) {\n                    $editForm.trigger('submitOrder');\n                }\n            }\n        },\n\n        _realSubmit: function () {\n            var disableAndSave = function () {\n                disableElements('save');\n                jQuery('#edit_form').on('invalid-form.validate', function () {\n                    enableElements('save');\n                    jQuery('#edit_form').trigger('processStop');\n                    jQuery('#edit_form').off('invalid-form.validate');\n                });\n                jQuery('#edit_form').triggerHandler('save');\n            }\n            if (this.orderItemChanged) {\n                var self = this;\n\n                jQuery('#edit_form').trigger('processStop');\n\n                confirm({\n                    content: jQuery.mage.__('You have item changes'),\n                    actions: {\n                        confirm: function () {\n                            jQuery('#edit_form').trigger('processStart');\n                            disableAndSave();\n                        },\n                        cancel: function () {\n                            self.itemsUpdate();\n                        }\n                    }\n                });\n            } else {\n                disableAndSave();\n            }\n        },\n\n        overlay: function (elId, show, observe) {\n            if (typeof (show) == 'undefined') {\n                show = true;\n            }\n\n            var orderObj = this;\n            var obj = this.overlayData.get(elId);\n            if (!obj) {\n                obj = {\n                    show: show,\n                    el: elId,\n                    order: orderObj,\n                    fx: function (event) {\n                        this.order.processOverlay(this.el, this.show);\n                    }\n                };\n                obj.bfx = obj.fx.bindAsEventListener(obj);\n                this.overlayData.set(elId, obj);\n            } else {\n                obj.show = show;\n                Event.stopObserving(window, 'resize', obj.bfx);\n            }\n\n            Event.observe(window, 'resize', obj.bfx);\n\n            this.processOverlay(elId, show);\n        },\n\n        processOverlay: function (elId, show) {\n            var el = $(elId);\n\n            if (!el) {\n                return;\n            }\n\n            var parentEl = el.up(1);\n            if (show) {\n                parentEl.removeClassName('ignore-validate');\n            } else {\n                parentEl.addClassName('ignore-validate');\n            }\n\n            if (Prototype.Browser.IE) {\n                parentEl.select('select').each(function (elem) {\n                    if (show) {\n                        elem.needShowOnSuccess = false;\n                        elem.style.visibility = '';\n                    } else {\n                        elem.style.visibility = 'hidden';\n                        elem.needShowOnSuccess = true;\n                    }\n                });\n            }\n\n            parentEl.setStyle({position: 'relative'});\n            el.setStyle({\n                display: show ? 'none' : ''\n            });\n        },\n\n        validateVat: function (parameters) {\n            var params = {\n                country: $(parameters.countryElementId).value,\n                vat: $(parameters.vatElementId).value\n            };\n\n            if (this.storeId !== false) {\n                params.store_id = this.storeId;\n            }\n\n            var currentCustomerGroupId = $(parameters.groupIdHtmlId)\n                ? $(parameters.groupIdHtmlId).value : '';\n\n            new Ajax.Request(parameters.validateUrl, {\n                parameters: params,\n                onSuccess: function (response) {\n                    var message = '';\n                    var groupActionRequired = null;\n                    try {\n                        response = response.responseText.evalJSON();\n\n                        if (null === response.group) {\n                            if (true === response.valid) {\n                                message = parameters.vatValidMessage;\n                            } else if (true === response.success) {\n                                message = parameters.vatInvalidMessage.replace(/%s/, params.vat);\n                            } else {\n                                message = parameters.vatValidationFailedMessage;\n                            }\n                        } else {\n                            if (true === response.valid) {\n                                message = parameters.vatValidAndGroupValidMessage;\n                                if (0 === response.group) {\n                                    message = parameters.vatValidAndGroupInvalidMessage;\n                                    groupActionRequired = 'inform';\n                                } else if (currentCustomerGroupId != response.group) {\n                                    message = parameters.vatValidAndGroupChangeMessage;\n                                    groupActionRequired = 'change';\n                                }\n                            } else if (response.success) {\n                                message = parameters.vatInvalidMessage.replace(/%s/, params.vat);\n                                groupActionRequired = 'inform';\n                            } else {\n                                message = parameters.vatValidationFailedMessage;\n                                groupActionRequired = 'inform';\n                            }\n                        }\n                    } catch (e) {\n                        message = parameters.vatValidationFailedMessage;\n                    }\n                    if (null === groupActionRequired) {\n                        alert({\n                            content: message\n                        });\n                    } else {\n                        this.processCustomerGroupChange(\n                            parameters.groupIdHtmlId,\n                            message,\n                            parameters.vatCustomerGroupMessage,\n                            parameters.vatGroupErrorMessage,\n                            response.group,\n                            groupActionRequired\n                        );\n                    }\n                }.bind(this)\n            });\n        },\n\n        processCustomerGroupChange: function (groupIdHtmlId, message, customerGroupMessage, errorMessage, groupId, action) {\n            var groupMessage = '';\n            try {\n                var currentCustomerGroupId = $(groupIdHtmlId).value;\n                var currentCustomerGroupTitle =\n                    $$('#' + groupIdHtmlId + ' > option[value=' + currentCustomerGroupId + ']')[0].text;\n                var customerGroupOption = $$('#' + groupIdHtmlId + ' > option[value=' + groupId + ']')[0];\n                groupMessage = customerGroupMessage.replace(/%s/, customerGroupOption.text);\n            } catch (e) {\n                groupMessage = errorMessage;\n                if (action === 'change') {\n                    message = '';\n                    action = 'inform';\n                }\n            }\n\n            if (action === 'change') {\n                var confirmText = message.replace(/%s/, customerGroupOption.text);\n                confirmText = confirmText.replace(/%s/, currentCustomerGroupTitle);\n                confirm({\n                    content: confirmText,\n                    actions: {\n                        confirm: function() {\n                            $$('#' + groupIdHtmlId + ' option').each(function (o) {\n                                o.selected = o.readAttribute('value') == groupId;\n                            });\n                            this.accountGroupChange();\n                        }.bind(this)\n                    }\n                })\n            } else if (action === 'inform') {\n                alert({\n                    content: message + '\\n' + groupMessage\n                });\n            }\n        }\n    };\n\n    window.OrderFormArea = Class.create();\n    OrderFormArea.prototype = {\n        _name: null,\n        _node: null,\n        _parent: null,\n        _callbackName: null,\n\n        initialize: function (name, node, parent) {\n            if (!node)\n                return;\n            this._name = name;\n            this._parent = parent;\n            this._callbackName = node.callback;\n            if (typeof this._callbackName == 'undefined') {\n                this._callbackName = name + 'Loaded';\n                node.callback = this._callbackName;\n            }\n            parent[this._callbackName] = parent[this._callbackName].wrap((function (proceed) {\n                proceed();\n                this.onLoad();\n            }).bind(this));\n\n            this.setNode(node);\n        },\n\n        setNode: function (node) {\n            if (!node.callback) {\n                node.callback = this._callbackName;\n            }\n            this.node = node;\n        },\n\n        onLoad: function () {\n        }\n    };\n\n    window.ControlButton = Class.create();\n\n    ControlButton.prototype = {\n        _label: '',\n        _node: null,\n\n        initialize: function (label, id) {\n            this._label = label;\n            this._node = new Element('button', {\n                'class': 'action-secondary action-add',\n                'type': 'button'\n            });\n            if (typeof id !== 'undefined') {\n                this._node.setAttribute('id', id)\n            }\n        },\n\n        onClick: function () {\n        },\n\n        insertIn: function (element, position) {\n            var node = Object.extend(this._node),\n                content = {};\n            node.observe('click', this.onClick);\n            node.update('<span>' + this._label + '</span>');\n            content[position] = node;\n            Element.insert(element, content);\n        },\n\n        getLabel: function () {\n            return this._label;\n        }\n    };\n});\n","Magento_Sales/order/edit/message.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery/ui',\n    'Magento_Ui/js/modal/modal',\n    'mage/translate'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.orderEditDialog', {\n        options: {\n            url:     null,\n            message: null,\n            modal:  null\n        },\n\n        /**\n         * @protected\n         */\n        _create: function () {\n            this._prepareDialog();\n        },\n\n        /**\n         * Show modal\n         */\n        showDialog: function () {\n            this.options.dialog.html(this.options.message).modal('openModal');\n        },\n\n        /**\n         * Redirect to edit page\n         */\n        redirect: function () {\n            window.location = this.options.url;\n        },\n\n        /**\n         * Prepare modal\n         * @protected\n         */\n        _prepareDialog: function () {\n            var self = this;\n\n            this.options.dialog = $('<div class=\"ui-dialog-content ui-widget-content\"></div>').modal({\n                type: 'popup',\n                modalClass: 'edit-order-popup',\n                title: $.mage.__('Edit Order'),\n                buttons: [{\n                    text: $.mage.__('Ok'),\n                    'class': 'action-primary',\n\n                    /** @inheritdoc */\n                    click: function () {\n                        self.redirect();\n                    }\n                }]\n            });\n        }\n    });\n\n    return $.mage.orderEditDialog;\n});\n","Magento_Sales/order/edit/address/form.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    /**\n     * Currently Magento App stores both  region_id and region (as text) values.\n     * To prevent missing region (as text) we need to copy it in hidden field.\n     * @param {Array} config\n     * @param {String} element\n     */\n    return function (config, element) {\n        var form = $(element),\n            regionId = form.find('#region_id'),\n\n            /**\n             * Set region callback\n             */\n            setRegion = function () {\n                form.find('#region').val(regionId.filter(':visible').find(':selected').text());\n            };\n\n        if (regionId.is('visible')) {\n            setRegion();\n        }\n\n        regionId.on('change', setRegion);\n        form.find('#country_id').on('change', setRegion);\n    };\n});\n","Magento_Sales/order/view/post-wrapper.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Ui/js/modal/confirm',\n    'mage/translate'\n], function ($, confirm) {\n    'use strict';\n\n    /**\n     * @param {String} url\n     * @returns {jQuery}\n     */\n    function getForm(url) {\n        return $('<form>', {\n            'action': url,\n            'method': 'POST'\n        }).append($('<input>', {\n            'name': 'form_key',\n            'value': window.FORM_KEY,\n            'type': 'hidden'\n        }));\n    }\n\n    $('#order-view-cancel-button').on('click', function () {\n        var msg = $.mage.__('Are you sure you want to cancel this order?'),\n            url = $('#order-view-cancel-button').data('url');\n\n        confirm({\n            'content': msg,\n            'actions': {\n\n                /**\n                 * 'Confirm' action handler.\n                 */\n                confirm: function () {\n                    getForm(url).appendTo('body').trigger('submit');\n                }\n            }\n        });\n\n        return false;\n    });\n\n    $('#order-view-hold-button').on('click', function () {\n        var url = $('#order-view-hold-button').data('url');\n\n        getForm(url).appendTo('body').trigger('submit');\n    });\n\n    $('#order-view-unhold-button').on('click', function () {\n        var url = $('#order-view-unhold-button').data('url');\n\n        getForm(url).appendTo('body').trigger('submit');\n    });\n});\n","Magento_Customer/edit/post-wrapper.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Ui/js/modal/confirm',\n    'mage/translate'\n], function ($, confirm) {\n    'use strict';\n\n    /**\n     * @param {String} url\n     * @returns {Object}\n     */\n    function getForm(url) {\n        return $('<form>', {\n            'action': url,\n            'method': 'POST'\n        }).append($('<input>', {\n            'name': 'form_key',\n            'value': window.FORM_KEY,\n            'type': 'hidden'\n        }));\n    }\n\n    $('#customer-edit-delete-button').on('click', function () {\n        var msg = $.mage.__('Are you sure you want to do this?'),\n            url = $('#customer-edit-delete-button').data('url');\n\n        confirm({\n            'content': msg,\n            'actions': {\n\n                /**\n                 * 'Confirm' action handler.\n                 */\n                confirm: function () {\n                    getForm(url).appendTo('body').submit();\n                }\n            }\n        });\n\n        return false;\n    });\n});\n","Magento_Customer/js/address/default-address.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/components/button',\n    'underscore'\n], function (Button, _) {\n    'use strict';\n\n    return Button.extend({\n        defaults: {\n            entityId: null,\n            parentId: null,\n            listens: {\n                entity: 'changeVisibility'\n            }\n        },\n\n        /**\n         * Apply action on target component,\n         * but previously create this component from template if it is not existed\n         *\n         * @param {Object} action - action configuration\n         */\n        applyAction: function (action) {\n            if (action.params && action.params[0]) {\n                action.params[0]['entity_id'] = this.entityId;\n                action.params[0]['parent_id'] = this.parentId;\n            } else {\n                action.params = [{\n                    'entity_id': this.entityId,\n                    'parent_id': this.parentId\n                }];\n            }\n\n            this._super();\n        },\n\n        /**\n         * Change visibility of the default address shipping/billing blocks\n         *\n         * @param {Object} entity - customer address\n         */\n        changeVisibility: function (entity) {\n            this.visible(!_.isEmpty(entity));\n        }\n    });\n});\n","Magento_Customer/js/bootstrap/customer-post-action.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\nrequire([\n    'Magento_Customer/edit/post-wrapper'\n]);\n","Magento_Customer/js/form/components/form.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'Magento_Ui/js/modal/alert',\n    'Magento_Ui/js/modal/confirm',\n    'Magento_Ui/js/form/form',\n    'underscore',\n    'mage/translate'\n], function ($, uiAlert, uiConfirm, Form, _, $t) {\n    'use strict';\n\n    return Form.extend({\n        defaults: {\n            deleteConfirmationMessage: '',\n            ajaxSettings: {\n                method: 'POST',\n                dataType: 'json'\n            }\n        },\n\n        /**\n         * Delete customer address by provided url.\n         * Will call confirmation message to be sure that user is really wants to delete this address\n         *\n         * @param {String} url - ajax url\n         */\n        deleteAddress: function (url) {\n            var that = this;\n\n            uiConfirm({\n                content: this.deleteConfirmationMessage,\n                actions: {\n                    /** @inheritdoc */\n                    confirm: function () {\n                        that._delete(url);\n                    }\n                }\n            });\n        },\n\n        /**\n         * Perform asynchronous DELETE request to server.\n         * @param {String} url - ajax url\n         * @returns {Deferred}\n         */\n        _delete: function (url) {\n            var settings = _.extend({}, this.ajaxSettings, {\n                    url: url,\n                    data: {\n                        'form_key': window.FORM_KEY\n                    }\n                }),\n                that = this;\n\n            $('body').trigger('processStart');\n\n            return $.ajax(settings)\n                .done(function (response) {\n                    if (response.error) {\n                        uiAlert({\n                            content: response.message\n                        });\n                    } else {\n                        that.trigger('deleteAddressAction', that.source.get('data.entity_id'));\n                    }\n                })\n                .fail(function () {\n                    uiAlert({\n                        content: $t('Sorry, there has been an error processing your request. Please try again later.')\n                    });\n                })\n                .always(function () {\n                    $('body').trigger('processStop');\n                });\n\n        }\n    });\n});\n","Magento_Customer/js/form/components/insert-form.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/components/insert-form'\n], function (Insert) {\n    'use strict';\n\n    return Insert.extend({\n        defaults: {\n            listens: {\n                responseData: 'onResponse'\n            },\n            modules: {\n                addressListing: '${ $.addressListingProvider }',\n                addressModal: '${ $.addressModalProvider }'\n            }\n        },\n\n        /**\n         * Close modal, reload customer address listing and save customer address\n         *\n         * @param {Object} responseData\n         */\n        onResponse: function (responseData) {\n            var data;\n\n            if (!responseData.error) {\n                this.addressModal().closeModal();\n                this.addressListing().reload({\n                    refresh: true\n                });\n                data = this.externalSource().get('data');\n                this.saveAddress(responseData, data);\n            }\n        },\n\n        /**\n         * Save customer address to customer form data source\n         *\n         * @param {Object} responseData\n         * @param {Object} data - customer address\n         */\n        saveAddress: function (responseData, data) {\n            data['entity_id'] = responseData.data['entity_id'];\n\n            if (parseFloat(data['default_billing'])) {\n                this.source.set('data.default_billing_address', data);\n            } else if (\n                parseFloat(this.source.get('data.default_billing_address')['entity_id']) === data['entity_id']\n            ) {\n                this.source.set('data.default_billing_address', []);\n            }\n\n            if (parseFloat(data['default_shipping'])) {\n                this.source.set('data.default_shipping_address', data);\n            } else if (\n                parseFloat(this.source.get('data.default_shipping_address')['entity_id']) === data['entity_id']\n            ) {\n                this.source.set('data.default_shipping_address', []);\n            }\n        },\n\n        /**\n         * Event method that closes \"Edit customer address\" modal and refreshes grid after customer address\n         * was removed through \"Delete\" button on the \"Edit customer address\" modal\n         *\n         * @param {String} id - customer address ID to delete\n         */\n        onAddressDelete: function (id) {\n            this.addressModal().closeModal();\n            this.addressListing().reload({\n                refresh: true\n            });\n            this.addressListing()._delete([parseFloat(id)]);\n        }\n    });\n});\n","Magento_Customer/js/form/components/insert-listing.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/components/insert-listing',\n    'underscore'\n], function (Insert, _) {\n    'use strict';\n\n    return Insert.extend({\n\n        /**\n         * On action call\n         *\n         * @param {Object} data - customer address and actions\n         */\n        onAction: function (data) {\n            this[data.action + 'Action'].call(this, data.data);\n        },\n\n        /**\n         * On mass action call\n         *\n         * @param {Object} data - customer address\n         */\n        onMassAction: function (data) {\n            this[data.action + 'Massaction'].call(this, data.data);\n        },\n\n        /**\n         * Set default billing address\n         *\n         * @param {Object} data - customer address\n         */\n        setDefaultBillingAction: function (data) {\n            this.source.set('data.default_billing_address', data);\n        },\n\n        /**\n         * Set default shipping address\n         *\n         * @param {Object} data - customer address\n         */\n        setDefaultShippingAction: function (data) {\n            this.source.set('data.default_shipping_address', data);\n        },\n\n        /**\n         * Delete customer address\n         *\n         * @param {Object} data - customer address\n         */\n        deleteAction: function (data) {\n            this._delete([parseFloat(data[data['id_field_name']])]);\n        },\n\n        /**\n         * Mass action delete\n         *\n         * @param {Object} data - customer address\n         */\n        deleteMassaction: function (data) {\n            var ids = data.selected || this.selections().selected();\n\n            ids = _.map(ids, function (val) {\n                return parseFloat(val);\n            });\n\n            this._delete(ids);\n        },\n\n        /**\n         * Delete customer address and selections by provided ids.\n         *\n         * @param {Array} ids\n         */\n        _delete: function (ids) {\n            var defaultShippingId = parseFloat(this.source.get('data.default_shipping_address.entity_id')),\n                defaultBillingId = parseFloat(this.source.get('data.default_billing_address.entity_id'));\n\n            if (ids.indexOf(defaultShippingId) !== -1) {\n                this.source.set('data.default_shipping_address', []);\n            }\n\n            if (ids.indexOf(defaultBillingId) !== -1) {\n                this.source.set('data.default_billing_address', []);\n            }\n\n            _.each(ids, function (id) {\n                this.selections().deselect(id.toString(), false);\n            }, this);\n        }\n    });\n});\n","Magento_Customer/js/form/element/country.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/element/country'\n], function (Country) {\n    'use strict';\n\n    return Country.extend({\n        defaults: {\n            countryScope: 'data.country'\n        },\n\n        /**\n         * Set country to customer address form\n         *\n         * @param {String} value - country\n         */\n        setDifferedFromDefault: function (value) {\n            this._super();\n\n            if (value) {\n                this.source.set(this.countryScope, this.indexedOptions[value].label);\n            }\n        }\n    });\n});\n","Magento_Customer/js/form/element/region.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/element/region'\n], function (Region) {\n    'use strict';\n\n    return Region.extend({\n        defaults: {\n            regionScope: 'data.region'\n        },\n\n        /**\n         * Set region to customer address form\n         *\n         * @param {String} value - region\n         */\n        setDifferedFromDefault: function (value) {\n            this._super();\n\n            if (parseFloat(value)) {\n                this.source.set(this.regionScope, this.indexedOptions[value].label);\n            }\n        }\n    });\n});\n","Magento_Customer/js/form/element/website.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/element/website',\n    'uiRegistry'\n], function (Website, registry) {\n    'use strict';\n\n    return Website.extend({\n        /**\n         * On value change handler.\n         *\n         * @param {String} value\n         */\n        onUpdate: function (value) {\n            var groupIdFieldKey = 'group_id',\n                sendEmailStoreIdFieldKey = 'sendemail_store_id',\n                groupId = registry.get('index = ' + groupIdFieldKey),\n                sendEmailStoreId = registry.get('index = ' + sendEmailStoreIdFieldKey),\n                option = this.getOption(value);\n\n            if (groupId) {\n                groupId.value(option[groupIdFieldKey]);\n            }\n\n            if (sendEmailStoreId && option['default_store_view_id']) {\n                sendEmailStoreId.value(option['default_store_view_id']);\n            }\n            return this._super();\n        }\n    });\n});\n","Magento_Customer/js/grid/massactions.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/grid/massactions',\n    'Magento_Ui/js/modal/alert',\n    'underscore',\n    'jquery',\n    'mage/translate'\n], function (Massactions, uiAlert, _, $, $t) {\n    'use strict';\n\n    return Massactions.extend({\n        defaults: {\n            ajaxSettings: {\n                method: 'POST',\n                dataType: 'json'\n            },\n            listens: {\n                massaction: 'onAction'\n            }\n        },\n\n        /**\n         * Reload customer addresses listing\n         *\n         * @param {Object} data\n         */\n        onAction: function (data) {\n            if (data.action === 'delete') {\n                this.source.reload({\n                    refresh: true\n                });\n            }\n        },\n\n        /**\n         * Default action callback. Send selections data\n         * via POST request.\n         *\n         * @param {Object} action - Action data.\n         * @param {Object} data - Selections data.\n         */\n        defaultCallback: function (action, data) {\n            var itemsType, selections;\n\n            if (action.isAjax) {\n                itemsType = data.excludeMode ? 'excluded' : 'selected';\n                selections = {};\n\n                selections[itemsType] = data[itemsType];\n\n                if (!selections[itemsType].length) {\n                    selections[itemsType] = false;\n                }\n\n                _.extend(selections, data.params || {});\n\n                this.request(action.url, selections).done(function (response) {\n                    if (!response.error) {\n                        this.trigger('massaction', {\n                            action: action.type,\n                            data: selections\n                        });\n                    }\n                }.bind(this));\n            } else {\n                this._super();\n            }\n        },\n\n        /**\n         * Send customer address listing mass action ajax request\n         *\n         * @param {String} href\n         * @param {Object} data\n         */\n        request: function (href, data) {\n            var settings = _.extend({}, this.ajaxSettings, {\n                url: href,\n                data: data\n            });\n\n            $('body').trigger('processStart');\n\n            return $.ajax(settings)\n                .done(function (response) {\n                    if (response.error) {\n                        uiAlert({\n                            content: response.message\n                        });\n                    }\n                })\n                .fail(function () {\n                    uiAlert({\n                        content: $t('Sorry, there has been an error processing your request. Please try again later.')\n                    });\n                })\n                .always(function () {\n                    $('body').trigger('processStop');\n                });\n        }\n    });\n});\n","Magento_Customer/js/grid/columns/actions.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/grid/columns/actions',\n    'Magento_Ui/js/modal/alert',\n    'underscore',\n    'jquery',\n    'mage/translate'\n], function (Actions, uiAlert, _, $, $t) {\n    'use strict';\n\n    return Actions.extend({\n        defaults: {\n            ajaxSettings: {\n                method: 'POST',\n                dataType: 'json'\n            },\n            listens: {\n                action: 'onAction'\n            },\n            ignoreTmpls: {\n                fieldAction: true,\n                options: true,\n                action: true\n            }\n        },\n\n        /**\n         * Reload customer address listing data source after customer address delete action\n         *\n         * @param {Object} data\n         */\n        onAction: function (data) {\n            if (data.action === 'delete') {\n                this.source().reload({\n                    refresh: true\n                });\n            }\n        },\n\n        /**\n         * Default action callback. Redirects to\n         * the specified in action's data url.\n         *\n         * @param {String} actionIndex - Action's identifier.\n         * @param {(Number|String)} recordId - Id of the record associated\n         *      with a specified action.\n         * @param {Object} action - Action's data.\n         */\n        defaultCallback: function (actionIndex, recordId, action) {\n            if (action.isAjax) {\n                this.request(action.href).done(function (response) {\n                    var data;\n\n                    if (!response.error) {\n                        data = _.findWhere(this.rows, {\n                            _rowIndex: action.rowIndex\n                        });\n\n                        this.trigger('action', {\n                            action: actionIndex,\n                            data: data\n                        });\n                    }\n                }.bind(this));\n\n            } else {\n                this._super();\n            }\n        },\n\n        /**\n         * Send customer address listing ajax request\n         *\n         * @param {String} href\n         */\n        request: function (href) {\n            var settings = _.extend({}, this.ajaxSettings, {\n                url: href,\n                data: {\n                    'form_key': window.FORM_KEY\n                }\n            });\n\n            $('body').trigger('processStart');\n\n            return $.ajax(settings)\n                .done(function (response) {\n                    if (response.error) {\n                        uiAlert({\n                            content: response.message\n                        });\n                    }\n                })\n                .fail(function () {\n                    uiAlert({\n                        content: $t('Sorry, there has been an error processing your request. Please try again later.')\n                    });\n                })\n                .always(function () {\n                    $('body').trigger('processStop');\n                });\n        }\n    });\n});\n","Magento_Customer/js/grid/filters/chips.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/grid/filters/chips'\n], function (Chips) {\n    'use strict';\n\n    return Chips.extend({\n\n        /**\n         * Clear previous filters while initializing element to prevent filters sharing between customers\n         *\n         * @param {Object} elem\n         */\n        initElement: function (elem) {\n            this.clear();\n            this._super(elem);\n        }\n    });\n});\n","Magento_Customer/js/grid/filters/filters.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/grid/filters/filters'\n], function (Filters) {\n    'use strict';\n\n    return Filters.extend({\n        defaults: {\n            chipsConfig: {\n                name: '${ $.name }_chips',\n                provider: '${ $.chipsConfig.name }',\n                component: 'Magento_Customer/js/grid/filters/chips'\n            }\n        }\n    });\n});\n","Magento_Integration/js/integration.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * jQuery plugin is added.\n *\n * @api\n */\ndefine([\n    'jquery',\n    'Magento_Ui/js/modal/alert',\n    'jquery/ui',\n    'mage/translate',\n    'Magento_Ui/js/modal/modal'\n], function ($, alert) {\n    'use strict';\n\n    $.widget('mage.integration', {\n        /**\n         * Options common to all instances of this widget.\n         * @type {Object}\n         */\n        options: {\n            /**\n             * URL of the integration grid.\n             * @type {String}\n             */\n            gridUrl: ''\n        },\n\n        /**\n         * Bind event handler for the action when admin clicks \"Save & Activate\" button.\n         * @private\n         */\n        _create: function () {\n            if ($('#save-split-button-activate').length) {\n                // We're on the \"New integration\" page - bind related handler\n                this._form = $('#edit_form');\n                this._form.on('saveAndActivate', $.proxy(this._saveAndActivate, this));\n            }\n        },\n\n        /**\n         * Save new integration, then kick off the activate dialog.\n         * @private\n         */\n        _saveAndActivate: function () {\n            if (this._form.validation && !this._form.validation('isValid')) {\n                return false;\n            }\n\n            $.ajax({\n                url: this._form.prop('action'),\n                type: 'post',\n                data: this._form.serialize(),\n                dataType: 'json',\n                context: this,\n\n                /** @inheritdoc */\n                beforeSend: function () {\n                    $('body').trigger('processStart');\n                },\n\n                /** @inheritdoc */\n                success: function (data) {\n                    var integrationName, that;\n\n                    if (data._redirect) {\n                        window.location.href = data._redirect;\n                    } else if (data.integrationId) {\n                        integrationName = $('#integration_properties_name').val();\n                        window.integration.popup.show($('<span>').attr({\n                            'data-row-dialog': 'permissions',\n                            'data-row-id': data.integrationId,\n                            // We do escaping here instead of the place of actual output because _showPopup()\n                            // actually receives dialog window title from couple of places: from here and from the grid.\n                            // The issue is we always should escape values in the grid, so that value is already\n                            // escaped. To avoid double escaping we do it here instead of the output.\n                            'data-row-name': $('<div>').text(integrationName).html(),\n                            'data-row-is-reauthorize': '0',\n                            'data-row-is-token-exchange': data.isTokenExchange\n                        }));\n                        that = this;\n                        $('#integration-popup-container').on('dialogclose', function () {\n                            $('body').trigger('processStart');\n                            window.location.href = that.options.gridUrl;\n\n                            return false;\n                        });\n                    }\n                },\n\n                /** @inheritdoc */\n                error: function (jqXHR, status, error) {\n                    alert({\n                        content: $.mage.__('Sorry, something went wrong. Please try again later.')\n                    });\n                    window.console && console.log(status + ': ' + error + '\\nResponse text:\\n' + jqXHR.responseText);\n                },\n\n                /** @inheritdoc */\n                complete: function () {\n                    $('body').trigger('processStop');\n                }\n            });\n\n            return true;\n        }\n    });\n\n    /**\n     * @param {*} permissionsDialogUrl\n     * @param {*} tokensDialogUrl\n     * @param {*} tokensExchangeUrl\n     * @param {*} gridUrl\n     * @param {*} successCallbackUrl\n     * @return {Object}\n     * @constructor\n     */\n    window.Integration = function (\n        permissionsDialogUrl,\n        tokensDialogUrl,\n        tokensExchangeUrl,\n        gridUrl,\n        successCallbackUrl\n    ) {\n        var url = {\n            permissions: permissionsDialogUrl,\n            tokens: tokensDialogUrl,\n            tokensExchange: tokensExchangeUrl,\n            grid: gridUrl\n        },\n        IdentityLogin = {\n            win: null,\n            strLocation: null,\n            checker: null,\n            isCalledBack: false,\n            //Info popup dialog. Should be hidden when login window is closed\n            jqInfoDialog: $('#integration-popup-container'),\n            successCallbackUrl: successCallbackUrl,\n            Constants: {\n                /*\n                 This interval is set such that it adjusts to the child window closing timeout of 1000 ms. This will\n                 give the checker function enough time to detect if the successCallback has been invoked\n                 */\n                CHECKER_INTERVAL: 500,\n                //Login screen size plus some buffer\n                WIDTH: 680,\n                HEIGHT: 510,\n                // subtract pixels(30) and width(680) from screen width to move popup from extreme left\n                LEFT: screen.width - 680 - 30,\n                // subtract pixels(300) and height(300) from screen height to move from top\n                TOP: screen.height - 510 - 300\n            },\n\n            /**\n             * @param {*} identityCallbackUrl\n             * @param {*} consumerKey\n             * @param {*} jqInfoDialog\n             */\n            invokePopup: function (identityCallbackUrl, consumerKey, jqInfoDialog) {\n                var param;\n\n                // Callback should be invoked only once. Reset callback flag on subsequent invocations.\n                IdentityLogin.isCalledBack = false;\n                IdentityLogin.jqInfoDialog = jqInfoDialog;\n                param = $.param({\n                    'oauth_consumer_key': consumerKey,\n                    'success_call_back': IdentityLogin.successCallbackUrl\n                });\n                IdentityLogin.win = window.open(identityCallbackUrl + '?' + param, '',\n                    'top=' + IdentityLogin.Constants.TOP +\n                        ', left=' + IdentityLogin.Constants.LEFT +\n                        ', width=' + IdentityLogin.Constants.WIDTH +\n                        ', height=' + IdentityLogin.Constants.HEIGHT + ',scrollbars=no');\n\n                if (IdentityLogin.checker != null) {\n                    //Clear any previous check\n                    clearInterval(IdentityLogin.checker);\n                }\n                //Polling to detect url of the child window.\n                IdentityLogin.checker = setInterval(\n                    IdentityLogin.fnCheckLocation, IdentityLogin.Constants.CHECKER_INTERVAL\n                );\n            },\n\n            /**\n             * Function to check the location of the child popup window.\n             * Once detected if the callback is successful, parent window will be reloaded\n             */\n            fnCheckLocation: function () {\n                if (IdentityLogin.win == null) {\n                    return;\n                }\n                // Check to see if the location has changed.\n                try {\n                    //Is the success callback invoked\n                    if (IdentityLogin.win.closed ||\n                        IdentityLogin.win.location.href == IdentityLogin.successCallbackUrl //eslint-disable-line eqeqeq\n                    ) {\n                        //Stop the polling\n                        clearInterval(IdentityLogin.checker);\n                        $('body').trigger('processStart');\n                        //Check for window closed\n                        window.location.href = url.grid;\n                        IdentityLogin.jqInfoDialog.modal('closeModal');\n                    }\n                } catch (e) {\n                    //squash. In case Window closed without success callback, clear polling\n                    if (IdentityLogin.win.closed) {\n                        IdentityLogin.jqInfoDialog.modal('closeModal');\n                        clearInterval(IdentityLogin.checker);\n                    }\n\n                    return;\n                }\n            }\n        },\n\n        /**\n         * @param {Object} popupWindow\n         * @return {Boolean}\n         */\n        isPopupBlocked = function (popupWindow) {\n            try {\n                popupWindow.focus();\n            } catch (e) {\n                alert({\n                    content: $.mage.__('Popup Blocker is enabled! Please add this site to your exception list.')\n                });\n\n                return true;\n            }\n\n            return false;\n        },\n\n        /**\n         * @param {*} dialog\n         * @param {*} title\n         * @param {*} okButton\n         * @param {*} ajaxUrl\n         * @private\n         */\n        _showPopup = function (dialog, title, okButton, ajaxUrl) {\n            $.ajax({\n                url: ajaxUrl,\n                cache: false,\n                data: {\n                    'form_key': window.FORM_KEY\n                },\n                method: 'GET',\n\n                /** @inheritdoc */\n                beforeSend: function () {\n                    // Show the spinner\n                    $('body').trigger('processStart');\n                },\n\n                /** @inheritdoc */\n                success: function (result) {\n                    var redirect = result._redirect,\n                        identityLinkUrl, consumerKey, popupHtml, popup, resultObj, buttons, dialogProperties;\n\n                    if (redirect) {\n                        window.location.href = redirect;\n\n                        return;\n                    }\n\n                    identityLinkUrl = null;\n                    consumerKey = null;\n                    popupHtml = null;\n                    popup = $('#integration-popup-container');\n\n                    try {\n                        resultObj = typeof result === 'string' ?\n                            JSON.parse(result) :\n                            result;\n\n                        identityLinkUrl = resultObj['identity_link_url'];\n                        consumerKey      = resultObj['oauth_consumer_key'];\n                        popupHtml       = resultObj['popup_content'];\n\n                    } catch (e) {\n                        //This is expected if result is not json. Do nothing.\n                    }\n\n                    if (identityLinkUrl && consumerKey && popupHtml) {\n                        IdentityLogin.invokePopup(identityLinkUrl, consumerKey, popup);\n\n                        if (isPopupBlocked(IdentityLogin.win)) {\n                            return;\n                        }\n                    } else {\n                        popupHtml = result;\n                    }\n\n                    if (popup.length === 0) {\n                        popup = $('<div></div>');\n                    }\n                    popup.html(popupHtml);\n\n                    buttons = [];\n                    dialogProperties = {\n                        title: title,\n                        type: 'slide',\n                        dialogClass: dialog == 'permissions' ? 'integration-dialog' : 'integration-dialog no-close' //eslint-disable-line\n                    };\n\n                    // Add confirmation button to the list of dialog buttons. okButton not set for tokenExchange dialog\n                    if (okButton) {\n                        buttons.push(okButton);\n                    }\n                    // Add button only if its not empty\n                    if (buttons.length > 0) {\n                        dialogProperties.buttons = buttons;\n                    }\n                    popup.modal(dialogProperties);\n                    popup.modal('openModal');\n                },\n\n                /** @inheritdoc */\n                error: function (jqXHR, status, error) {\n                    alert({\n                        content: $.mage.__('Sorry, something went wrong. Please try again later.')\n                    });\n                    window.console && console.log(status + ': ' + error + '\\nResponse text:\\n' + jqXHR.responseText);\n                },\n\n                /** @inheritdoc */\n                complete: function () {\n                    // Hide the spinner\n                    $('body').trigger('processStop');\n                }\n            });\n        };\n\n        return {\n            popup: {\n                /**\n                 * @param {*} ctx\n                 */\n                show: function (ctx) {\n                    var dialog = $(ctx).attr('data-row-dialog'),\n                        isReauthorize = $(ctx).attr('data-row-is-reauthorize'),\n                        isTokenExchange = $(ctx).attr('data-row-is-token-exchange'),\n                        integrationId, ajaxUrl, integrationName, okButton;\n\n                    if (!url.hasOwnProperty(dialog)) {\n                        throw 'Invalid dialog type';\n                    }\n\n                    integrationId = $(ctx).attr('data-row-id');\n\n                    if (!integrationId) {\n                        throw 'Unable to find integration ID';\n                    }\n\n                    // Replace placeholders in URL\n                    ajaxUrl = url[dialog].replace(':id', integrationId).replace(':isReauthorize', isReauthorize);\n\n                    try {\n                        // Get integration name either from current element or from neighbor column\n                        integrationName = $(ctx).attr('data-row-name') ||\n                            $(ctx).parents('tr').find('.col-name').html().trim(); // eslint-disable-line jquery-no-trim\n\n                        if (integrationName.indexOf('<span') > -1) {\n                            // Remove unsecure URL warning from popup window title if it is present\n                            integrationName = integrationName.substring(0, integrationName.indexOf('<span'));\n                        }\n                    } catch (e) {\n                        throw 'Unable to find integration name';\n                    }\n\n                    okButton = {\n                        permissions: {\n                            text: isReauthorize == '1' ? $.mage.__('Reauthorize') : $.mage.__('Allow'), //eslint-disable-line\n                            'class': 'action-primary',\n                            attr: {\n                                'data-row-id': integrationId,\n                                'data-row-name': integrationName,\n                                'data-row-dialog': isTokenExchange == '1' ? 'tokensExchange' : 'tokens', //eslint-disable-line\n                                'data-row-is-reauthorize': isReauthorize,\n                                'data-row-is-token-exchange': isTokenExchange\n                            },\n\n                            /**\n                             * Click.\n                             */\n                            click: function () {\n                                // Find the 'Allow' button and clone - it has all necessary data, but is going to be\n                                // destroyed along with the current dialog\n                                var context = this.modal.find('button.action-primary').clone(true);\n\n                                this.closeModal();\n                                this.modal.remove();\n                                // Make popup out of data we saved from 'Allow' button\n                                window.integration.popup.show(context);\n                            }\n                        },\n                        tokens: {\n                            text: $.mage.__('Done'),\n                            'class': 'action-primary',\n\n                            /**\n                             * Click.\n                             */\n                            click: function () {\n                                // Integration has been activated at the point of generating tokens\n                                window.location.href = url.grid;\n                            }\n                        }\n                    };\n\n                    _showPopup(dialog, integrationName, okButton[dialog], ajaxUrl);\n                }\n            }\n        };\n    };\n\n    return $.mage.integration;\n});\n","Magento_User/js/delete-user-account.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    var postData;\n\n    return function (params, elem) {\n\n        elem.on('click', function () {\n\n            postData = {\n                'data': {\n                    'user_id': params.objId,\n                    'current_password': $('[name=\"current_password\"]').val()\n                }\n            };\n\n            if ($.validator.validateElement($('[name=\"current_password\"]'))) {\n                window.deleteConfirm(params.message, params.url, postData);\n            }\n        });\n    };\n});\n","Magento_User/js/roles-tree.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'jquery',\n    'jquery/ui',\n    'jquery/jstree/jquery.jstree'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.rolesTree', {\n        options: {\n            treeInitData: {},\n            editFormSelector: '',\n            resourceFieldName: 'resource[]',\n            checkboxVisible: true\n        },\n\n        /** @inheritdoc */\n        _create: function () {\n            this.element.jstree({\n                plugins: ['checkbox'],\n                checkbox: {\n                    // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\n                    three_state: false,\n                    // jscs:enable requireCamelCaseOrUpperCaseIdentifiers\n                    visible: this.options.checkboxVisible,\n                    cascade: 'undetermined'\n                },\n                core: {\n                    data: this.options.treeInitData,\n                    themes: {\n                        dots: false\n                    }\n                }\n            });\n            this._bind();\n        },\n\n        /**\n         * @private\n         */\n        _destroy: function () {\n            this.element.jstree('destroy');\n        },\n\n        /**\n         * @private\n         */\n        _bind: function () {\n            this.element.on('select_node.jstree', $.proxy(this._selectChildNodes, this));\n            this.element.on('deselect_node.jstree', $.proxy(this._deselectChildNodes, this));\n            this.element.on('changed.jstree', $.proxy(this._changedNode, this));\n        },\n\n        /**\n         * @param {Event} event\n         * @param {Object} selected\n         * @private\n         */\n        _selectChildNodes: function (event, selected) {\n            // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\n            selected.instance.open_node(selected.node);\n            selected.node.children.each(function (id) {\n                var selector = '[id=\"' + id + '\"]';\n\n                selected.instance.select_node(\n                    selected.instance.get_node($(selector), false)\n                );\n            });\n            // jscs:enable requireCamelCaseOrUpperCaseIdentifiers\n        },\n\n        /**\n         * @param {Event} event\n         * @param {Object} selected\n         * @private\n         */\n        _deselectChildNodes: function (event, selected) {\n            selected.node.children.each(function (id) {\n                var selector = '[id=\"' + id + '\"]';\n\n                // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\n                selected.instance.deselect_node(\n                    selected.instance.get_node($(selector), false)\n                );\n                // jscs:enable requireCamelCaseOrUpperCaseIdentifiers\n            });\n        },\n\n        /**\n         * Add selected resources to form to be send later\n         *\n         * @param {Event} event\n         * @param {Object} selected\n         * @private\n         */\n        _changedNode: function (event, selected) {\n            var form = $(this.options.editFormSelector),\n                fieldName = this.options.resourceFieldName,\n                items = selected.selected.concat($(this.element).jstree('get_undetermined'));\n\n            if (this.options.editFormSelector === '') {\n                return;\n            }\n            form.find('input[name=\"' + this.options.resourceFieldName +  '\"]').remove();\n            items.each(function (id) {\n                $('<input>', {\n                    type: 'hidden',\n                    name: fieldName,\n                    value: id\n                }).appendTo(form);\n            });\n        }\n    });\n\n    return $.mage.rolesTree;\n});\n","Magento_Cms/js/folder-tree.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery/ui',\n    'jquery/jstree/jquery.jstree'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.folderTree', {\n        options: {\n            root: 'root',\n            rootName: 'Root',\n            url: '',\n            currentPath: ['root'],\n            tree: {\n                core: {\n                    themes: {\n                        dots: false\n                    },\n                    // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\n                    check_callback: true\n                    // jscs:enable requireCamelCaseOrUpperCaseIdentifiers\n                }\n            }\n        },\n\n        /** @inheritdoc */\n        _create: function () {\n            var options = this.options,\n                treeOptions = $.extend(\n                    true,\n                    {},\n                    options.tree,\n                    {\n                        core: {\n                            data: {\n                                url: options.url,\n                                type: 'POST',\n                                dataType: 'text',\n                                dataFilter: $.proxy(function (data) {\n                                    return this._convertData(JSON.parse(data));\n                                }, this),\n\n                                /**\n                                 * @param {HTMLElement} node\n                                 * @return {Object}\n                                 */\n                                data: function (node) {\n                                    return {\n                                        node: node.id === 'root' ? null : node.id,\n                                        'form_key': window.FORM_KEY\n                                    };\n                                }\n                            }\n                        }\n                    }\n                );\n\n            this.element.jstree(treeOptions)\n                .on('ready.jstree', $.proxy(this.treeLoaded, this))\n                .on('load_node.jstree', $.proxy(this._createRootNode, this));\n        },\n\n        /**\n         * Tree loaded.\n         */\n        treeLoaded: function () {\n            var path = this.options.currentPath,\n                tree = this.element,\n                lastExistentFolderEl,\n\n                /**\n                 * Recursively open folders specified in path array.\n                 */\n                recursiveOpen = function () {\n                    var folderEl = $('[data-id=\"' + path.pop() + '\"]');\n\n                    // if folder doesn't exist, select the last opened folder\n                    if (!folderEl.length) {\n                        tree.jstree('select_node', lastExistentFolderEl);\n\n                        return;\n                    }\n\n                    lastExistentFolderEl = folderEl;\n\n                    if (path.length) {\n                        tree.jstree('open_node', folderEl, recursiveOpen);\n                    } else {\n                        tree.jstree('open_node', folderEl, function () {\n                            tree.jstree('select_node', folderEl);\n                        });\n                    }\n                };\n\n            recursiveOpen();\n        },\n\n        /**\n         * Create tree root node\n         *\n         * @param {jQuery.Event} event\n         * @param {Object} data\n         * @private\n         */\n        _createRootNode: function (event, data) {\n            var rootNode, children;\n\n            // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\n            if (data.node.id === '#') {\n                rootNode = {\n                    id: this.options.root,\n                    text: this.options.rootName,\n                    li_attr: {\n                        'data-id': this.options.root\n                    }\n                };\n                children = data.node.children;\n\n                data.instance.element.jstree().create_node(null, rootNode, 'first', function () {\n                    data.instance.element.jstree().move_node(children, rootNode.id);\n                });\n            }\n            // jscs:enable requireCamelCaseOrUpperCaseIdentifiers\n        },\n\n        /**\n         * @param {*} data\n         * @return {*}\n         * @private\n         */\n        _convertData: function (data) {\n            return $.map(data, function (node) {\n\n                return {\n                    id: node.id,\n                    text: node.text,\n                    path: node.path,\n                    // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\n                    li_attr: {\n                        'data-id': node.id\n                    },\n                    // jscs:enable requireCamelCaseOrUpperCaseIdentifiers\n                    children: node.children\n                };\n            });\n        }\n    });\n\n    return $.mage.folderTree;\n});\n","Magento_Email/js/variables.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* global Variables, updateElementAtCursor */\ndefine([\n    'jquery',\n    'mage/translate',\n    'Magento_Ui/js/modal/modal',\n    'jquery/ui',\n    'prototype'\n], function (jQuery, $t) {\n    'use strict';\n\n    window.Variables = {\n        textareaElementId: null,\n        variablesContent: null,\n        dialogWindow: null,\n        dialogWindowId: 'variables-chooser',\n        overlayShowEffectOptions: null,\n        overlayHideEffectOptions: null,\n        insertFunction: 'Variables.insertVariable',\n        variablesValue: [],\n\n        /**\n         * @param {*} textareaElementId\n         * @param {Function} insertFunction\n         */\n        init: function (textareaElementId, insertFunction) {\n            if ($(textareaElementId)) {\n                this.textareaElementId = textareaElementId;\n            }\n\n            if (insertFunction) {\n                this.insertFunction = insertFunction;\n            }\n        },\n\n        /**\n         * reset data.\n         */\n        resetData: function () {\n            this.variablesContent = null;\n            this.dialogWindow = null;\n        },\n\n        /**\n         * @param {Object} variables\n         */\n        openVariableChooser: function (variables) {\n            if (this.variablesContent == null && variables) {\n                this.variablesContent = '<ul class=\"insert-variable\">';\n                variables.each(function (variableGroup) {\n                    if (variableGroup.label && variableGroup.value) {\n                        this.variablesContent += '<li><b>' + variableGroup.label.escapeHTML() + '</b></li>';\n                        variableGroup.value.each(function (variable) {\n                            if (variable.value && variable.label) {\n                                this.variablesValue.push(variable.value);\n                                this.variablesContent += '<li>' +\n                                    this.prepareVariableRow(this.variablesValue.length, variable.label) + '</li>';\n                            }\n                        }.bind(this));\n                    }\n                }.bind(this));\n                this.variablesContent += '</ul>';\n            }\n\n            if (this.variablesContent) {\n                this.openDialogWindow(this.variablesContent);\n            }\n        },\n\n        /**\n         * @param {*} variablesContent\n         */\n        openDialogWindow: function (variablesContent) {\n            var windowId = this.dialogWindowId;\n\n            jQuery('<div id=\"' + windowId + '\">' + variablesContent + '</div>').modal({\n                title: $t('Insert Variable...'),\n                type: 'slide',\n                buttons: [],\n\n                /** @inheritdoc */\n                closed: function (e, modal) {\n                    modal.modal.remove();\n                }\n            });\n\n            jQuery('#' + windowId).modal('openModal');\n        },\n\n        /**\n         * Close dialog window.\n         */\n        closeDialogWindow: function () {\n            jQuery('#' + this.dialogWindowId).modal('closeModal');\n        },\n\n        /**\n         * @param {Number} index\n         * @param {*} varLabel\n         * @return {String}\n         */\n        prepareVariableRow: function (index, varLabel) {\n            return '<a href=\"#\" onclick=\"' +\n                this.insertFunction +\n                '(' +\n                index +\n                ');return false;\">' +\n                varLabel.escapeHTML() +\n                '</a>';\n        },\n\n        /**\n         * @param {*} variable\n         */\n        insertVariable: function (variable) {\n            var windowId = this.dialogWindowId,\n                textareaElm, scrollPos;\n\n            jQuery('#' + windowId).modal('closeModal');\n            textareaElm = $(this.textareaElementId);\n\n            if (textareaElm) {\n                scrollPos = textareaElm.scrollTop;\n\n                if (!isNaN(variable)) {\n                    updateElementAtCursor(textareaElm, Variables.variablesValue[variable - 1]);\n                } else {\n                    updateElementAtCursor(textareaElm, variable);\n                }\n                textareaElm.focus();\n                textareaElm.scrollTop = scrollPos;\n                jQuery(textareaElm).trigger('change');\n                textareaElm = null;\n            }\n        }\n    };\n\n    window.MagentovariablePlugin = {\n        editor: null,\n        variables: null,\n        textareaId: null,\n\n        /**\n         * @param {*} editor\n         */\n        setEditor: function (editor) {\n            this.editor = editor;\n        },\n\n        /**\n         * @param {String} url\n         * @param {*} textareaId\n         */\n        loadChooser: function (url, textareaId) {\n            this.textareaId = textareaId;\n\n            if (this.variables == null) {\n                new Ajax.Request(url, {\n                    parameters: {},\n                    onComplete: function (transport) {\n                        if (transport.responseText.isJSON()) {\n                            Variables.init(null, 'MagentovariablePlugin.insertVariable');\n                            this.variables = transport.responseText.evalJSON();\n                            this.openChooser(this.variables);\n                        }\n                    }.bind(this)\n                });\n            } else {\n                this.openChooser(this.variables);\n            }\n        },\n\n        /**\n         * @param {*} variables\n         */\n        openChooser: function (variables) {\n            Variables.openVariableChooser(variables);\n        },\n\n        /**\n         * @param {*} value\n         */\n        insertVariable: function (value) {\n            if (this.textareaId) {\n                Variables.init(this.textareaId);\n                Variables.insertVariable(value);\n            } else {\n                Variables.closeDialogWindow();\n                this.editor.execCommand('mceInsertContent', false, value);\n            }\n        }\n    };\n});\n","Magento_Theme/js/bootstrap.js":"/**\n *\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\nrequire([\n    'jquery/fileUploader/jquery.fileupload-ui',\n    'mage/adminhtml/browser',\n    'Magento_Theme/js/form'\n]);\n","Magento_Theme/js/custom-js-list.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/template',\n    'jquery/ui'\n], function ($, mageTemplate) {\n    'use strict';\n\n    $.widget('theme.themeJsList', {\n        options: {\n            templateId: null,\n            emptyTemplateId: null,\n            refreshFileListEvent: null,\n            prefixItemId: '',\n            suffixItemId: ''\n        },\n\n        /**\n         * Initialize widget\n         *\n         * @protected\n         */\n        _create: function () {\n            this._bind();\n        },\n\n        /**\n         * Bind event handlers\n         *\n         * @protected\n         */\n        _bind: function () {\n            $('body').on(this.options.refreshFileListEvent, $.proxy(this._onRefreshList, this));\n        },\n\n        /**\n         * Render js files list\n         *\n         * @param {jQuery.Event} event\n         * @param {Object} data\n         * @protected\n         */\n        _onRefreshList: function (event, data) {\n            $(this.element).html('');\n\n            if (data.jsList.length) {\n                this._renderList(data.jsList);\n            } else {\n                this._renderEmptyList();\n            }\n        },\n\n        /**\n         * Get item js list id\n         *\n         * @param {*} fileId\n         * @return {String}\n         * @protected\n         */\n        _getItemId: function (fileId) {\n            return this.options.prefixItemId + fileId + this.options.suffixItemId;\n        },\n\n        /**\n         * Render js list\n         *\n         * @param {Array} jsList\n         * @protected\n         */\n        _renderList: function (jsList) {\n            var itemTmpl,\n                index,\n                tmpl;\n\n            for (index = 0; index < jsList.length; index++) {\n                itemTmpl = $('<li></li>').html($(this.options.templateId).html());\n\n                $(itemTmpl).attr('class', $(this.options.templateId).attr('class'));\n\n                itemTmpl.attr('id', this._getItemId(jsList[index].id));\n\n                tmpl = mageTemplate(itemTmpl.html(), {\n                    data: jsList[index]\n                });\n\n                itemTmpl.html(tmpl);\n\n                itemTmpl.removeClass('no-display');\n                itemTmpl.appendTo(this.element);\n            }\n        },\n\n        /**\n         * Set empty js list\n         *\n         * @protected\n         */\n        _renderEmptyList: function () {\n            var itemTmpl = $('<li></li>').html($(this.options.emptyTemplateId).html());\n\n            $(itemTmpl).attr('class', $(this.options.emptyTemplateId).attr('class'));\n\n            itemTmpl.attr('id', 'empty-js-list');\n            itemTmpl.removeClass('no-display');\n            itemTmpl.appendTo(this.element);\n        }\n    });\n});\n","Magento_Theme/js/form.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'prototype'\n], function () {\n    'use strict';\n\n    /**\n     * @param {*} selected\n     * @param {Object} defaultsById\n     */\n    function parentThemeOnChange(selected, defaultsById) {\n        var statusBar = $$('.tab-item-link')[0],\n            isChanged = statusBar.hasClassName('changed'),\n            defaults;\n\n        if (!isChanged) {\n            defaults = defaultsById[selected];\n            $('theme_title').value = defaults['theme_title'];\n        }\n    }\n\n    window.parentThemeOnChange = parentThemeOnChange;\n});\n","Magento_Theme/js/sortable.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * JQuery UI Widget declaration: 'mage.sortable'\n *\n * @api\n */\ndefine([\n    'jquery',\n    'jquery/ui'\n], function ($) {\n    'use strict';\n\n    /**\n     * Widget panel\n     */\n    $.widget('mage.sortable', $.ui.sortable, {\n        options: {\n            moveUpEvent:   'moveUp',\n            moveDownEvent: 'moveDown'\n        },\n\n        /** @inheritdoc */\n        _create: function () {\n            this._super();\n            this.initButtons();\n            this.bind();\n        },\n\n        /**\n         * Init buttons.\n         */\n        initButtons: function () {\n            this.element.find('input.up').on('click', $.proxy(function (event) {\n                $('body').trigger(this.options.moveUpEvent, {\n                    item: $(event.target).parent('li')\n                });\n            }, this));\n            this.element.find('input.down').on('click', $.proxy(function (event) {\n                $('body').trigger(this.options.moveDownEvent, {\n                    item: $(event.target).parent('li')\n                });\n            }, this));\n        },\n\n        /**\n         * Bind.\n         */\n        bind: function () {\n            var $body = $('body');\n\n            $body.on(this.options.moveUpEvent, $.proxy(this._onMoveUp, this));\n            $body.on(this.options.moveDownEvent, $.proxy(this._onMoveDown, this));\n        },\n\n        /**\n         * @param {jQuery.Event} event\n         * @param {Object} data\n         * @private\n         */\n        _onMoveUp: function (event, data) {\n            data.item.insertBefore(data.item.prev());\n        },\n\n        /**\n         * @param {jQuery.Event} event\n         * @param {Object} data\n         * @private\n         */\n        _onMoveDown: function (event, data) {\n            data.item.insertAfter(data.item.next());\n        }\n    });\n\n    return $.mage.sortable;\n});\n","Magento_Theme/js/form/component/robots-reset-button.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'Magento_Ui/js/form/components/button',\n    'uiRegistry'\n], function (Button, registry) {\n    'use strict';\n\n    return Button.extend({\n        defaults: {\n            customInstructionField: '${ $.parentName }.custom_instructions',\n            label: '',\n            buttonTpl: 'Magento_Theme/form/element/button'\n        },\n\n        /**\n         * @private\n         * @param {String} json\n         * @return {String}\n         */\n        _parseJson: function (json) {\n            return JSON.parse(json);\n        },\n\n        /**\n         * @param {String} defaultRobotsTxt\n         */\n        reset: function (defaultRobotsTxt) {\n            var customInstructions = registry.get(this.customInstructionField);\n\n            if (customInstructions) {\n                customInstructions.set('value', this._parseJson(defaultRobotsTxt));\n            }\n        }\n    });\n});\n","Magento_Eav/js/input-types.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'mage/translate'\n], function ($) {\n    'use strict';\n\n    return function (config) {\n        $('select#frontend_input').each(function () {\n            var select = $(this),\n                currentValue = select.find('option:selected').val(),\n                compatibleTypes = config.inputTypes,\n                enabledTypes = [],\n                iterator,\n                warning = $('<label>')\n                    .hide()\n                    .text($.mage.__('These changes affect all related products.'))\n                    .addClass('mage-error')\n                    .attr({\n                        generated: true, for: select.attr('id')\n                    }),\n                hint = $('<p>')\n                    .hide()\n                    .addClass('note')\n                    .attr({\n                        generated: true\n                    }),\n                hints = config.hints,\n\n            /**\n             * Toggle hint about changes types\n             */\n            toggleWarning = function () {\n                if (select.find('option:selected').val() === currentValue) {\n                    warning.hide();\n                } else {\n                    warning.show();\n                }\n            },\n\n            /**\n             * Toggle hint\n             */\n            toggleHint = function () {\n                if (typeof hints[select.find('option:selected').val()] !== 'undefined') {\n                    select.after(hint.show().text(hints[select.find('option:selected').val()]));\n                } else {\n                    hint.hide();\n                }\n            },\n\n            /**\n             * Remove unsupported options\n             */\n            removeOption = function () {\n                if (!~enabledTypes.indexOf($(this).val())) {\n                    $(this).remove();\n                }\n            };\n\n            // find enabled types for switching dor current input type\n            for (iterator = 0; iterator < compatibleTypes.length; iterator++) {\n                if (compatibleTypes[iterator].indexOf(currentValue) >= 0) {\n                    enabledTypes = compatibleTypes[iterator];\n                }\n            }\n\n            // Check current type (allow only compatible types)\n            if (~enabledTypes.indexOf(currentValue)) {\n                // Enable select and keep only available options (all other will be removed)\n                select.prop('disabled', false).find('option').each(removeOption);\n                // Add warning on page and event for show/hide it\n                select.after(warning).on('change', toggleWarning);\n            }\n            //bind hint toggling on change event\n            select.on('change', toggleHint);\n            //show hint for currently selected value\n            toggleHint();\n        });\n    };\n});\n","Magento_CatalogInventory/js/components/qty-validator-changer.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/element/abstract'\n], function (Abstract) {\n    'use strict';\n\n    return Abstract.extend({\n        defaults: {\n            valueUpdate: 'input'\n        },\n\n        /**\n         * Change validator\n         */\n        handleChanges: function (value) {\n            var isDigits = value !== 1;\n\n            this.validation['validate-integer'] = isDigits;\n            this.validation['less-than-equals-to'] = isDigits ? 99999999 : 99999999.9999;\n            this.validate();\n        }\n    });\n});\n","Magento_CatalogInventory/js/components/use-config-min-sale-qty.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/element/single-checkbox',\n    'underscore',\n    'uiRegistry'\n], function (checkbox, _, registry) {\n    'use strict';\n\n    return checkbox.extend({\n        defaults: {\n            valueFromConfig: ''\n        },\n\n        /**\n         * @returns {Element}\n         */\n        initObservable: function () {\n            return this\n                ._super()\n                .observe(['valueFromConfig']);\n        },\n\n        /**\n         * @inheritdoc\n         */\n        initialize: function () {\n            this._super();\n            this.onCheckedChanged(this.checked());\n\n            return this;\n        },\n\n        /**\n         * @inheritdoc\n         */\n        onCheckedChanged: function (newChecked) {\n            var valueFromConfig = this.valueFromConfig();\n\n            if (newChecked && (_.isArray(valueFromConfig) && valueFromConfig.length === 0 || valueFromConfig === 1)) {\n                this.changeVisibleDisabled(this.inputField, true, true, 1);\n            } else if (newChecked && _.isObject(valueFromConfig)) {\n                this.changeVisibleDisabled(this.inputField, false, true, null);\n                this.changeVisibleDisabled(this.dynamicRowsField, true, true, null);\n            } else if (newChecked && _.isNumber(valueFromConfig)) {\n                this.changeVisibleDisabled(this.inputField, true, true, null);\n                this.changeVisibleDisabled(this.dynamicRowsField, false, true, null);\n            } else {\n                this.changeVisibleDisabled(this.inputField, true, this.disabled() || false, null);\n                this.changeVisibleDisabled(this.dynamicRowsField, false, true, null);\n            }\n\n            this._super(newChecked);\n        },\n\n        /**\n         * Change visible and disabled\n         *\n         * @param {String} filter\n         * @param {Boolean} visible\n         * @param {Boolean} disabled\n         * @param {Null|Number} valueFromConfig\n         */\n        changeVisibleDisabled: function (filter, visible, disabled, valueFromConfig) {\n            registry.async(filter)(\n                function (currentComponent) {\n                    var initialValue = currentComponent.initialValue;\n\n                    if (_.isString(initialValue) || initialValue === 0 || valueFromConfig === 1) {\n                        currentComponent.value(1);\n                    } else if (initialValue) {\n                        currentComponent.value(initialValue);\n                    }\n\n                    currentComponent.visible(visible);\n                    currentComponent.disabled(disabled);\n                }\n            );\n        }\n    });\n});\n","Magento_CatalogInventory/js/components/use-config-settings.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/element/single-checkbox'\n], function (checkbox) {\n    'use strict';\n\n    return checkbox.extend({\n        defaults: {\n            valueFromConfig: '',\n            linkedValue: '',\n            disableParent: false,\n            listens: {\n                disabled: 'processState',\n                checked: 'processState onCheckedChanged'\n            },\n            imports: {\n                readOnly: 'ns = ${ $.ns }, index = stock_data:disabled'\n            }\n        },\n\n        /**\n         * @returns {Element}\n         */\n        initObservable: function () {\n            return this\n                ._super()\n                .observe(['valueFromConfig', 'linkedValue', 'disableParent']);\n        },\n\n        /**\n         * Handle checked and disabled changes to calculate disableParent value\n         */\n        processState: function () {\n            this.disableParent(this.checked() || this.readOnly);\n\n            if (this.readOnly) {\n                this.disable();\n            }\n        },\n\n        /**\n         * @inheritdoc\n         */\n        onCheckedChanged: function (newChecked) {\n            if (newChecked) {\n                this.linkedValue(this.valueFromConfig());\n            }\n\n            this._super(newChecked);\n        }\n    });\n});\n","Magento_Downloadable/downloadable-type-handler.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'Magento_Catalog/js/product/weight-handler',\n    'Magento_Catalog/catalog/type-events'\n], function ($, weight, productType) {\n    'use strict';\n\n    return {\n        $checkbox: $('[data-action=change-type-product-downloadable]'),\n        $items: $('#product_info_tabs_downloadable_items'),\n        $tab: null,\n        isDownloadable: false,\n\n        /**\n         * Show\n         */\n        show: function () {\n            this.$checkbox.prop('checked', true);\n            this.$items.show();\n        },\n\n        /**\n         * Hide\n         */\n        hide: function () {\n            this.$checkbox.prop('checked', false);\n            this.$items.hide();\n        },\n\n        /**\n         * Constructor component\n         * @param {Object} data - this backend data\n         */\n        'Magento_Downloadable/downloadable-type-handler': function (data) {\n            this.$tab = $('[data-tab=' + data.tabId + ']');\n            this.isDownloadable = data.isDownloadable;\n            this.bindAll();\n            this._initType();\n        },\n\n        /**\n         * Bind all\n         */\n        bindAll: function () {\n            this.$checkbox.on('change', function (event) {\n                $(document).trigger('setTypeProduct', $(event.target).prop('checked') ?\n                    'downloadable' :\n                    productType.type.init === 'downloadable' ? 'virtual' : productType.type.init\n                );\n            });\n\n            $(document).on('changeTypeProduct', this._initType.bind(this));\n        },\n\n        /**\n         * Init type\n         * @private\n         */\n        _initType: function () {\n            if (productType.type.current === 'downloadable') {\n                weight.change(false);\n                weight.$weightSwitcher().one('change', function () {\n                    $(document).trigger(\n                        'setTypeProduct',\n                        productType.type.init === 'downloadable' ? 'virtual' : productType.type.init\n                    );\n                });\n                this.show();\n            } else {\n                this.hide();\n            }\n        }\n    };\n});\n","Magento_Downloadable/js/components/file-uploader.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'Magento_Ui/js/form/element/file-uploader'\n], function (Element) {\n    'use strict';\n\n    return Element.extend({\n        defaults: {\n            fileInputName: ''\n        },\n\n        /**\n         * Adds provided file to the files list.\n         *\n         * @param {Object} file\n         * @returns {FileUploder} Chainable.\n         */\n        addFile: function (file) {\n            var processedFile = this.processFile(file),\n                tmpFile = [],\n                resultFile = {\n                'file': processedFile.file,\n                'name': processedFile.name,\n                'size': processedFile.size,\n                'status': processedFile.status ? processedFile.status : 'new'\n            };\n\n            tmpFile[0] = resultFile;\n\n            this.isMultipleFiles ?\n                this.value.push(tmpFile) :\n                this.value(tmpFile);\n\n            return this;\n        }\n    });\n});\n","Magento_Downloadable/js/components/is-downloadable-handler.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'Magento_Ui/js/form/element/single-checkbox'\n], function (Element) {\n    'use strict';\n\n    return Element.extend({\n        defaults: {\n            listens: {\n                disabled: 'changeVisibility'\n            },\n            modules: {\n                samplesFieldset: '${ $.samplesFieldset }',\n                linksFieldset: '${ $.linksFieldset}'\n            }\n        },\n\n        /**\n         * Change visibility for samplesFieldset & linksFieldset based on current statuses of checkbox.\n         */\n        changeVisibility: function () {\n            if (this.samplesFieldset() && this.linksFieldset()) {\n                if (this.checked() && !this.disabled()) {\n                    this.samplesFieldset().visible(true);\n                    this.linksFieldset().visible(true);\n                } else {\n                    this.samplesFieldset().visible(false);\n                    this.linksFieldset().visible(false);\n                }\n            }\n        },\n\n        /**\n         * Handle checked state changes for checkbox / radio button.\n         *\n         * @param {Boolean} newChecked\n         */\n        onCheckedChanged: function (newChecked) {\n            this.changeVisibility();\n            this._super(newChecked);\n        }\n    });\n});\n","Magento_Downloadable/js/components/price-handler.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'Magento_Ui/js/form/element/abstract'\n], function (Element) {\n    'use strict';\n\n    return Element.extend({\n        defaults: {\n            linksPurchasedSeparately: '0',\n            useDefaultPrice: false,\n            listens: {\n                linksPurchasedSeparately: 'changeDisabledStatus',\n                useDefaultPrice: 'changeDisabledStatus'\n            }\n        },\n\n        /**\n         * Invokes initialize method of parent class,\n         * contains initialization logic\n         */\n        initialize: function () {\n            this._super();\n            this.changeDisabledStatus();\n\n            return this;\n        },\n\n        /**\n         * Disable/enable price field\n         */\n        changeDisabledStatus: function () {\n            if (this.linksPurchasedSeparately === '1') {\n                if (this.useDefaultPrice) {\n                    this.disabled(true);\n                } else {\n                    this.disabled(false);\n                }\n            } else {\n                this.disabled(true);\n            }\n        }\n    });\n});\n","Magento_Downloadable/js/components/upload-type-handler.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'Magento_Ui/js/form/element/select',\n    'uiRegistry'\n], function (Select, registry) {\n    'use strict';\n\n    return Select.extend({\n        defaults: {\n            listens: {\n                value: 'changeTypeUpload'\n            },\n            typeUrl: 'file',\n            typeFile: 'link_url',\n            filterPlaceholder: 'ns = ${ $.ns }, parentScope = ${ $.parentScope }'\n        },\n\n        /**\n         * Initialize component.\n         * @returns {Element}\n         */\n        initialize: function () {\n            return this\n                ._super()\n                .changeTypeUpload(this.initialValue);\n        },\n\n        /**\n         * Callback that fires when 'value' property is updated.\n         *\n         * @param {String} currentValue\n         * @returns {*}\n         */\n        onUpdate: function (currentValue) {\n            this.changeTypeUpload(currentValue);\n\n            return this._super();\n        },\n\n        /**\n         * Change visibility for typeUrl/typeFile based on current value.\n         *\n         * @param {String} currentValue\n         */\n        changeTypeUpload: function (currentValue) {\n            var componentFile = this.filterPlaceholder + ', index=' + this.typeFile,\n                componentUrl = this.filterPlaceholder + ', index=' + this.typeUrl;\n\n            switch (currentValue) {\n\n                case 'file':\n                    this.changeVisible(componentFile, true);\n                    this.changeVisible(componentUrl, false);\n                    break;\n\n                case 'url':\n                    this.changeVisible(componentFile, false);\n                    this.changeVisible(componentUrl, true);\n                    break;\n            }\n        },\n\n        /**\n         * Change visible\n         *\n         * @param {String} filter\n         * @param {Boolean} visible\n         */\n        changeVisible: function (filter, visible) {\n            registry.async(filter)(\n                function (currentComponent) {\n                    currentComponent.visible(visible);\n                }\n            );\n        }\n    });\n});\n","Magento_Downloadable/js/components/use-price-default-handler.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'Magento_Ui/js/form/element/single-checkbox'\n], function (Element) {\n    'use strict';\n\n    return Element.extend({\n        defaults: {\n            linksPurchasedSeparately: '0',\n            listens: {\n                linksPurchasedSeparately: 'changeVisibleStatus'\n            }\n        },\n\n        /**\n         * Change visibility of checkbox\n         */\n        changeVisibleStatus: function () {\n            if (this.linksPurchasedSeparately === '1') {\n                this.visible(true);\n            } else {\n                this.visible(false);\n            }\n        }\n    });\n});\n","Magento_Review/js/rating.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'jquery/ui'\n], function ($) {\n    'use strict';\n\n    $.widget('marketing.ratingControl', {\n        options: {\n            colorFilled: '#333',\n            colorUnfilled: '#CCCCCC',\n            colorHover: '#f30'\n        },\n\n        /** @inheritdoc */\n        _create: function () {\n            this._labels = this.element.find('label');\n            this._bind();\n        },\n\n        /**\n         * @private\n         */\n        _bind: function () {\n            this._labels.on({\n                click: $.proxy(function (e) {\n                    $(e.currentTarget).prev().prop('checked', true);\n                    this._updateRating();\n                }, this),\n\n                hover: $.proxy(function (e) {\n                    this._updateHover($(e.currentTarget), this.options.colorHover);\n                }, this),\n\n                mouseleave: $.proxy(function (e) {\n                    this._updateHover($(e.currentTarget), this.options.colorUnfilled);\n                }, this)\n            });\n\n            this._updateRating();\n        },\n\n        /**\n         * @param {jQuery} elem\n         * @param {String} color\n         * @private\n         */\n        _updateHover: function (elem, color) {\n            elem.nextAll('label').addBack().filter(function () {\n                return !$(this).data('checked');\n            }).css('color', color);\n        },\n\n        /**\n         * @private\n         */\n        _updateRating: function () {\n            var checkedInputs = this.element.find('input[type=\"radio\"]:checked');\n\n            checkedInputs.nextAll('label').addBack().css('color', this.options.colorFilled).data('checked', true);\n            checkedInputs.prevAll('label').css('color', this.options.colorUnfilled).data('checked', false);\n        },\n\n        /**\n         * Remove rating when form reset\n         */\n        removeRating: function () {\n            var checkedInputs = this.element.find('input[type=\"radio\"]');\n\n            checkedInputs.nextAll('label').css('color', this.options.colorUnfilled).data('checked', false);\n        }\n    });\n\n});\n"}
}});
